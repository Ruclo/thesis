/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/exceptions.py:91: DeprecationWarning: HTTPResponse.getheaders() is deprecated and will be removed in urllib3 v2.1.0. Instead access HTTPResponse.headers directly.
  self.headers = http_resp.getheaders()
/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/exceptions.py:91: DeprecationWarning: HTTPResponse.getheaders() is deprecated and will be removed in urllib3 v2.1.0. Instead access HTTPResponse.headers directly.
  self.headers = http_resp.getheaders()
2026-01-26T12:38:54.450383 ocp_resources Namespace INFO Create Namespace cnv-tests-run-in-progress-ns
2026-01-26T12:38:54.450481 ocp_resources Namespace INFO Posting {'apiVersion': 'v1', 'kind': 'Namespace', 'metadata': {'name': 'cnv-tests-run-in-progress-ns'}, 'spec': {}}
2026-01-26T12:38:54.465117 ocp_resources Namespace INFO Wait until Namespace cnv-tests-run-in-progress-ns is created
2026-01-26T12:38:54.468555 ocp_resources Namespace INFO Wait for Namespace cnv-tests-run-in-progress-ns status to be Active
2026-01-26T12:38:54.502456 ocp_resources Namespace INFO Status of Namespace cnv-tests-run-in-progress-ns is Active
2026-01-26T12:38:54.502869 ocp_resources Namespace INFO Update Namespace cnv-tests-run-in-progress-ns:
{'metadata': {'labels': {'pod-security.kubernetes.io/enforce': 'privileged', 'security.openshift.io/scc.podSecurityLabelSync': 'false'}, 'name': 'cnv-tests-run-in-progress-ns'}}
2026-01-26T12:38:54.535370 ocp_resources ConfigMap INFO Create ConfigMap cnv-tests-run-in-progress
2026-01-26T12:38:54.535522 ocp_resources ConfigMap INFO Posting {'apiVersion': 'v1', 'kind': 'ConfigMap', 'metadata': {'name': 'cnv-tests-run-in-progress', 'namespace': 'cnv-tests-run-in-progress-ns'}, 'data': '*******'}
2026-01-26T12:38:54.579052 ocp_resources ConfigMap INFO Wait until ConfigMap cnv-tests-run-in-progress is created
=============================================================== test session starts ===============================================================
platform linux -- Python 3.14.0, pytest-9.0.2, pluggy-1.6.0
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /home/mvavrine/cnv/openshift-virtualization-tests
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, html-4.1.1, order-1.3.0, repeat-0.9.4, progress-1.4.0, dependency-0.6.0, jira-0.3.22, metadata-3.1.1, testconfig-0.2.0, benchmark-5.2.3, mock-3.15.1
collected 9 items                                                                                                                                 

tests/virt/node/general/test_vmi_reset.py .
TEST: TestVMIReset.test_reset_success[vm-for-reset-test] STATUS: PASSED

------------------------------------------------------- TEARDOWN -------------------------------------------------------
__________________________________ 1 of 9 completed, 1 Pass, 0 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun ___________________________________

tests/virt/node/general/test_vmi_reset.py .
__________________________________ 2 of 9 completed, 2 Pass, 0 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun ___________________________________

tests/virt/node/general/test_vmi_reset.py F

____________________________________________ test_reset_via_virtctl_command[vm-for-virtctl-reset-test] ____________________________________________

vm_for_test = <utilities.virt.VirtualMachineForTests object at 0x7fc581786a50>
namespace = <ocp_resources.namespace.Namespace object at 0x7fc581894e90>


TEST: test_reset_via_virtctl_command[vm-for-virtctl-reset-test] STATUS: FAILED
    @pytest.mark.polarion("CNV-12375")
    @pytest.mark.parametrize("vm_for_test", [pytest.param("vm-for-virtctl-reset-test")], indirect=True)
    def test_reset_via_virtctl_command(vm_for_test, namespace):
        """
        Test Scenario TS-02: Reset running VMI via virtctl command.
    
        Acceptance Criteria: AC-1, AC-4
        Tier: 1 (Functional)
    
        Validates that:
        - virtctl reset command is available
        - Command successfully triggers VMI reset
        - VM returns to running state
        """
        LOGGER.info(f"Resetting VMI {vm_for_test.name} via virtctl command")
    
        # Capture boot count before reset
        boot_count_before = get_vm_boot_count(vm=vm_for_test)
    
        # Execute virtctl reset command
>       success, output = run_virtctl_command(
        ^^^^^^^^^^^^^^^
            command=["reset", vm_for_test.name],
            namespace=namespace.name,
            check=True,
        )
E       ValueError: too many values to unpack (expected 2, got 3)

tests/virt/node/general/test_vmi_reset.py:135: ValueError
-------------------------------------------------------------- Captured stderr setup --------------------------------------------------------------
2026-01-26T12:43:25.984107 ocp_resources.resource INFO Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 7 times]

------------------------------ test_reset_via_virtctl_command[vm-for-virtctl-reset-test] ------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:43:25.983569 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:43:25.983663 conftest INFO Executing class fixture: term_handler_scope_class
2026-01-26T12:43:25.983800 conftest INFO Executing function fixture: autouse_fixtures
2026-01-26T12:43:25.983949 conftest INFO Executing class fixture: vm_for_test
2026-01-26T12:43:26.010390 timeout_sampler INFO Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpo5i5o_20-cnv-tests-pull-secret/pull-secrets.json'})
2026-01-26T12:43:26.010534 pyhelper_utils.shell INFO Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpo5i5o_20-cnv-tests-pull-secret/pull-secrets.json command
2026-01-26T12:43:28.079681 timeout_sampler INFO Elapsed time: 0.00010633468627929688 [0:00:00.000106]
2026-01-26T12:43:28.081880 ocp_resources.resource INFO kind: VirtualMachine api version: kubevirt.io/v1
2026-01-26T12:43:28.081985 utilities.virt WARNING `os_login_param` not defined for fedora
2026-01-26T12:43:28.085786 utilities.virt INFO Setting random username and password
2026-01-26T12:43:28.116961 ocp_resources VirtualMachine INFO Create VirtualMachine vm-for-virtctl-reset-test-1769427808-081773
2026-01-26T12:43:28.117056 ocp_resources VirtualMachine INFO Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-for-virtctl-reset-test'}, 'name': 'vm-for-virtctl-reset-test-1769427808-081773'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-for-virtctl-reset-test-1769427808-081773', 'kubevirt.io/domain': 'vm-for-virtctl-reset-test-1769427808-081773', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}
2026-01-26T12:43:28.201211 timeout_sampler INFO Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)
2026-01-26T12:43:28.215277 timeout_sampler INFO Elapsed time: 0.000194549560546875 [0:00:00.000195]
2026-01-26T12:43:28.215550 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
2026-01-26T12:43:28.215662 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 status to be Running
2026-01-26T12:43:28.215725 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)
2026-01-26T12:43:29.221579 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 is Scheduling
2026-01-26T12:43:34.267318 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 is Scheduled
2026-01-26T12:43:36.273259 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 is Running
2026-01-26T12:43:36.273381 timeout_sampler INFO Elapsed time: 8.05463719367981 [0:00:08.054637]
2026-01-26T12:43:36.273598 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance/vm-for-virtctl-reset-test-1769427808-081773's 'AgentConnected' condition to be 'True'
2026-01-26T12:43:36.273717 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 is created
2026-01-26T12:43:36.273768 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)
2026-01-26T12:43:36.273532 utilities.virt INFO Wait until guest agent is active on vm-for-virtctl-reset-test-1769427808-081773
2026-01-26T12:43:36.276261 timeout_sampler INFO Elapsed time: 4.506111145019531e-05 [0:00:00.000045]
2026-01-26T12:43:36.276386 timeout_sampler INFO Waiting for 719.9973428249359 seconds [0:11:59.997343], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)
2026-01-26T12:43:56.350342 timeout_sampler INFO Elapsed time: 20.070078372955322 [0:00:20.070078]
2026-01-26T12:43:56.350637 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)
2026-01-26T12:43:56.350531 utilities.virt INFO Wait for vm-for-virtctl-reset-test-1769427808-081773 network interfaces
2026-01-26T12:43:56.353603 timeout_sampler INFO Elapsed time: 0.0001518726348876953 [0:00:00.000152]
2026-01-26T12:43:56.353705 utilities.virt INFO Wait for vm-for-virtctl-reset-test-1769427808-081773 SSH connectivity.
2026-01-26T12:43:56.353774 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-for-virtctl-reset-test-1769427808-081773 -n node-general-test-vmi-reset 22' cLYhgriNNYWKhJg0@vm-for-virtctl-reset-test-1769427808-081773
2026-01-26T12:44:00.341593 timeout_sampler INFO Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})
2026-01-26T12:44:00.341707 Host INFO [vm-for-virtctl-reset-test-1769427808-081773] Executing command exit
2026-01-26T12:44:00.382143 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:44:00.397726 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:44:00.601864 timeout_sampler INFO Elapsed time: 0.0001373291015625 [0:00:00.000137]
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:44:00.602461 tests.virt.node.general.test_vmi_reset INFO Resetting VMI vm-for-virtctl-reset-test-1769427808-081773 via virtctl command
2026-01-26T12:44:00.602528 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-for-virtctl-reset-test-1769427808-081773 -n node-general-test-vmi-reset 22' cLYhgriNNYWKhJg0@vm-for-virtctl-reset-test-1769427808-081773
2026-01-26T12:44:04.643098 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:44:04.658776 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:44:08.591470 pyhelper_utils.shell INFO [SSH][vm-for-virtctl-reset-test-1769427808-081773] Executed: journalctl --list-boots | wc -l, rc:0, out: 2
, error: 
2026-01-26T12:44:08.591641 pyhelper_utils.shell INFO Running virtctl -n node-general-test-vmi-reset --kubeconfig /tmp/tmprs_c6213-cnv-tests-kubeconfig/kubeconfig reset vm-for-virtctl-reset-test-1769427808-081773 command
2026-01-26T12:44:08.701528 pyhelper_utils.shell ERROR Failed to run ['virtctl', '-n', 'node-general-test-vmi-reset', '--kubeconfig', '/tmp/tmprs_c6213-cnv-tests-kubeconfig/kubeconfig', 'reset', 'vm-for-virtctl-reset-test-1769427808-081773']. rc: 0, out: VMI vm-for-virtctl-reset-test-1769427808-081773 was scheduled to reset
, error: {"component":"portforward","level":"info","msg":"Reset VMI","pos":"virtualmachineinstance_expansion.go:181","timestamp":"2026-01-26T11:44:08.604128Z"}

__________________________________ 3 of 9 completed, 2 Pass, 1 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun ___________________________________

tests/virt/node/general/test_vmi_reset.py F

___________________________________________ TestVMIResetRBAC.test_unprivileged_user_reset_without_rbac ____________________________________________

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetRBAC object at 0x7fc582e35f90>
unprivileged_user_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fc581787b60>

    @pytest.mark.polarion("CNV-12376")
    def test_unprivileged_user_reset_without_rbac(self, unprivileged_user_vm_for_reset):
        """

TEST: TestVMIResetRBAC.test_unprivileged_user_reset_without_rbac STATUS: FAILED
        Test Scenario TS-04 (Negative): Verify RBAC enforcement for reset operation.
    
        Acceptance Criteria: AC-5
        Tier: 1 (Functional)
    
        Validates that:
        - Namespace admin without specific reset permissions cannot reset VMI
        - ForbiddenError is raised for unauthorized reset attempts
        """
        LOGGER.info("Attempting VMI reset without proper RBAC permissions (should fail)")
        with pytest.raises(ForbiddenError):
            unprivileged_user_vm_for_reset.vmi.reset()
>           pytest.fail(
                "Namespace admin should not be able to reset VMI without kubevirt.io:edit RoleBinding!"
            )
E           Failed: Namespace admin should not be able to reset VMI without kubevirt.io:edit RoleBinding!

tests/virt/node/general/test_vmi_reset.py:172: Failed
-------------------------------------------------------------- Captured stderr setup --------------------------------------------------------------
2026-01-26T12:44:35.010775 ocp_resources.resource INFO Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 2 times]

-------------------------------------- test_unprivileged_user_reset_without_rbac --------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:44:35.010199 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:44:35.010301 conftest INFO Executing class fixture: term_handler_scope_class
2026-01-26T12:44:35.010461 conftest INFO Executing function fixture: autouse_fixtures
2026-01-26T12:44:35.010627 conftest INFO Executing function fixture: unprivileged_user_vm_for_reset
2026-01-26T12:44:35.036515 timeout_sampler INFO Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp54xbe9mc-cnv-tests-pull-secret/pull-secrets.json'})
2026-01-26T12:44:35.036652 pyhelper_utils.shell INFO Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp54xbe9mc-cnv-tests-pull-secret/pull-secrets.json command
2026-01-26T12:44:37.240036 timeout_sampler INFO Elapsed time: 9.775161743164062e-05 [0:00:00.000098]
2026-01-26T12:44:37.242142 ocp_resources.resource INFO kind: VirtualMachine api version: kubevirt.io/v1
2026-01-26T12:44:37.242237 utilities.virt WARNING `os_login_param` not defined for fedora
2026-01-26T12:44:37.245401 utilities.virt INFO Setting random username and password
2026-01-26T12:44:37.276708 ocp_resources VirtualMachine INFO Create VirtualMachine namespace-admin-vm-reset-1769427877-2420356
2026-01-26T12:44:37.276801 ocp_resources VirtualMachine INFO Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'namespace-admin-vm-reset'}, 'name': 'namespace-admin-vm-reset-1769427877-2420356'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'namespace-admin-vm-reset-1769427877-2420356', 'kubevirt.io/domain': 'namespace-admin-vm-reset-1769427877-2420356', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}
2026-01-26T12:44:37.397144 timeout_sampler INFO Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)
2026-01-26T12:44:37.410904 timeout_sampler INFO Elapsed time: 0.0001323223114013672 [0:00:00.000132]
2026-01-26T12:44:37.411085 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
2026-01-26T12:44:37.411138 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 status to be Running
2026-01-26T12:44:37.411187 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)
2026-01-26T12:44:38.416525 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 is Scheduling
2026-01-26T12:44:43.445631 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 is Scheduled
2026-01-26T12:44:44.449148 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 is Running
2026-01-26T12:44:44.449276 timeout_sampler INFO Elapsed time: 7.034651279449463 [0:00:07.034651]
2026-01-26T12:44:44.449520 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance/namespace-admin-vm-reset-1769427877-2420356's 'AgentConnected' condition to be 'True'
2026-01-26T12:44:44.449709 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 is created
2026-01-26T12:44:44.449767 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)
2026-01-26T12:44:44.449446 utilities.virt INFO Wait until guest agent is active on namespace-admin-vm-reset-1769427877-2420356
2026-01-26T12:44:44.452495 timeout_sampler INFO Elapsed time: 5.030632019042969e-05 [0:00:00.000050]
2026-01-26T12:44:44.452583 timeout_sampler INFO Waiting for 719.9971361160278 seconds [0:11:59.997136], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)
2026-01-26T12:45:04.608493 timeout_sampler INFO Elapsed time: 20.152546167373657 [0:00:20.152546]
2026-01-26T12:45:04.608678 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)
2026-01-26T12:45:04.608601 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427877-2420356 network interfaces
2026-01-26T12:45:04.611274 timeout_sampler INFO Elapsed time: 0.0001087188720703125 [0:00:00.000109]
2026-01-26T12:45:04.611350 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427877-2420356 SSH connectivity.
2026-01-26T12:45:04.611428 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427877-2420356 -n node-general-test-vmi-reset 22' 0b5h45jJY6dTxkw8@namespace-admin-vm-reset-1769427877-2420356
2026-01-26T12:45:12.591516 timeout_sampler INFO Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})
2026-01-26T12:45:12.591624 Host INFO [namespace-admin-vm-reset-1769427877-2420356] Executing command exit
2026-01-26T12:45:12.634132 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:45:12.652732 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:45:12.861245 timeout_sampler INFO Elapsed time: 0.00012874603271484375 [0:00:00.000129]
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:45:12.862493 tests.virt.node.general.test_vmi_reset INFO Attempting VMI reset without proper RBAC permissions (should fail)
__________________________________ 4 of 9 completed, 2 Pass, 2 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun ___________________________________

tests/virt/node/general/test_vmi_reset.py F

_____________________________________________ TestVMIResetRBAC.test_unprivileged_user_reset_with_rbac _____________________________________________

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetRBAC object at 0x7fc582e36350>
unprivileged_user_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fc581785550>

    @pytest.mark.polarion("CNV-12377")
    @pytest.mark.usefixtures("unprivileged_user_reset_rolebinding")
    def test_unprivileged_user_reset_with_rbac(self, unprivileged_user_vm_for_reset):
        """
        Test Scenario TS-04 (Positive): Verify user with edit role can reset VMI.
    
        Acceptance Criteria: AC-5
        Tier: 1 (Functional)
    
        Validates that:
        - User with kubevirt.io:edit role can reset VMI
        - Reset succeeds when proper permissions are granted
        """
        LOGGER.info("Resetting VMI with proper RBAC permissions (should succeed)")

TEST: TestVMIResetRBAC.test_unprivileged_user_reset_with_rbac STATUS: FAILED
        boot_count_before = get_vm_boot_count(vm=unprivileged_user_vm_for_reset)
    
        unprivileged_user_vm_for_reset.vmi.reset()
>       wait_for_running_vm(vm=unprivileged_user_vm_for_reset)

tests/virt/node/general/test_vmi_reset.py:193: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
utilities/virt.py:1697: in wait_for_running_vm
    wait_for_ssh_connectivity(vm=vm, timeout=ssh_timeout)
utilities/virt.py:1539: in wait_for_ssh_connectivity
    for sample in TimeoutSampler(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <timeout_sampler.TimeoutSampler object at 0x7fc5800b7bb0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
                    raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
    
                time.sleep(self.sleep)
                elapsed_time = None
    
            finally:
                if self.print_log and elapsed_time:
                    LOGGER.info(_elapsed_time_log(elapsed_time=elapsed_time))
    
>       raise TimeoutExpiredError(self._get_exception_log(exp=last_exp), last_exp=last_exp)
E       timeout_sampler.TimeoutExpiredError: Timed Out: 120
E       Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60}
E       Last exception: ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe.

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:182: TimeoutExpiredError
-------------------------------------------------------------- Captured stderr setup --------------------------------------------------------------
2026-01-26T12:45:39.214952 ocp_resources.resource INFO kind: ClusterRole api version: rbac.authorization.k8s.io/v1 --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 3 times]

---------------------------------------- test_unprivileged_user_reset_with_rbac ----------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:45:39.214453 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:45:39.214615 conftest INFO Executing function fixture: autouse_fixtures
2026-01-26T12:45:39.214768 conftest INFO Executing session fixture: kubevirt_reset_cluster_role
2026-01-26T12:45:39.225053 ocp_resources.resource INFO kind: RoleBinding api version: rbac.authorization.k8s.io/v1
2026-01-26T12:45:39.225190 ocp_resources RoleBinding INFO Create RoleBinding role-bind-kubevirt-reset
2026-01-26T12:45:39.225237 ocp_resources RoleBinding INFO Posting {'apiVersion': 'rbac.authorization.k8s.io/v1', 'kind': 'RoleBinding', 'metadata': {'name': 'role-bind-kubevirt-reset', 'namespace': 'node-general-test-vmi-reset'}, 'subjects': [{'kind': 'User', 'name': 'unprivileged-user', 'namespace': 'node-general-test-vmi-reset'}], 'roleRef': {'kind': 'ClusterRole', 'name': 'kubevirt.io:edit', 'apiGroup': 'rbac.authorization.k8s.io'}}
2026-01-26T12:45:39.224797 conftest INFO Executing function fixture: unprivileged_user_reset_rolebinding
2026-01-26T12:45:39.246576 ocp_resources.resource INFO Trying to get client via new_client_from_config
2026-01-26T12:45:39.246363 conftest INFO Executing function fixture: unprivileged_user_vm_for_reset
2026-01-26T12:45:39.273799 timeout_sampler INFO Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpp6cj3dxi-cnv-tests-pull-secret/pull-secrets.json'})
2026-01-26T12:45:39.273948 pyhelper_utils.shell INFO Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpp6cj3dxi-cnv-tests-pull-secret/pull-secrets.json command
2026-01-26T12:45:41.498986 timeout_sampler INFO Elapsed time: 0.00010824203491210938 [0:00:00.000108]
2026-01-26T12:45:41.502141 ocp_resources.resource INFO kind: VirtualMachine api version: kubevirt.io/v1
2026-01-26T12:45:41.502264 utilities.virt WARNING `os_login_param` not defined for fedora
2026-01-26T12:45:41.511609 utilities.virt INFO Setting random username and password
2026-01-26T12:45:41.543322 ocp_resources VirtualMachine INFO Create VirtualMachine namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:45:41.543425 ocp_resources VirtualMachine INFO Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'namespace-admin-vm-reset'}, 'name': 'namespace-admin-vm-reset-1769427941-5019975'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'namespace-admin-vm-reset-1769427941-5019975', 'kubevirt.io/domain': 'namespace-admin-vm-reset-1769427941-5019975', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}
2026-01-26T12:45:41.657667 timeout_sampler INFO Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)
2026-01-26T12:45:41.671030 timeout_sampler INFO Elapsed time: 0.00015234947204589844 [0:00:00.000152]
2026-01-26T12:45:41.671222 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
2026-01-26T12:45:41.671282 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 status to be Running
2026-01-26T12:45:41.671335 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)
2026-01-26T12:45:42.679290 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is Scheduling
2026-01-26T12:45:47.695005 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is Scheduled
2026-01-26T12:45:48.698878 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is Running
2026-01-26T12:45:48.699040 timeout_sampler INFO Elapsed time: 7.0238120555877686 [0:00:07.023812]
2026-01-26T12:45:48.699338 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance/namespace-admin-vm-reset-1769427941-5019975's 'AgentConnected' condition to be 'True'
2026-01-26T12:45:48.699482 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is created
2026-01-26T12:45:48.699543 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)
2026-01-26T12:45:48.699239 utilities.virt INFO Wait until guest agent is active on namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:45:48.706087 timeout_sampler INFO Elapsed time: 6.461143493652344e-05 [0:00:00.000065]
2026-01-26T12:45:48.706231 timeout_sampler INFO Waiting for 719.9932732582092 seconds [0:11:59.993273], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)
2026-01-26T12:46:08.785908 timeout_sampler INFO Elapsed time: 20.076558113098145 [0:00:20.076558]
2026-01-26T12:46:08.786103 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)
2026-01-26T12:46:08.786027 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427941-5019975 network interfaces
2026-01-26T12:46:08.788458 timeout_sampler INFO Elapsed time: 5.1021575927734375e-05 [0:00:00.000051]
2026-01-26T12:46:08.788558 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427941-5019975 SSH connectivity.
2026-01-26T12:46:08.788609 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22' FFQnzjlMKSXA_Rsj@namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:46:20.591655 timeout_sampler INFO Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})
2026-01-26T12:46:20.591767 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:46:20.636474 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:46:20.653017 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:46:20.855825 timeout_sampler INFO Elapsed time: 0.00013303756713867188 [0:00:00.000133]
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:46:20.856345 tests.virt.node.general.test_vmi_reset INFO Resetting VMI with proper RBAC permissions (should succeed)
2026-01-26T12:46:20.856415 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22' FFQnzjlMKSXA_Rsj@namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:46:32.880603 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:46:32.896967 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:46:36.841414 pyhelper_utils.shell INFO [SSH][namespace-admin-vm-reset-1769427941-5019975] Executed: journalctl --list-boots | wc -l, rc:0, out: 2
, error: 
2026-01-26T12:46:36.952996 timeout_sampler INFO Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)
2026-01-26T12:46:36.972501 timeout_sampler INFO Elapsed time: 0.0001442432403564453 [0:00:00.000144]
2026-01-26T12:46:36.972707 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 status to be Running
2026-01-26T12:46:36.972792 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)
2026-01-26T12:46:36.975163 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is Running
2026-01-26T12:46:36.975237 timeout_sampler INFO Elapsed time: 6.461143493652344e-05 [0:00:00.000065]
2026-01-26T12:46:36.975434 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance/namespace-admin-vm-reset-1769427941-5019975's 'AgentConnected' condition to be 'True'
2026-01-26T12:46:36.975582 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is created
2026-01-26T12:46:36.975627 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)
2026-01-26T12:46:36.975352 utilities.virt INFO Wait until guest agent is active on namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:46:36.977818 timeout_sampler INFO Elapsed time: 4.00543212890625e-05 [0:00:00.000040]
2026-01-26T12:46:36.977896 timeout_sampler INFO Waiting for 719.9976933002472 seconds [0:11:59.997693], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)
2026-01-26T12:46:36.979852 timeout_sampler INFO Elapsed time: 4.2438507080078125e-05 [0:00:00.000042]
2026-01-26T12:46:36.979995 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)
2026-01-26T12:46:36.979931 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427941-5019975 network interfaces
2026-01-26T12:46:36.982104 timeout_sampler INFO Elapsed time: 9.918212890625e-05 [0:00:00.000099]
2026-01-26T12:46:36.982181 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427941-5019975 SSH connectivity.
2026-01-26T12:46:36.982232 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22' FFQnzjlMKSXA_Rsj@namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:46:48.841550 timeout_sampler INFO Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})
2026-01-26T12:46:48.841682 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:03.888435 paramiko.transport ERROR Exception (client): Error reading SSH protocol banner
2026-01-26T12:47:03.899320 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:03.899423 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner
2026-01-26T12:47:03.899472 paramiko.transport ERROR     buf = self.packetizer.readline(timeout)
2026-01-26T12:47:03.899514 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline
2026-01-26T12:47:03.899554 paramiko.transport ERROR     buf += self._read_timeout(timeout)
2026-01-26T12:47:03.899593 paramiko.transport ERROR            ~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:03.899631 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout
2026-01-26T12:47:03.899668 paramiko.transport ERROR     raise socket.timeout()
2026-01-26T12:47:03.899709 paramiko.transport ERROR TimeoutError
2026-01-26T12:47:03.899746 paramiko.transport ERROR 
2026-01-26T12:47:03.899783 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:03.899819 paramiko.transport ERROR 
2026-01-26T12:47:03.899858 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:03.899892 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run
2026-01-26T12:47:03.899922 paramiko.transport ERROR     self._check_banner()
2026-01-26T12:47:03.899950 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~^^
2026-01-26T12:47:03.899980 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner
2026-01-26T12:47:03.900010 paramiko.transport ERROR     raise SSHException(
2026-01-26T12:47:03.900039 paramiko.transport ERROR         "Error reading SSH protocol banner" + str(e)
2026-01-26T12:47:03.900067 paramiko.transport ERROR     )
2026-01-26T12:47:03.900095 paramiko.transport ERROR paramiko.ssh_exception.SSHException: Error reading SSH protocol banner
2026-01-26T12:47:03.900122 paramiko.transport ERROR 
2026-01-26T12:47:08.900693 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:08.937743 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:08.947684 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:08.947812 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:08.947870 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:08.947912 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:08.947951 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:08.947993 paramiko.transport ERROR 
2026-01-26T12:47:08.948033 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:08.948071 paramiko.transport ERROR 
2026-01-26T12:47:08.948124 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:08.948162 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:08.948198 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:08.948239 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:08.948276 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:08.948312 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:08.948350 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:08.948395 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:08.948431 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:08.948466 paramiko.transport ERROR 
2026-01-26T12:47:13.948805 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:13.980988 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:13.981627 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:13.981703 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:13.981740 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:13.981769 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:13.981799 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:13.981826 paramiko.transport ERROR 
2026-01-26T12:47:13.981853 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:13.981878 paramiko.transport ERROR 
2026-01-26T12:47:13.981903 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:13.981927 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:13.981951 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:13.981977 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:13.982001 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:13.982025 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:13.982048 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:13.982072 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:13.982096 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:13.982119 paramiko.transport ERROR 
2026-01-26T12:47:18.982313 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:19.015366 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:19.015940 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:19.016008 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:19.016042 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:19.016071 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:19.016098 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:19.016124 paramiko.transport ERROR 
2026-01-26T12:47:19.016150 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:19.016174 paramiko.transport ERROR 
2026-01-26T12:47:19.016199 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:19.016224 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:19.016248 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:19.016275 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:19.016299 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:19.016321 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:19.016344 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:19.016373 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:19.016397 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:19.016421 paramiko.transport ERROR 
2026-01-26T12:47:24.016890 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:24.047801 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:24.048520 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:24.048595 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:24.048631 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:24.048662 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:24.048689 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:24.048715 paramiko.transport ERROR 
2026-01-26T12:47:24.048743 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:24.048769 paramiko.transport ERROR 
2026-01-26T12:47:24.048795 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:24.048820 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:24.048845 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:24.048870 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:24.048895 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:24.048919 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:24.048943 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:24.048968 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:24.048992 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:24.049016 paramiko.transport ERROR 
2026-01-26T12:47:29.049227 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:29.081103 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:29.081662 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:29.081731 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:29.081765 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:29.081797 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:29.081824 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:29.081849 paramiko.transport ERROR 
2026-01-26T12:47:29.081876 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:29.081900 paramiko.transport ERROR 
2026-01-26T12:47:29.081924 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:29.081949 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:29.081973 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:29.081996 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:29.082020 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:29.082043 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:29.082067 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:29.082091 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:29.082116 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:29.082140 paramiko.transport ERROR 
2026-01-26T12:47:34.082546 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:34.122267 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:34.122905 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:34.122978 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:34.123014 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:34.123043 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:34.123070 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:34.123095 paramiko.transport ERROR 
2026-01-26T12:47:34.123122 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:34.123147 paramiko.transport ERROR 
2026-01-26T12:47:34.123171 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:34.123195 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:34.123220 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:34.123245 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:34.123269 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:34.123293 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:34.123317 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:34.123342 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:34.123371 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:34.123396 paramiko.transport ERROR 
2026-01-26T12:47:39.123744 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:39.155820 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:39.156489 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:39.156564 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:39.156599 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:39.156629 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:39.156656 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:39.156682 paramiko.transport ERROR 
2026-01-26T12:47:39.156708 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:39.156733 paramiko.transport ERROR 
2026-01-26T12:47:39.156758 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:39.156783 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:39.156808 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:39.156834 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:39.156857 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:39.156881 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:39.156905 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:39.156929 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:39.156953 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:39.156977 paramiko.transport ERROR 
2026-01-26T12:47:44.157219 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:44.188996 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:44.189647 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:44.189722 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:44.189761 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:44.189792 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:44.189819 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:44.189844 paramiko.transport ERROR 
2026-01-26T12:47:44.189871 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:44.189896 paramiko.transport ERROR 
2026-01-26T12:47:44.189922 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:44.189948 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:44.189972 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:44.189996 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:44.190019 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:44.190043 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:44.190066 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:44.190090 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:44.190114 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:44.190137 paramiko.transport ERROR 
2026-01-26T12:47:49.190507 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:49.221812 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:49.222466 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:49.222535 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:49.222570 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:49.222599 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:49.222626 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:49.222651 paramiko.transport ERROR 
2026-01-26T12:47:49.222677 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:49.222703 paramiko.transport ERROR 
2026-01-26T12:47:49.222728 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:49.222753 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:49.222777 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:49.222801 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:49.222826 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:49.222849 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:49.222872 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:49.222897 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:49.222922 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:49.222945 paramiko.transport ERROR 
2026-01-26T12:47:54.223140 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:54.255615 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:54.256289 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:54.256366 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:54.256402 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:54.256442 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:54.256468 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:54.256494 paramiko.transport ERROR 
2026-01-26T12:47:54.256521 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:54.256546 paramiko.transport ERROR 
2026-01-26T12:47:54.256572 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:54.256597 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:54.256621 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:54.256647 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:54.256672 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:54.256696 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:54.256722 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:54.256746 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:54.256771 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:54.256794 paramiko.transport ERROR 
2026-01-26T12:47:59.256997 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:48:14.291978 paramiko.transport ERROR Exception (client): Error reading SSH protocol banner
2026-01-26T12:48:14.292760 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:14.292841 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner
2026-01-26T12:48:14.292881 paramiko.transport ERROR     buf = self.packetizer.readline(timeout)
2026-01-26T12:48:14.292913 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline
2026-01-26T12:48:14.292941 paramiko.transport ERROR     buf += self._read_timeout(timeout)
2026-01-26T12:48:14.292967 paramiko.transport ERROR            ~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:48:14.292996 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout
2026-01-26T12:48:14.293022 paramiko.transport ERROR     raise socket.timeout()
2026-01-26T12:48:14.293049 paramiko.transport ERROR TimeoutError
2026-01-26T12:48:14.293076 paramiko.transport ERROR 
2026-01-26T12:48:14.293105 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:48:14.293144 paramiko.transport ERROR 
2026-01-26T12:48:14.293176 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:14.293207 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run
2026-01-26T12:48:14.293248 paramiko.transport ERROR     self._check_banner()
2026-01-26T12:48:14.293276 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~^^
2026-01-26T12:48:14.293317 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner
2026-01-26T12:48:14.293363 paramiko.transport ERROR     raise SSHException(
2026-01-26T12:48:14.293411 paramiko.transport ERROR         "Error reading SSH protocol banner" + str(e)
2026-01-26T12:48:14.293451 paramiko.transport ERROR     )
2026-01-26T12:48:14.293490 paramiko.transport ERROR paramiko.ssh_exception.SSHException: Error reading SSH protocol banner
2026-01-26T12:48:14.293529 paramiko.transport ERROR 
2026-01-26T12:48:19.294058 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:48:34.326078 paramiko.transport ERROR Exception (client): Error reading SSH protocol banner
2026-01-26T12:48:34.326935 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:34.327017 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner
2026-01-26T12:48:34.327057 paramiko.transport ERROR     buf = self.packetizer.readline(timeout)
2026-01-26T12:48:34.327090 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline
2026-01-26T12:48:34.327119 paramiko.transport ERROR     buf += self._read_timeout(timeout)
2026-01-26T12:48:34.327147 paramiko.transport ERROR            ~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:48:34.327175 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout
2026-01-26T12:48:34.327203 paramiko.transport ERROR     raise socket.timeout()
2026-01-26T12:48:34.327231 paramiko.transport ERROR TimeoutError
2026-01-26T12:48:34.327259 paramiko.transport ERROR 
2026-01-26T12:48:34.327288 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:48:34.327316 paramiko.transport ERROR 
2026-01-26T12:48:34.327344 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:34.327377 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run
2026-01-26T12:48:34.327405 paramiko.transport ERROR     self._check_banner()
2026-01-26T12:48:34.327432 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~^^
2026-01-26T12:48:34.327460 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner
2026-01-26T12:48:34.327489 paramiko.transport ERROR     raise SSHException(
2026-01-26T12:48:34.327516 paramiko.transport ERROR         "Error reading SSH protocol banner" + str(e)
2026-01-26T12:48:34.327544 paramiko.transport ERROR     )
2026-01-26T12:48:34.327574 paramiko.transport ERROR paramiko.ssh_exception.SSHException: Error reading SSH protocol banner
2026-01-26T12:48:34.327605 paramiko.transport ERROR 
2026-01-26T12:48:39.327993 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:48:39.360174 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:48:39.360841 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:39.360917 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:48:39.360955 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:48:39.360986 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:48:39.361014 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:48:39.361040 paramiko.transport ERROR 
2026-01-26T12:48:39.361069 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:48:39.361096 paramiko.transport ERROR 
2026-01-26T12:48:39.361124 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:39.361149 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:48:39.361173 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:48:39.361197 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:48:39.361220 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:48:39.361244 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:48:39.361268 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:48:39.361291 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:48:39.361315 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:48:39.361338 paramiko.transport ERROR 
2026-01-26T12:48:44.361710 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:48:44.393972 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:48:44.394640 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:44.394713 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:48:44.394750 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:48:44.394780 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:48:44.394807 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:48:44.394832 paramiko.transport ERROR 
2026-01-26T12:48:44.394859 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:48:44.394884 paramiko.transport ERROR 
2026-01-26T12:48:44.394909 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:44.394933 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:48:44.394956 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:48:44.394980 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:48:44.395005 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:48:44.395028 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:48:44.395051 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:48:44.395076 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:48:44.395100 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:48:44.395124 paramiko.transport ERROR 
2026-01-26T12:48:49.395458 pyhelper_utils.shell INFO Running virtctl -n node-general-test-vmi-reset --kubeconfig /tmp/tmprs_c6213-cnv-tests-kubeconfig/kubeconfig vnc screenshot namespace-admin-vm-reset-1769427941-5019975 -f /home/mvavrine/cnv/openshift-virtualization-tests/tests-collected-info/node-general-test-vmi-reset-namespace-admin-vm-reset-1769427941-5019975.png command
__________________________________ 5 of 9 completed, 2 Pass, 3 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun ___________________________________

tests/virt/node/general/test_vmi_reset.py F

_____________________________________________ TestVMIResetErrorHandling.test_reset_stopped_vmi_fails ______________________________________________

func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fc581c34a50>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XG.../v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/stopped-vm-for-reset-test-1769428138-8803847/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fc5727e9130>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <timeout_sampler.TimeoutSampler object at 0x7fc5727e9130>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)

TEST: TestVMIResetErrorHandling.test_reset_stopped_vmi_fails STATUS: FAILED
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/stopped-vm-for-reset-test-1769428138-8803847/reset', 'method': 'PUT', 'headers': {'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc', 'Content-Type': 'application/json'}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '53c339d6-3b5d-4b6b-a3bf-ea5cd719f5d6', 'Cache-Control': 'no-cache, private', 'Content-Length': '364', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:48:58 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"stopped-vm-for-reset-test-1769428138-8803847\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "stopped-vm-for-reset-test-1769428138-8803847",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.0039234161376953125 [0:00:00.003923]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetErrorHandling object at 0x7fc582e36490>
stopped_vm_for_test = <utilities.virt.VirtualMachineForTests object at 0x7fc58442d6a0>

    @pytest.mark.polarion("CNV-12378")
    def test_reset_stopped_vmi_fails(self, stopped_vm_for_test):
        """
        Test Scenario TS-05: Verify reset fails on non-running VMI with appropriate error.
    
        Acceptance Criteria: AC-6
        Tier: 1 (Functional)
    
        Validates that:
        - Reset operation fails gracefully on stopped VMIs
        - Appropriate error is returned
        """
        LOGGER.info("Attempting to reset a stopped VMI (should fail)")
    
        # Verify VM has no VMI running
        assert not stopped_vm_for_test.vmi.exists, "VM should not have a running VMI"
    
        # Attempt reset should raise an error
        with pytest.raises((NotFoundError, AttributeError)):
>           stopped_vm_for_test.vmi.reset()

tests/virt/node/general/test_vmi_reset.py:223: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <kubernetes.client.rest.RESTClientObject object at 0x7fc581c34c50>, method = 'PUT'
url = 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/stopped-vm-for-reset-test-1769428138-8803847/reset'
query_params = None, headers = {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc'}
body = None, post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '53c339d6-3b5d-4b6b-a3bf-ea5cd719f5d6', 'Cache-Control': 'no-cache, private', 'Content-Length': '364', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:48:58 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"stopped-vm-for-reset-test-1769428138-8803847\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "stopped-vm-for-reset-test-1769428138-8803847",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
-------------------------------------------------------------- Captured stderr setup --------------------------------------------------------------
2026-01-26T12:48:56.816000 ocp_resources.resource INFO Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 5 times]

--------------------------------------------- test_reset_stopped_vmi_fails ---------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:48:56.815471 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:48:56.815574 conftest INFO Executing class fixture: term_handler_scope_class
2026-01-26T12:48:56.815706 conftest INFO Executing function fixture: autouse_fixtures
2026-01-26T12:48:56.815854 conftest INFO Executing function fixture: stopped_vm_for_test
2026-01-26T12:48:56.870500 timeout_sampler INFO Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp10ci6owj-cnv-tests-pull-secret/pull-secrets.json'})
2026-01-26T12:48:56.870657 pyhelper_utils.shell INFO Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp10ci6owj-cnv-tests-pull-secret/pull-secrets.json command
2026-01-26T12:48:58.878344 timeout_sampler INFO Elapsed time: 0.00011801719665527344 [0:00:00.000118]
2026-01-26T12:48:58.880489 ocp_resources.resource INFO kind: VirtualMachine api version: kubevirt.io/v1
2026-01-26T12:48:58.880586 utilities.virt WARNING `os_login_param` not defined for fedora
2026-01-26T12:48:58.883566 utilities.virt INFO Setting random username and password
2026-01-26T12:48:58.914981 ocp_resources VirtualMachine INFO Create VirtualMachine stopped-vm-for-reset-test-1769428138-8803847
2026-01-26T12:48:58.915107 ocp_resources VirtualMachine INFO Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'stopped-vm-for-reset-test'}, 'name': 'stopped-vm-for-reset-test-1769428138-8803847'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'stopped-vm-for-reset-test-1769428138-8803847', 'kubevirt.io/domain': 'stopped-vm-for-reset-test-1769428138-8803847', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
2026-01-26T12:48:58.954657 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:48:58.954466 tests.virt.node.general.test_vmi_reset INFO Attempting to reset a stopped VMI (should fail)
__________________________________ 6 of 9 completed, 2 Pass, 4 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun ___________________________________

tests/virt/node/general/test_vmi_reset.py 
------------------------------------------ test_reset_non_existent_vmi_fails ------------------------------------------
F

___________________________________________ TestVMIResetErrorHandling.test_reset_non_existent_vmi_fails ___________________________________________

func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fc581c34a50>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XG...pis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/non-existent-vmi/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fc5727ea7b0>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,

TEST: TestVMIResetErrorHandling.test_reset_non_existent_vmi_fails STATUS: FAILED
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <timeout_sampler.TimeoutSampler object at 0x7fc5727ea7b0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/non-existent-vmi/reset', 'method': 'PUT', 'headers': {'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc', 'Content-Type': 'application/json'}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '969f033c-388c-4d87-984b-54beb139be3b', 'Cache-Control': 'no-cache, private', 'Content-Length': '308', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:49:00 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"non-existent-vmi\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "non-existent-vmi",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.0054018497467041016 [0:00:00.005402]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetErrorHandling object at 0x7fc582e365d0>
namespace = <ocp_resources.namespace.Namespace object at 0x7fc581894e90>
unprivileged_client = <kubernetes.dynamic.client.DynamicClient object at 0x7fc581c34d50>

    @pytest.mark.polarion("CNV-12379")
    def test_reset_non_existent_vmi_fails(self, namespace, unprivileged_client):
        """
        Test Scenario TS-06: Verify reset fails on non-existent VMI.
    
        Acceptance Criteria: AC-6
        Tier: 1 (Functional)
    
        Validates that:
        - Reset operation fails on non-existent VMI
        - NotFoundError is raised
        """
        LOGGER.info("Attempting to reset a non-existent VMI (should fail)")
    
        # Create VMI object reference to non-existent VMI
        non_existent_vmi = VirtualMachineInstance(
            name="non-existent-vmi",
            namespace=namespace.name,
            client=unprivileged_client,
        )
    
        # Attempt reset should raise NotFoundError
        with pytest.raises(NotFoundError):
>           non_existent_vmi.reset()

tests/virt/node/general/test_vmi_reset.py:248: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <kubernetes.client.rest.RESTClientObject object at 0x7fc581c34c50>, method = 'PUT'
url = 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/non-existent-vmi/reset'
query_params = None, headers = {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc'}
body = None, post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '969f033c-388c-4d87-984b-54beb139be3b', 'Cache-Control': 'no-cache, private', 'Content-Length': '308', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:49:00 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"non-existent-vmi\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "non-existent-vmi",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:49:00.108107 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:49:00.108300 conftest INFO Executing function fixture: autouse_fixtures
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:49:00.108860 tests.virt.node.general.test_vmi_reset INFO Attempting to reset a non-existent VMI (should fail)
func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fc581c34a50>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XG...pis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/non-existent-vmi/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fc5727ea7b0>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <timeout_sampler.TimeoutSampler object at 0x7fc5727ea7b0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/non-existent-vmi/reset', 'method': 'PUT', 'headers': {'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc', 'Content-Type': 'application/json'}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '969f033c-388c-4d87-984b-54beb139be3b', 'Cache-Control': 'no-cache, private', 'Content-Length': '308', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:49:00 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"non-existent-vmi\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "non-existent-vmi",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.0054018497467041016 [0:00:00.005402]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetErrorHandling object at 0x7fc582e365d0>
namespace = <ocp_resources.namespace.Namespace object at 0x7fc581894e90>
unprivileged_client = <kubernetes.dynamic.client.DynamicClient object at 0x7fc581c34d50>

    @pytest.mark.polarion("CNV-12379")
    def test_reset_non_existent_vmi_fails(self, namespace, unprivileged_client):
        """
        Test Scenario TS-06: Verify reset fails on non-existent VMI.
    
        Acceptance Criteria: AC-6
        Tier: 1 (Functional)
    
        Validates that:
        - Reset operation fails on non-existent VMI
        - NotFoundError is raised
        """
        LOGGER.info("Attempting to reset a non-existent VMI (should fail)")
    
        # Create VMI object reference to non-existent VMI
        non_existent_vmi = VirtualMachineInstance(
            name="non-existent-vmi",
            namespace=namespace.name,
            client=unprivileged_client,
        )
    
        # Attempt reset should raise NotFoundError
        with pytest.raises(NotFoundError):
>           non_existent_vmi.reset()

tests/virt/node/general/test_vmi_reset.py:248: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <kubernetes.client.rest.RESTClientObject object at 0x7fc581c34c50>, method = 'PUT'
url = 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/non-existent-vmi/reset'
query_params = None, headers = {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc'}
body = None, post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '969f033c-388c-4d87-984b-54beb139be3b', 'Cache-Control': 'no-cache, private', 'Content-Length': '308', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:49:00 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"non-existent-vmi\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "non-existent-vmi",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
__________________________________ 7 of 9 completed, 2 Pass, 5 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun ___________________________________

tests/virt/node/general/test_vmi_reset.py F

____________________________________________ TestVMIResetErrorHandling.test_reset_paused_vmi_behavior _____________________________________________

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetErrorHandling object at 0x7fc582dda520>
paused_vm_for_test = <utilities.virt.VirtualMachineForTests object at 0x7fc580110830>

TEST: TestVMIResetErrorHandling.test_reset_paused_vmi_behavior STATUS: FAILED

    @pytest.mark.polarion("CNV-12380")
    def test_reset_paused_vmi_behavior(self, paused_vm_for_test):
        """
        Test Scenario TS-12: Verify reset on paused VMI behavior.
    
        Acceptance Criteria: AC-6
        Tier: 1 (Functional)
    
        Validates that:
        - Reset operation behavior on paused VMI is documented
        - System handles paused state appropriately during reset
        """
        LOGGER.info("Testing reset behavior on paused VMI")
    
        # Verify VM is paused
        assert (
            paused_vm_for_test.printable_status == paused_vm_for_test.Status.PAUSED
        ), f"VM should be paused, but status is: {paused_vm_for_test.printable_status}"
    
        # Capture boot count before reset
>       boot_count_before = get_vm_boot_count(vm=paused_vm_for_test)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/virt/node/general/test_vmi_reset.py:270: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
tests/virt/node/general/test_vmi_reset.py:34: in get_vm_boot_count
    reboot_count = run_ssh_commands(
.venv/lib/python3.14/site-packages/pyhelper_utils/shell.py:118: in run_ssh_commands
    with host.executor().session(timeout=tcp_timeout) as ssh_session:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/rrmngmnt/executor.py:35: in __enter__
    self.open()
.venv/lib/python3.14/site-packages/rrmngmnt/ssh.py:94: in open
    self._ssh.connect(
.venv/lib/python3.14/site-packages/paramiko/client.py:455: in connect
    server_key = t.get_remote_server_key()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <paramiko.Transport at 0x82e1d550 (connecting)>

    def get_remote_server_key(self):
        """
        Return the host key of the server (in client mode).
    
        .. note::
            Previously this call returned a tuple of ``(key type, key
            string)``. You can get the same effect by calling `.PKey.get_name`
            for the key type, and ``str(key)`` for the key string.
    
        :raises: `.SSHException` -- if no session is currently active.
    
        :return: public key (`.PKey`) of the remote server
        """
        if (not self.active) or (not self.initial_kex_done):
>           raise SSHException("No existing session")
E           paramiko.ssh_exception.SSHException: No existing session

.venv/lib/python3.14/site-packages/paramiko/transport.py:947: SSHException
-------------------------------------------------------------- Captured stderr setup --------------------------------------------------------------
------------------------------------------------------- TEARDOWN -------------------------------------------------------
2026-01-26T12:49:00.171842 ocp_resources.resource INFO Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 2 times]

-------------------------------------------- test_reset_paused_vmi_behavior --------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:49:00.171343 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:49:00.171520 conftest INFO Executing function fixture: autouse_fixtures
2026-01-26T12:49:00.171685 conftest INFO Executing function fixture: paused_vm_for_test
2026-01-26T12:49:00.198453 timeout_sampler INFO Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp2x63cjcl-cnv-tests-pull-secret/pull-secrets.json'})
2026-01-26T12:49:00.198606 pyhelper_utils.shell INFO Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp2x63cjcl-cnv-tests-pull-secret/pull-secrets.json command
2026-01-26T12:49:02.118621 timeout_sampler INFO Elapsed time: 0.00011587142944335938 [0:00:00.000116]
2026-01-26T12:49:02.120747 ocp_resources.resource INFO kind: VirtualMachine api version: kubevirt.io/v1
2026-01-26T12:49:02.120842 utilities.virt WARNING `os_login_param` not defined for fedora
2026-01-26T12:49:02.123572 utilities.virt INFO Setting random username and password
2026-01-26T12:49:02.153701 ocp_resources VirtualMachine INFO Create VirtualMachine paused-vm-for-reset-test-1769428142-1206377
2026-01-26T12:49:02.153810 ocp_resources VirtualMachine INFO Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'paused-vm-for-reset-test'}, 'name': 'paused-vm-for-reset-test-1769428142-1206377'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'paused-vm-for-reset-test-1769428142-1206377', 'kubevirt.io/domain': 'paused-vm-for-reset-test-1769428142-1206377', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}
2026-01-26T12:49:02.343184 timeout_sampler INFO Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)
2026-01-26T12:49:02.347945 timeout_sampler INFO Elapsed time: 0.000194549560546875 [0:00:00.000195]
2026-01-26T12:49:02.348107 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
2026-01-26T12:49:02.348162 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 status to be Running
2026-01-26T12:49:02.348211 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)
2026-01-26T12:49:03.353631 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 is Scheduling
2026-01-26T12:49:08.369698 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 is Scheduled
2026-01-26T12:49:09.432255 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 is Running
2026-01-26T12:49:09.432462 timeout_sampler INFO Elapsed time: 7.021700143814087 [0:00:07.021700]
2026-01-26T12:49:09.432771 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance/paused-vm-for-reset-test-1769428142-1206377's 'AgentConnected' condition to be 'True'
2026-01-26T12:49:09.432998 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 is created
2026-01-26T12:49:09.433088 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)
2026-01-26T12:49:09.432677 utilities.virt INFO Wait until guest agent is active on paused-vm-for-reset-test-1769428142-1206377
2026-01-26T12:49:09.447736 timeout_sampler INFO Elapsed time: 8.869171142578125e-05 [0:00:00.000089]
2026-01-26T12:49:09.447932 timeout_sampler INFO Waiting for 719.9850871562958 seconds [0:11:59.985087], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)
2026-01-26T12:49:29.541371 timeout_sampler INFO Elapsed time: 20.090085983276367 [0:00:20.090086]
2026-01-26T12:49:29.541556 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)
2026-01-26T12:49:29.541489 utilities.virt INFO Wait for paused-vm-for-reset-test-1769428142-1206377 network interfaces
2026-01-26T12:49:29.543846 timeout_sampler INFO Elapsed time: 0.00013685226440429688 [0:00:00.000137]
2026-01-26T12:49:29.543913 utilities.virt INFO Wait for paused-vm-for-reset-test-1769428142-1206377 SSH connectivity.
2026-01-26T12:49:29.543963 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/paused-vm-for-reset-test-1769428142-1206377 -n node-general-test-vmi-reset 22' bK8JagvA6W4oqmBk@paused-vm-for-reset-test-1769428142-1206377
2026-01-26T12:49:45.091523 timeout_sampler INFO Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})
2026-01-26T12:49:45.091636 Host INFO [paused-vm-for-reset-test-1769428142-1206377] Executing command exit
2026-01-26T12:49:45.137015 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:49:45.154414 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:49:45.367830 timeout_sampler INFO Elapsed time: 0.00013399124145507812 [0:00:00.000134]
2026-01-26T12:49:45.368183 ocp_resources.resource INFO Trying to get client via new_client_from_config
2026-01-26T12:49:45.374469 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
2026-01-26T12:49:45.442045 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 is Paused
2026-01-26T12:49:45.442215 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.virtual_machine_instance.get_vmi_active_condition)
2026-01-26T12:49:46.458274 timeout_sampler INFO Elapsed time: 1.0132126808166504 [0:00:01.013213]
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:49:46.458770 tests.virt.node.general.test_vmi_reset INFO Testing reset behavior on paused VMI
2026-01-26T12:49:46.461106 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/paused-vm-for-reset-test-1769428142-1206377 -n node-general-test-vmi-reset 22' bK8JagvA6W4oqmBk@paused-vm-for-reset-test-1769428142-1206377
__________________________________ 8 of 9 completed, 2 Pass, 6 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun ___________________________________

tests/deprecated_api/test_deprecation_audit_logs.py .--------------------------------------------------------- CALL ---------------------------------------------------------

__________________________________ 9 of 9 completed, 3 Pass, 6 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun ___________________________________
                                                                                                                                            [100%]2026-01-26T12:53:41.290294 ocp_resources ConfigMap INFO Delete ConfigMap cnv-tests-run-in-progress
2026-01-26T12:53:41.295077 ocp_resources ConfigMap INFO Deleting {'kind': 'ConfigMap', 'apiVersion': 'v1', 'metadata': {'name': 'cnv-tests-run-in-progress', 'namespace': 'cnv-tests-run-in-progress-ns', 'uid': '21d36022-be63-4877-a2a4-ee1651e62fa5', 'resourceVersion': '266715', 'creationTimestamp': '2026-01-26T11:38:54Z', 'managedFields': [{'manager': 'OpenAPI-Generator', 'operation': 'Update', 'apiVersion': 'v1', 'time': '2026-01-26T11:38:54Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:data': {'.': {}, 'f:host': {}, 'f:pytest_cmd': {}, 'f:run-in-container': {}, 'f:running_from_dir': {}, 'f:session-id': {}, 'f:user': {}}}}]}, 'data': '*******'}
2026-01-26T12:53:41.306080 ocp_resources ConfigMap INFO Wait until ConfigMap cnv-tests-run-in-progress is deleted
2026-01-26T12:53:41.311024 ocp_resources Namespace INFO Delete Namespace cnv-tests-run-in-progress-ns
2026-01-26T12:53:41.313727 ocp_resources Namespace INFO Deleting {'kind': 'Namespace', 'apiVersion': 'v1', 'metadata': {'name': 'cnv-tests-run-in-progress-ns', 'uid': '99edbed7-e293-4c48-bfc3-e60f9ca54fe5', 'resourceVersion': '266716', 'creationTimestamp': '2026-01-26T11:38:54Z', 'labels': {'kubernetes.io/metadata.name': 'cnv-tests-run-in-progress-ns', 'pod-security.kubernetes.io/audit': 'restricted', 'pod-security.kubernetes.io/audit-version': 'latest', 'pod-security.kubernetes.io/enforce': 'privileged', 'pod-security.kubernetes.io/warn': 'restricted', 'pod-security.kubernetes.io/warn-version': 'latest', 'security.openshift.io/scc.podSecurityLabelSync': 'false'}, 'annotations': {'openshift.io/sa.scc.mcs': 's0:c26,c10', 'openshift.io/sa.scc.supplemental-groups': '1000670000/10000', 'openshift.io/sa.scc.uid-range': '1000670000/10000', 'security.openshift.io/MinimallySufficientPodSecurityStandard': 'restricted'}, 'managedFields': [{'manager': 'pod-security-admission-label-synchronization-controller', 'operation': 'Apply', 'apiVersion': 'v1', 'time': '2026-01-26T11:38:54Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:security.openshift.io/MinimallySufficientPodSecurityStandard': {}}, 'f:labels': {'f:pod-security.kubernetes.io/audit': {}, 'f:pod-security.kubernetes.io/audit-version': {}, 'f:pod-security.kubernetes.io/warn': {}, 'f:pod-security.kubernetes.io/warn-version': {}}}}}, {'manager': 'OpenAPI-Generator', 'operation': 'Update', 'apiVersion': 'v1', 'time': '2026-01-26T11:38:54Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:labels': {'.': {}, 'f:kubernetes.io/metadata.name': {}, 'f:pod-security.kubernetes.io/enforce': {}, 'f:security.openshift.io/scc.podSecurityLabelSync': {}}}}}, {'manager': 'cluster-policy-controller', 'operation': 'Update', 'apiVersion': 'v1', 'time': '2026-01-26T11:38:54Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:openshift.io/sa.scc.mcs': {}, 'f:openshift.io/sa.scc.supplemental-groups': {}, 'f:openshift.io/sa.scc.uid-range': {}}}}}]}, 'spec': {'finalizers': ['kubernetes']}, 'status': {'phase': 'Active'}}
2026-01-26T12:53:41.349459 ocp_resources Namespace INFO Wait until Namespace cnv-tests-run-in-progress-ns is deleted
============================================== 6 failed, 3 passed, 34 warnings in 892.78s (0:14:52) ===============================================

==================================================================== FAILURES =====================================================================
____________________________________________ test_reset_via_virtctl_command[vm-for-virtctl-reset-test] ____________________________________________

vm_for_test = <utilities.virt.VirtualMachineForTests object at 0x7fc581786a50>
namespace = <ocp_resources.namespace.Namespace object at 0x7fc581894e90>

    @pytest.mark.polarion("CNV-12375")
    @pytest.mark.parametrize("vm_for_test", [pytest.param("vm-for-virtctl-reset-test")], indirect=True)
    def test_reset_via_virtctl_command(vm_for_test, namespace):
        """
        Test Scenario TS-02: Reset running VMI via virtctl command.
    
        Acceptance Criteria: AC-1, AC-4
        Tier: 1 (Functional)
    
        Validates that:
        - virtctl reset command is available
        - Command successfully triggers VMI reset
        - VM returns to running state
        """
        LOGGER.info(f"Resetting VMI {vm_for_test.name} via virtctl command")
    
        # Capture boot count before reset
        boot_count_before = get_vm_boot_count(vm=vm_for_test)
    
        # Execute virtctl reset command
>       success, output = run_virtctl_command(
        ^^^^^^^^^^^^^^^
            command=["reset", vm_for_test.name],
            namespace=namespace.name,
            check=True,
        )
E       ValueError: too many values to unpack (expected 2, got 3)

tests/virt/node/general/test_vmi_reset.py:135: ValueError
-------------------------------------------------------------- Captured stderr setup --------------------------------------------------------------
2026-01-26T12:43:25.984107 ocp_resources.resource INFO Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 7 times]

------------------------------ test_reset_via_virtctl_command[vm-for-virtctl-reset-test] ------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:43:25.983569 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:43:25.983663 conftest INFO Executing class fixture: term_handler_scope_class
2026-01-26T12:43:25.983800 conftest INFO Executing function fixture: autouse_fixtures
2026-01-26T12:43:25.983949 conftest INFO Executing class fixture: vm_for_test
2026-01-26T12:43:26.010390 timeout_sampler INFO Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpo5i5o_20-cnv-tests-pull-secret/pull-secrets.json'})
2026-01-26T12:43:26.010534 pyhelper_utils.shell INFO Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpo5i5o_20-cnv-tests-pull-secret/pull-secrets.json command
2026-01-26T12:43:28.079681 timeout_sampler INFO Elapsed time: 0.00010633468627929688 [0:00:00.000106]
2026-01-26T12:43:28.081880 ocp_resources.resource INFO kind: VirtualMachine api version: kubevirt.io/v1
2026-01-26T12:43:28.081985 utilities.virt WARNING `os_login_param` not defined for fedora
2026-01-26T12:43:28.085786 utilities.virt INFO Setting random username and password
2026-01-26T12:43:28.116961 ocp_resources VirtualMachine INFO Create VirtualMachine vm-for-virtctl-reset-test-1769427808-081773
2026-01-26T12:43:28.117056 ocp_resources VirtualMachine INFO Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-for-virtctl-reset-test'}, 'name': 'vm-for-virtctl-reset-test-1769427808-081773'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-for-virtctl-reset-test-1769427808-081773', 'kubevirt.io/domain': 'vm-for-virtctl-reset-test-1769427808-081773', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}
2026-01-26T12:43:28.201211 timeout_sampler INFO Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)
2026-01-26T12:43:28.215277 timeout_sampler INFO Elapsed time: 0.000194549560546875 [0:00:00.000195]
2026-01-26T12:43:28.215550 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
2026-01-26T12:43:28.215662 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 status to be Running
2026-01-26T12:43:28.215725 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)
2026-01-26T12:43:29.221579 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 is Scheduling
2026-01-26T12:43:34.267318 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 is Scheduled
2026-01-26T12:43:36.273259 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 is Running
2026-01-26T12:43:36.273381 timeout_sampler INFO Elapsed time: 8.05463719367981 [0:00:08.054637]
2026-01-26T12:43:36.273598 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance/vm-for-virtctl-reset-test-1769427808-081773's 'AgentConnected' condition to be 'True'
2026-01-26T12:43:36.273717 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 is created
2026-01-26T12:43:36.273768 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)
2026-01-26T12:43:36.273532 utilities.virt INFO Wait until guest agent is active on vm-for-virtctl-reset-test-1769427808-081773
2026-01-26T12:43:36.276261 timeout_sampler INFO Elapsed time: 4.506111145019531e-05 [0:00:00.000045]
2026-01-26T12:43:36.276386 timeout_sampler INFO Waiting for 719.9973428249359 seconds [0:11:59.997343], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)
2026-01-26T12:43:56.350342 timeout_sampler INFO Elapsed time: 20.070078372955322 [0:00:20.070078]
2026-01-26T12:43:56.350637 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)
2026-01-26T12:43:56.350531 utilities.virt INFO Wait for vm-for-virtctl-reset-test-1769427808-081773 network interfaces
2026-01-26T12:43:56.353603 timeout_sampler INFO Elapsed time: 0.0001518726348876953 [0:00:00.000152]
2026-01-26T12:43:56.353705 utilities.virt INFO Wait for vm-for-virtctl-reset-test-1769427808-081773 SSH connectivity.
2026-01-26T12:43:56.353774 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-for-virtctl-reset-test-1769427808-081773 -n node-general-test-vmi-reset 22' cLYhgriNNYWKhJg0@vm-for-virtctl-reset-test-1769427808-081773
2026-01-26T12:44:00.341593 timeout_sampler INFO Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})
2026-01-26T12:44:00.341707 Host INFO [vm-for-virtctl-reset-test-1769427808-081773] Executing command exit
2026-01-26T12:44:00.382143 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:44:00.397726 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:44:00.601864 timeout_sampler INFO Elapsed time: 0.0001373291015625 [0:00:00.000137]
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:44:00.602461 tests.virt.node.general.test_vmi_reset INFO Resetting VMI vm-for-virtctl-reset-test-1769427808-081773 via virtctl command
2026-01-26T12:44:00.602528 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-for-virtctl-reset-test-1769427808-081773 -n node-general-test-vmi-reset 22' cLYhgriNNYWKhJg0@vm-for-virtctl-reset-test-1769427808-081773
2026-01-26T12:44:04.643098 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:44:04.658776 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:44:08.591470 pyhelper_utils.shell INFO [SSH][vm-for-virtctl-reset-test-1769427808-081773] Executed: journalctl --list-boots | wc -l, rc:0, out: 2
, error: 
2026-01-26T12:44:08.591641 pyhelper_utils.shell INFO Running virtctl -n node-general-test-vmi-reset --kubeconfig /tmp/tmprs_c6213-cnv-tests-kubeconfig/kubeconfig reset vm-for-virtctl-reset-test-1769427808-081773 command
2026-01-26T12:44:08.701528 pyhelper_utils.shell ERROR Failed to run ['virtctl', '-n', 'node-general-test-vmi-reset', '--kubeconfig', '/tmp/tmprs_c6213-cnv-tests-kubeconfig/kubeconfig', 'reset', 'vm-for-virtctl-reset-test-1769427808-081773']. rc: 0, out: VMI vm-for-virtctl-reset-test-1769427808-081773 was scheduled to reset
, error: {"component":"portforward","level":"info","msg":"Reset VMI","pos":"virtualmachineinstance_expansion.go:181","timestamp":"2026-01-26T11:44:08.604128Z"}

------------------------------------------------------------ Captured stderr teardown -------------------------------------------------------------
vm_for_test = <utilities.virt.VirtualMachineForTests object at 0x7fc581786a50>
namespace = <ocp_resources.namespace.Namespace object at 0x7fc581894e90>

    @pytest.mark.polarion("CNV-12375")
    @pytest.mark.parametrize("vm_for_test", [pytest.param("vm-for-virtctl-reset-test")], indirect=True)
    def test_reset_via_virtctl_command(vm_for_test, namespace):
        """
        Test Scenario TS-02: Reset running VMI via virtctl command.
    
        Acceptance Criteria: AC-1, AC-4
        Tier: 1 (Functional)
    
        Validates that:
        - virtctl reset command is available
        - Command successfully triggers VMI reset
        - VM returns to running state
        """
        LOGGER.info(f"Resetting VMI {vm_for_test.name} via virtctl command")
    
        # Capture boot count before reset
        boot_count_before = get_vm_boot_count(vm=vm_for_test)
    
        # Execute virtctl reset command
>       success, output = run_virtctl_command(
        ^^^^^^^^^^^^^^^
            command=["reset", vm_for_test.name],
            namespace=namespace.name,
            check=True,
        )
E       ValueError: too many values to unpack (expected 2, got 3)

tests/virt/node/general/test_vmi_reset.py:135: ValueError
------------------------------------------------------- TEARDOWN -------------------------------------------------------
2026-01-26T12:44:08.827412 ocp_resources VirtualMachine INFO Wait for VirtualMachine vm-for-virtctl-reset-test-1769427808-081773 status to be None
2026-01-26T12:44:08.827578 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: kubernetes.dynamic.client.get  Kwargs: {'field_selector': 'metadata.name==vm-for-virtctl-reset-test-1769427808-081773', 'namespace': 'node-general-test-vmi-reset'})
2026-01-26T12:44:09.840755 timeout_sampler INFO Elapsed time: 1.005568504333496 [0:00:01.005569]
2026-01-26T12:44:09.841103 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance vm-for-virtctl-reset-test-1769427808-081773 is deleted
2026-01-26T12:44:09.841202 timeout_sampler INFO Waiting for 480 seconds [0:08:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:44:33.961675 timeout_sampler INFO Elapsed time: 24.117522716522217 [0:00:24.117523]
2026-01-26T12:44:33.961782 ocp_resources VirtualMachine INFO Delete VirtualMachine vm-for-virtctl-reset-test-1769427808-081773
2026-01-26T12:44:33.968125 ocp_resources VirtualMachine INFO Deleting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'annotations': {'kubemacpool.io/transaction-timestamp': '2026-01-26T11:44:08.799292984Z', 'kubevirt.io/latest-observed-api-version': 'v1', 'kubevirt.io/storage-observed-api-version': 'v1'}, 'creationTimestamp': '2026-01-26T11:43:28Z', 'finalizers': ['kubevirt.io/virtualMachineControllerFinalize'], 'generation': 3, 'labels': {'kubevirt.io/vm': 'vm-for-virtctl-reset-test'}, 'managedFields': [{'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:labels': {'.': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:template': {'.': {}, 'f:metadata': {'.': {}, 'f:creationTimestamp': {}, 'f:labels': {'.': {}, 'f:debugLogs': {}, 'f:kubevirt.io/domain': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:domain': {'.': {}, 'f:cpu': {'.': {}, 'f:cores': {}}, 'f:devices': {'.': {}, 'f:disks': {}, 'f:interfaces': {}, 'f:rng': {}}, 'f:machine': {'.': {}, 'f:type': {}}, 'f:memory': {'.': {}, 'f:guest': {}}}, 'f:networks': {}, 'f:terminationGracePeriodSeconds': {}, 'f:volumes': {}}}}}, 'manager': 'OpenAPI-Generator', 'operation': 'Update', 'time': '2026-01-26T11:43:28Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:kubevirt.io/latest-observed-api-version': {}, 'f:kubevirt.io/storage-observed-api-version': {}}, 'f:finalizers': {'.': {}, 'v:"kubevirt.io/virtualMachineControllerFinalize"': {}}}}, 'manager': 'virt-controller', 'operation': 'Update', 'time': '2026-01-26T11:43:28Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:spec': {'f:runStrategy': {}}}, 'manager': 'virt-api', 'operation': 'Update', 'time': '2026-01-26T11:44:08Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:conditions': {}, 'f:desiredGeneration': {}, 'f:observedGeneration': {}, 'f:printableStatus': {}, 'f:runStrategy': {}, 'f:volumeSnapshotStatuses': {}}}, 'manager': 'virt-controller', 'operation': 'Update', 'subresource': 'status', 'time': '2026-01-26T11:44:33Z'}], 'name': 'vm-for-virtctl-reset-test-1769427808-081773', 'namespace': 'node-general-test-vmi-reset', 'resourceVersion': '269414', 'uid': '2e0add1e-c8c3-4c27-a26c-c2ff23186daa'}, 'spec': {'runStrategy': 'Halted', 'template': {'metadata': {'creationTimestamp': None, 'labels': {'debugLogs': 'true', 'kubevirt.io/domain': 'vm-for-virtctl-reset-test-1769427808-081773', 'kubevirt.io/vm': 'vm-for-virtctl-reset-test-1769427808-081773'}}, 'spec': {'architecture': 'amd64', 'domain': {'cpu': {'cores': 1}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'macAddress': '02:2c:fa:00:00:02', 'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'firmware': {'serial': '8cc255f4-4db8-4bf5-b62f-67782623dc1d'}, 'machine': {'type': 'pc-q35-rhel9.6.0'}, 'memory': {'guest': '1Gi'}, 'resources': {}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'cloudInitNoCloud': {'userData': '*******'}, 'name': 'cloudinitdisk'}]}}}, 'status': {'conditions': [{'lastProbeTime': '2026-01-26T11:44:33Z', 'lastTransitionTime': '2026-01-26T11:44:33Z', 'message': 'VMI does not exist', 'reason': 'VMINotExists', 'status': 'False', 'type': 'Ready'}, {'lastProbeTime': None, 'lastTransitionTime': None, 'status': 'True', 'type': 'LiveMigratable'}, {'lastProbeTime': None, 'lastTransitionTime': None, 'status': 'True', 'type': 'StorageLiveMigratable'}], 'desiredGeneration': 3, 'observedGeneration': 3, 'printableStatus': 'Stopped', 'runStrategy': 'Halted', 'volumeSnapshotStatuses': [{'enabled': False, 'name': 'containerdisk', 'reason': 'Snapshot is not supported for this volumeSource type [containerdisk]'}, {'enabled': False, 'name': 'cloudinitdisk', 'reason': 'Snapshot is not supported for this volumeSource type [cloudinitdisk]'}]}}
2026-01-26T12:44:34.002659 ocp_resources VirtualMachine INFO Wait until VirtualMachine vm-for-virtctl-reset-test-1769427808-081773 is deleted
2026-01-26T12:44:34.002779 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:44:35.009174 timeout_sampler INFO Elapsed time: 1.00333833694458 [0:00:01.003338]
___________________________________________ TestVMIResetRBAC.test_unprivileged_user_reset_without_rbac ____________________________________________

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetRBAC object at 0x7fc582e35f90>
unprivileged_user_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fc581787b60>

    @pytest.mark.polarion("CNV-12376")
    def test_unprivileged_user_reset_without_rbac(self, unprivileged_user_vm_for_reset):
        """
        Test Scenario TS-04 (Negative): Verify RBAC enforcement for reset operation.
    
        Acceptance Criteria: AC-5
        Tier: 1 (Functional)
    
        Validates that:
        - Namespace admin without specific reset permissions cannot reset VMI
        - ForbiddenError is raised for unauthorized reset attempts
        """
        LOGGER.info("Attempting VMI reset without proper RBAC permissions (should fail)")
        with pytest.raises(ForbiddenError):
            unprivileged_user_vm_for_reset.vmi.reset()
>           pytest.fail(
                "Namespace admin should not be able to reset VMI without kubevirt.io:edit RoleBinding!"
            )
E           Failed: Namespace admin should not be able to reset VMI without kubevirt.io:edit RoleBinding!

tests/virt/node/general/test_vmi_reset.py:172: Failed
-------------------------------------------------------------- Captured stderr setup --------------------------------------------------------------
2026-01-26T12:44:35.010775 ocp_resources.resource INFO Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 2 times]

-------------------------------------- test_unprivileged_user_reset_without_rbac --------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:44:35.010199 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:44:35.010301 conftest INFO Executing class fixture: term_handler_scope_class
2026-01-26T12:44:35.010461 conftest INFO Executing function fixture: autouse_fixtures
2026-01-26T12:44:35.010627 conftest INFO Executing function fixture: unprivileged_user_vm_for_reset
2026-01-26T12:44:35.036515 timeout_sampler INFO Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp54xbe9mc-cnv-tests-pull-secret/pull-secrets.json'})
2026-01-26T12:44:35.036652 pyhelper_utils.shell INFO Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp54xbe9mc-cnv-tests-pull-secret/pull-secrets.json command
2026-01-26T12:44:37.240036 timeout_sampler INFO Elapsed time: 9.775161743164062e-05 [0:00:00.000098]
2026-01-26T12:44:37.242142 ocp_resources.resource INFO kind: VirtualMachine api version: kubevirt.io/v1
2026-01-26T12:44:37.242237 utilities.virt WARNING `os_login_param` not defined for fedora
2026-01-26T12:44:37.245401 utilities.virt INFO Setting random username and password
2026-01-26T12:44:37.276708 ocp_resources VirtualMachine INFO Create VirtualMachine namespace-admin-vm-reset-1769427877-2420356
2026-01-26T12:44:37.276801 ocp_resources VirtualMachine INFO Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'namespace-admin-vm-reset'}, 'name': 'namespace-admin-vm-reset-1769427877-2420356'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'namespace-admin-vm-reset-1769427877-2420356', 'kubevirt.io/domain': 'namespace-admin-vm-reset-1769427877-2420356', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}
2026-01-26T12:44:37.397144 timeout_sampler INFO Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)
2026-01-26T12:44:37.410904 timeout_sampler INFO Elapsed time: 0.0001323223114013672 [0:00:00.000132]
2026-01-26T12:44:37.411085 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
2026-01-26T12:44:37.411138 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 status to be Running
2026-01-26T12:44:37.411187 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)
2026-01-26T12:44:38.416525 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 is Scheduling
2026-01-26T12:44:43.445631 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 is Scheduled
2026-01-26T12:44:44.449148 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 is Running
2026-01-26T12:44:44.449276 timeout_sampler INFO Elapsed time: 7.034651279449463 [0:00:07.034651]
2026-01-26T12:44:44.449520 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance/namespace-admin-vm-reset-1769427877-2420356's 'AgentConnected' condition to be 'True'
2026-01-26T12:44:44.449709 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 is created
2026-01-26T12:44:44.449767 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)
2026-01-26T12:44:44.449446 utilities.virt INFO Wait until guest agent is active on namespace-admin-vm-reset-1769427877-2420356
2026-01-26T12:44:44.452495 timeout_sampler INFO Elapsed time: 5.030632019042969e-05 [0:00:00.000050]
2026-01-26T12:44:44.452583 timeout_sampler INFO Waiting for 719.9971361160278 seconds [0:11:59.997136], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)
2026-01-26T12:45:04.608493 timeout_sampler INFO Elapsed time: 20.152546167373657 [0:00:20.152546]
2026-01-26T12:45:04.608678 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)
2026-01-26T12:45:04.608601 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427877-2420356 network interfaces
2026-01-26T12:45:04.611274 timeout_sampler INFO Elapsed time: 0.0001087188720703125 [0:00:00.000109]
2026-01-26T12:45:04.611350 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427877-2420356 SSH connectivity.
2026-01-26T12:45:04.611428 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427877-2420356 -n node-general-test-vmi-reset 22' 0b5h45jJY6dTxkw8@namespace-admin-vm-reset-1769427877-2420356
2026-01-26T12:45:12.591516 timeout_sampler INFO Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})
2026-01-26T12:45:12.591624 Host INFO [namespace-admin-vm-reset-1769427877-2420356] Executing command exit
2026-01-26T12:45:12.634132 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:45:12.652732 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:45:12.861245 timeout_sampler INFO Elapsed time: 0.00012874603271484375 [0:00:00.000129]
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:45:12.862493 tests.virt.node.general.test_vmi_reset INFO Attempting VMI reset without proper RBAC permissions (should fail)
------------------------------------------------------------ Captured stderr teardown -------------------------------------------------------------
self = <tests.virt.node.general.test_vmi_reset.TestVMIResetRBAC object at 0x7fc582e35f90>
unprivileged_user_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fc581787b60>

    @pytest.mark.polarion("CNV-12376")
    def test_unprivileged_user_reset_without_rbac(self, unprivileged_user_vm_for_reset):
        """
        Test Scenario TS-04 (Negative): Verify RBAC enforcement for reset operation.
    
        Acceptance Criteria: AC-5
        Tier: 1 (Functional)
    
        Validates that:
        - Namespace admin without specific reset permissions cannot reset VMI
        - ForbiddenError is raised for unauthorized reset attempts
        """
        LOGGER.info("Attempting VMI reset without proper RBAC permissions (should fail)")
        with pytest.raises(ForbiddenError):
            unprivileged_user_vm_for_reset.vmi.reset()
>           pytest.fail(
                "Namespace admin should not be able to reset VMI without kubevirt.io:edit RoleBinding!"
            )
E           Failed: Namespace admin should not be able to reset VMI without kubevirt.io:edit RoleBinding!

tests/virt/node/general/test_vmi_reset.py:172: Failed
------------------------------------------------------- TEARDOWN -------------------------------------------------------
2026-01-26T12:45:13.020665 ocp_resources VirtualMachine INFO Wait for VirtualMachine namespace-admin-vm-reset-1769427877-2420356 status to be None
2026-01-26T12:45:13.020877 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: kubernetes.dynamic.client.get  Kwargs: {'field_selector': 'metadata.name==namespace-admin-vm-reset-1769427877-2420356', 'namespace': 'node-general-test-vmi-reset'})
2026-01-26T12:45:14.044205 timeout_sampler INFO Elapsed time: 1.0171334743499756 [0:00:01.017133]
2026-01-26T12:45:14.044484 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance namespace-admin-vm-reset-1769427877-2420356 is deleted
2026-01-26T12:45:14.044553 timeout_sampler INFO Waiting for 480 seconds [0:08:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:45:38.168053 timeout_sampler INFO Elapsed time: 24.107059955596924 [0:00:24.107060]
2026-01-26T12:45:38.168161 ocp_resources VirtualMachine INFO Delete VirtualMachine namespace-admin-vm-reset-1769427877-2420356
2026-01-26T12:45:38.173881 ocp_resources VirtualMachine INFO Deleting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'annotations': {'kubemacpool.io/transaction-timestamp': '2026-01-26T11:45:12.997828615Z', 'kubevirt.io/latest-observed-api-version': 'v1', 'kubevirt.io/storage-observed-api-version': 'v1'}, 'creationTimestamp': '2026-01-26T11:44:37Z', 'finalizers': ['kubevirt.io/virtualMachineControllerFinalize'], 'generation': 3, 'labels': {'kubevirt.io/vm': 'namespace-admin-vm-reset'}, 'managedFields': [{'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:labels': {'.': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:template': {'.': {}, 'f:metadata': {'.': {}, 'f:creationTimestamp': {}, 'f:labels': {'.': {}, 'f:debugLogs': {}, 'f:kubevirt.io/domain': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:domain': {'.': {}, 'f:cpu': {'.': {}, 'f:cores': {}}, 'f:devices': {'.': {}, 'f:disks': {}, 'f:interfaces': {}, 'f:rng': {}}, 'f:machine': {'.': {}, 'f:type': {}}, 'f:memory': {'.': {}, 'f:guest': {}}}, 'f:networks': {}, 'f:terminationGracePeriodSeconds': {}, 'f:volumes': {}}}}}, 'manager': 'OpenAPI-Generator', 'operation': 'Update', 'time': '2026-01-26T11:44:37Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:kubevirt.io/latest-observed-api-version': {}, 'f:kubevirt.io/storage-observed-api-version': {}}, 'f:finalizers': {'.': {}, 'v:"kubevirt.io/virtualMachineControllerFinalize"': {}}}}, 'manager': 'virt-controller', 'operation': 'Update', 'time': '2026-01-26T11:44:37Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:spec': {'f:runStrategy': {}}}, 'manager': 'virt-api', 'operation': 'Update', 'time': '2026-01-26T11:45:12Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:conditions': {}, 'f:desiredGeneration': {}, 'f:observedGeneration': {}, 'f:printableStatus': {}, 'f:runStrategy': {}, 'f:volumeSnapshotStatuses': {}}}, 'manager': 'virt-controller', 'operation': 'Update', 'subresource': 'status', 'time': '2026-01-26T11:45:38Z'}], 'name': 'namespace-admin-vm-reset-1769427877-2420356', 'namespace': 'node-general-test-vmi-reset', 'resourceVersion': '269962', 'uid': '98403a67-ea39-4fe8-97e9-566a473c4189'}, 'spec': {'runStrategy': 'Halted', 'template': {'metadata': {'creationTimestamp': None, 'labels': {'debugLogs': 'true', 'kubevirt.io/domain': 'namespace-admin-vm-reset-1769427877-2420356', 'kubevirt.io/vm': 'namespace-admin-vm-reset-1769427877-2420356'}}, 'spec': {'architecture': 'amd64', 'domain': {'cpu': {'cores': 1}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'macAddress': '02:2c:fa:00:00:03', 'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'firmware': {'serial': '39e22c47-c1bf-4b68-860d-aa5c815efc9d'}, 'machine': {'type': 'pc-q35-rhel9.6.0'}, 'memory': {'guest': '1Gi'}, 'resources': {}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'cloudInitNoCloud': {'userData': '*******'}, 'name': 'cloudinitdisk'}]}}}, 'status': {'conditions': [{'lastProbeTime': '2026-01-26T11:45:38Z', 'lastTransitionTime': '2026-01-26T11:45:38Z', 'message': 'VMI does not exist', 'reason': 'VMINotExists', 'status': 'False', 'type': 'Ready'}, {'lastProbeTime': None, 'lastTransitionTime': None, 'status': 'True', 'type': 'LiveMigratable'}, {'lastProbeTime': None, 'lastTransitionTime': None, 'status': 'True', 'type': 'StorageLiveMigratable'}], 'desiredGeneration': 3, 'observedGeneration': 3, 'printableStatus': 'Stopped', 'runStrategy': 'Halted', 'volumeSnapshotStatuses': [{'enabled': False, 'name': 'containerdisk', 'reason': 'Snapshot is not supported for this volumeSource type [containerdisk]'}, {'enabled': False, 'name': 'cloudinitdisk', 'reason': 'Snapshot is not supported for this volumeSource type [cloudinitdisk]'}]}}
2026-01-26T12:45:38.207559 ocp_resources VirtualMachine INFO Wait until VirtualMachine namespace-admin-vm-reset-1769427877-2420356 is deleted
2026-01-26T12:45:38.207709 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:45:39.213502 timeout_sampler INFO Elapsed time: 1.0023000240325928 [0:00:01.002300]
_____________________________________________ TestVMIResetRBAC.test_unprivileged_user_reset_with_rbac _____________________________________________

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetRBAC object at 0x7fc582e36350>
unprivileged_user_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fc581785550>

    @pytest.mark.polarion("CNV-12377")
    @pytest.mark.usefixtures("unprivileged_user_reset_rolebinding")
    def test_unprivileged_user_reset_with_rbac(self, unprivileged_user_vm_for_reset):
        """
        Test Scenario TS-04 (Positive): Verify user with edit role can reset VMI.
    
        Acceptance Criteria: AC-5
        Tier: 1 (Functional)
    
        Validates that:
        - User with kubevirt.io:edit role can reset VMI
        - Reset succeeds when proper permissions are granted
        """
        LOGGER.info("Resetting VMI with proper RBAC permissions (should succeed)")
        boot_count_before = get_vm_boot_count(vm=unprivileged_user_vm_for_reset)
    
        unprivileged_user_vm_for_reset.vmi.reset()
>       wait_for_running_vm(vm=unprivileged_user_vm_for_reset)

tests/virt/node/general/test_vmi_reset.py:193: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
utilities/virt.py:1697: in wait_for_running_vm
    wait_for_ssh_connectivity(vm=vm, timeout=ssh_timeout)
utilities/virt.py:1539: in wait_for_ssh_connectivity
    for sample in TimeoutSampler(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <timeout_sampler.TimeoutSampler object at 0x7fc5800b7bb0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
                    raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
    
                time.sleep(self.sleep)
                elapsed_time = None
    
            finally:
                if self.print_log and elapsed_time:
                    LOGGER.info(_elapsed_time_log(elapsed_time=elapsed_time))
    
>       raise TimeoutExpiredError(self._get_exception_log(exp=last_exp), last_exp=last_exp)
E       timeout_sampler.TimeoutExpiredError: Timed Out: 120
E       Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60}
E       Last exception: ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe.

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:182: TimeoutExpiredError
-------------------------------------------------------------- Captured stderr setup --------------------------------------------------------------
2026-01-26T12:45:39.214952 ocp_resources.resource INFO kind: ClusterRole api version: rbac.authorization.k8s.io/v1 --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 3 times]

---------------------------------------- test_unprivileged_user_reset_with_rbac ----------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:45:39.214453 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:45:39.214615 conftest INFO Executing function fixture: autouse_fixtures
2026-01-26T12:45:39.214768 conftest INFO Executing session fixture: kubevirt_reset_cluster_role
2026-01-26T12:45:39.225053 ocp_resources.resource INFO kind: RoleBinding api version: rbac.authorization.k8s.io/v1
2026-01-26T12:45:39.225190 ocp_resources RoleBinding INFO Create RoleBinding role-bind-kubevirt-reset
2026-01-26T12:45:39.225237 ocp_resources RoleBinding INFO Posting {'apiVersion': 'rbac.authorization.k8s.io/v1', 'kind': 'RoleBinding', 'metadata': {'name': 'role-bind-kubevirt-reset', 'namespace': 'node-general-test-vmi-reset'}, 'subjects': [{'kind': 'User', 'name': 'unprivileged-user', 'namespace': 'node-general-test-vmi-reset'}], 'roleRef': {'kind': 'ClusterRole', 'name': 'kubevirt.io:edit', 'apiGroup': 'rbac.authorization.k8s.io'}}
2026-01-26T12:45:39.224797 conftest INFO Executing function fixture: unprivileged_user_reset_rolebinding
2026-01-26T12:45:39.246576 ocp_resources.resource INFO Trying to get client via new_client_from_config
2026-01-26T12:45:39.246363 conftest INFO Executing function fixture: unprivileged_user_vm_for_reset
2026-01-26T12:45:39.273799 timeout_sampler INFO Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpp6cj3dxi-cnv-tests-pull-secret/pull-secrets.json'})
2026-01-26T12:45:39.273948 pyhelper_utils.shell INFO Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpp6cj3dxi-cnv-tests-pull-secret/pull-secrets.json command
2026-01-26T12:45:41.498986 timeout_sampler INFO Elapsed time: 0.00010824203491210938 [0:00:00.000108]
2026-01-26T12:45:41.502141 ocp_resources.resource INFO kind: VirtualMachine api version: kubevirt.io/v1
2026-01-26T12:45:41.502264 utilities.virt WARNING `os_login_param` not defined for fedora
2026-01-26T12:45:41.511609 utilities.virt INFO Setting random username and password
2026-01-26T12:45:41.543322 ocp_resources VirtualMachine INFO Create VirtualMachine namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:45:41.543425 ocp_resources VirtualMachine INFO Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'namespace-admin-vm-reset'}, 'name': 'namespace-admin-vm-reset-1769427941-5019975'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'namespace-admin-vm-reset-1769427941-5019975', 'kubevirt.io/domain': 'namespace-admin-vm-reset-1769427941-5019975', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}
2026-01-26T12:45:41.657667 timeout_sampler INFO Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)
2026-01-26T12:45:41.671030 timeout_sampler INFO Elapsed time: 0.00015234947204589844 [0:00:00.000152]
2026-01-26T12:45:41.671222 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
2026-01-26T12:45:41.671282 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 status to be Running
2026-01-26T12:45:41.671335 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)
2026-01-26T12:45:42.679290 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is Scheduling
2026-01-26T12:45:47.695005 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is Scheduled
2026-01-26T12:45:48.698878 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is Running
2026-01-26T12:45:48.699040 timeout_sampler INFO Elapsed time: 7.0238120555877686 [0:00:07.023812]
2026-01-26T12:45:48.699338 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance/namespace-admin-vm-reset-1769427941-5019975's 'AgentConnected' condition to be 'True'
2026-01-26T12:45:48.699482 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is created
2026-01-26T12:45:48.699543 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)
2026-01-26T12:45:48.699239 utilities.virt INFO Wait until guest agent is active on namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:45:48.706087 timeout_sampler INFO Elapsed time: 6.461143493652344e-05 [0:00:00.000065]
2026-01-26T12:45:48.706231 timeout_sampler INFO Waiting for 719.9932732582092 seconds [0:11:59.993273], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)
2026-01-26T12:46:08.785908 timeout_sampler INFO Elapsed time: 20.076558113098145 [0:00:20.076558]
2026-01-26T12:46:08.786103 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)
2026-01-26T12:46:08.786027 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427941-5019975 network interfaces
2026-01-26T12:46:08.788458 timeout_sampler INFO Elapsed time: 5.1021575927734375e-05 [0:00:00.000051]
2026-01-26T12:46:08.788558 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427941-5019975 SSH connectivity.
2026-01-26T12:46:08.788609 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22' FFQnzjlMKSXA_Rsj@namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:46:20.591655 timeout_sampler INFO Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})
2026-01-26T12:46:20.591767 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:46:20.636474 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:46:20.653017 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:46:20.855825 timeout_sampler INFO Elapsed time: 0.00013303756713867188 [0:00:00.000133]
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:46:20.856345 tests.virt.node.general.test_vmi_reset INFO Resetting VMI with proper RBAC permissions (should succeed)
2026-01-26T12:46:20.856415 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22' FFQnzjlMKSXA_Rsj@namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:46:32.880603 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:46:32.896967 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:46:36.841414 pyhelper_utils.shell INFO [SSH][namespace-admin-vm-reset-1769427941-5019975] Executed: journalctl --list-boots | wc -l, rc:0, out: 2
, error: 
2026-01-26T12:46:36.952996 timeout_sampler INFO Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)
2026-01-26T12:46:36.972501 timeout_sampler INFO Elapsed time: 0.0001442432403564453 [0:00:00.000144]
2026-01-26T12:46:36.972707 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 status to be Running
2026-01-26T12:46:36.972792 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)
2026-01-26T12:46:36.975163 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is Running
2026-01-26T12:46:36.975237 timeout_sampler INFO Elapsed time: 6.461143493652344e-05 [0:00:00.000065]
2026-01-26T12:46:36.975434 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance/namespace-admin-vm-reset-1769427941-5019975's 'AgentConnected' condition to be 'True'
2026-01-26T12:46:36.975582 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is created
2026-01-26T12:46:36.975627 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)
2026-01-26T12:46:36.975352 utilities.virt INFO Wait until guest agent is active on namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:46:36.977818 timeout_sampler INFO Elapsed time: 4.00543212890625e-05 [0:00:00.000040]
2026-01-26T12:46:36.977896 timeout_sampler INFO Waiting for 719.9976933002472 seconds [0:11:59.997693], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)
2026-01-26T12:46:36.979852 timeout_sampler INFO Elapsed time: 4.2438507080078125e-05 [0:00:00.000042]
2026-01-26T12:46:36.979995 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)
2026-01-26T12:46:36.979931 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427941-5019975 network interfaces
2026-01-26T12:46:36.982104 timeout_sampler INFO Elapsed time: 9.918212890625e-05 [0:00:00.000099]
2026-01-26T12:46:36.982181 utilities.virt INFO Wait for namespace-admin-vm-reset-1769427941-5019975 SSH connectivity.
2026-01-26T12:46:36.982232 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22' FFQnzjlMKSXA_Rsj@namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:46:48.841550 timeout_sampler INFO Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})
2026-01-26T12:46:48.841682 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:03.888435 paramiko.transport ERROR Exception (client): Error reading SSH protocol banner
2026-01-26T12:47:03.899320 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:03.899423 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner
2026-01-26T12:47:03.899472 paramiko.transport ERROR     buf = self.packetizer.readline(timeout)
2026-01-26T12:47:03.899514 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline
2026-01-26T12:47:03.899554 paramiko.transport ERROR     buf += self._read_timeout(timeout)
2026-01-26T12:47:03.899593 paramiko.transport ERROR            ~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:03.899631 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout
2026-01-26T12:47:03.899668 paramiko.transport ERROR     raise socket.timeout()
2026-01-26T12:47:03.899709 paramiko.transport ERROR TimeoutError
2026-01-26T12:47:03.899746 paramiko.transport ERROR 
2026-01-26T12:47:03.899783 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:03.899819 paramiko.transport ERROR 
2026-01-26T12:47:03.899858 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:03.899892 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run
2026-01-26T12:47:03.899922 paramiko.transport ERROR     self._check_banner()
2026-01-26T12:47:03.899950 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~^^
2026-01-26T12:47:03.899980 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner
2026-01-26T12:47:03.900010 paramiko.transport ERROR     raise SSHException(
2026-01-26T12:47:03.900039 paramiko.transport ERROR         "Error reading SSH protocol banner" + str(e)
2026-01-26T12:47:03.900067 paramiko.transport ERROR     )
2026-01-26T12:47:03.900095 paramiko.transport ERROR paramiko.ssh_exception.SSHException: Error reading SSH protocol banner
2026-01-26T12:47:03.900122 paramiko.transport ERROR 
2026-01-26T12:47:08.900693 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:08.937743 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:08.947684 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:08.947812 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:08.947870 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:08.947912 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:08.947951 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:08.947993 paramiko.transport ERROR 
2026-01-26T12:47:08.948033 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:08.948071 paramiko.transport ERROR 
2026-01-26T12:47:08.948124 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:08.948162 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:08.948198 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:08.948239 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:08.948276 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:08.948312 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:08.948350 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:08.948395 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:08.948431 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:08.948466 paramiko.transport ERROR 
2026-01-26T12:47:13.948805 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:13.980988 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:13.981627 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:13.981703 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:13.981740 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:13.981769 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:13.981799 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:13.981826 paramiko.transport ERROR 
2026-01-26T12:47:13.981853 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:13.981878 paramiko.transport ERROR 
2026-01-26T12:47:13.981903 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:13.981927 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:13.981951 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:13.981977 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:13.982001 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:13.982025 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:13.982048 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:13.982072 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:13.982096 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:13.982119 paramiko.transport ERROR 
2026-01-26T12:47:18.982313 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:19.015366 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:19.015940 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:19.016008 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:19.016042 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:19.016071 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:19.016098 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:19.016124 paramiko.transport ERROR 
2026-01-26T12:47:19.016150 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:19.016174 paramiko.transport ERROR 
2026-01-26T12:47:19.016199 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:19.016224 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:19.016248 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:19.016275 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:19.016299 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:19.016321 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:19.016344 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:19.016373 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:19.016397 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:19.016421 paramiko.transport ERROR 
2026-01-26T12:47:24.016890 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:24.047801 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:24.048520 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:24.048595 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:24.048631 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:24.048662 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:24.048689 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:24.048715 paramiko.transport ERROR 
2026-01-26T12:47:24.048743 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:24.048769 paramiko.transport ERROR 
2026-01-26T12:47:24.048795 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:24.048820 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:24.048845 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:24.048870 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:24.048895 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:24.048919 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:24.048943 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:24.048968 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:24.048992 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:24.049016 paramiko.transport ERROR 
2026-01-26T12:47:29.049227 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:29.081103 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:29.081662 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:29.081731 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:29.081765 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:29.081797 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:29.081824 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:29.081849 paramiko.transport ERROR 
2026-01-26T12:47:29.081876 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:29.081900 paramiko.transport ERROR 
2026-01-26T12:47:29.081924 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:29.081949 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:29.081973 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:29.081996 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:29.082020 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:29.082043 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:29.082067 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:29.082091 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:29.082116 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:29.082140 paramiko.transport ERROR 
2026-01-26T12:47:34.082546 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:34.122267 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:34.122905 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:34.122978 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:34.123014 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:34.123043 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:34.123070 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:34.123095 paramiko.transport ERROR 
2026-01-26T12:47:34.123122 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:34.123147 paramiko.transport ERROR 
2026-01-26T12:47:34.123171 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:34.123195 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:34.123220 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:34.123245 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:34.123269 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:34.123293 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:34.123317 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:34.123342 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:34.123371 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:34.123396 paramiko.transport ERROR 
2026-01-26T12:47:39.123744 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:39.155820 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:39.156489 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:39.156564 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:39.156599 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:39.156629 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:39.156656 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:39.156682 paramiko.transport ERROR 
2026-01-26T12:47:39.156708 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:39.156733 paramiko.transport ERROR 
2026-01-26T12:47:39.156758 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:39.156783 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:39.156808 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:39.156834 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:39.156857 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:39.156881 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:39.156905 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:39.156929 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:39.156953 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:39.156977 paramiko.transport ERROR 
2026-01-26T12:47:44.157219 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:44.188996 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:44.189647 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:44.189722 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:44.189761 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:44.189792 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:44.189819 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:44.189844 paramiko.transport ERROR 
2026-01-26T12:47:44.189871 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:44.189896 paramiko.transport ERROR 
2026-01-26T12:47:44.189922 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:44.189948 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:44.189972 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:44.189996 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:44.190019 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:44.190043 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:44.190066 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:44.190090 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:44.190114 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:44.190137 paramiko.transport ERROR 
2026-01-26T12:47:49.190507 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:49.221812 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:49.222466 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:49.222535 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:49.222570 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:49.222599 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:49.222626 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:49.222651 paramiko.transport ERROR 
2026-01-26T12:47:49.222677 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:49.222703 paramiko.transport ERROR 
2026-01-26T12:47:49.222728 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:49.222753 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:49.222777 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:49.222801 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:49.222826 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:49.222849 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:49.222872 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:49.222897 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:49.222922 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:49.222945 paramiko.transport ERROR 
2026-01-26T12:47:54.223140 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:47:54.255615 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:54.256289 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:54.256366 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:47:54.256402 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:47:54.256442 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:47:54.256468 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:47:54.256494 paramiko.transport ERROR 
2026-01-26T12:47:54.256521 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:47:54.256546 paramiko.transport ERROR 
2026-01-26T12:47:54.256572 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:47:54.256597 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:47:54.256621 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:47:54.256647 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:47:54.256672 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:47:54.256696 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:47:54.256722 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:47:54.256746 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:47:54.256771 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:47:54.256794 paramiko.transport ERROR 
2026-01-26T12:47:59.256997 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:48:14.291978 paramiko.transport ERROR Exception (client): Error reading SSH protocol banner
2026-01-26T12:48:14.292760 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:14.292841 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner
2026-01-26T12:48:14.292881 paramiko.transport ERROR     buf = self.packetizer.readline(timeout)
2026-01-26T12:48:14.292913 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline
2026-01-26T12:48:14.292941 paramiko.transport ERROR     buf += self._read_timeout(timeout)
2026-01-26T12:48:14.292967 paramiko.transport ERROR            ~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:48:14.292996 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout
2026-01-26T12:48:14.293022 paramiko.transport ERROR     raise socket.timeout()
2026-01-26T12:48:14.293049 paramiko.transport ERROR TimeoutError
2026-01-26T12:48:14.293076 paramiko.transport ERROR 
2026-01-26T12:48:14.293105 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:48:14.293144 paramiko.transport ERROR 
2026-01-26T12:48:14.293176 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:14.293207 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run
2026-01-26T12:48:14.293248 paramiko.transport ERROR     self._check_banner()
2026-01-26T12:48:14.293276 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~^^
2026-01-26T12:48:14.293317 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner
2026-01-26T12:48:14.293363 paramiko.transport ERROR     raise SSHException(
2026-01-26T12:48:14.293411 paramiko.transport ERROR         "Error reading SSH protocol banner" + str(e)
2026-01-26T12:48:14.293451 paramiko.transport ERROR     )
2026-01-26T12:48:14.293490 paramiko.transport ERROR paramiko.ssh_exception.SSHException: Error reading SSH protocol banner
2026-01-26T12:48:14.293529 paramiko.transport ERROR 
2026-01-26T12:48:19.294058 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:48:34.326078 paramiko.transport ERROR Exception (client): Error reading SSH protocol banner
2026-01-26T12:48:34.326935 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:34.327017 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner
2026-01-26T12:48:34.327057 paramiko.transport ERROR     buf = self.packetizer.readline(timeout)
2026-01-26T12:48:34.327090 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline
2026-01-26T12:48:34.327119 paramiko.transport ERROR     buf += self._read_timeout(timeout)
2026-01-26T12:48:34.327147 paramiko.transport ERROR            ~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:48:34.327175 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout
2026-01-26T12:48:34.327203 paramiko.transport ERROR     raise socket.timeout()
2026-01-26T12:48:34.327231 paramiko.transport ERROR TimeoutError
2026-01-26T12:48:34.327259 paramiko.transport ERROR 
2026-01-26T12:48:34.327288 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:48:34.327316 paramiko.transport ERROR 
2026-01-26T12:48:34.327344 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:34.327377 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run
2026-01-26T12:48:34.327405 paramiko.transport ERROR     self._check_banner()
2026-01-26T12:48:34.327432 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~^^
2026-01-26T12:48:34.327460 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner
2026-01-26T12:48:34.327489 paramiko.transport ERROR     raise SSHException(
2026-01-26T12:48:34.327516 paramiko.transport ERROR         "Error reading SSH protocol banner" + str(e)
2026-01-26T12:48:34.327544 paramiko.transport ERROR     )
2026-01-26T12:48:34.327574 paramiko.transport ERROR paramiko.ssh_exception.SSHException: Error reading SSH protocol banner
2026-01-26T12:48:34.327605 paramiko.transport ERROR 
2026-01-26T12:48:39.327993 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:48:39.360174 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:48:39.360841 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:39.360917 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:48:39.360955 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:48:39.360986 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:48:39.361014 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:48:39.361040 paramiko.transport ERROR 
2026-01-26T12:48:39.361069 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:48:39.361096 paramiko.transport ERROR 
2026-01-26T12:48:39.361124 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:39.361149 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:48:39.361173 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:48:39.361197 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:48:39.361220 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:48:39.361244 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:48:39.361268 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:48:39.361291 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:48:39.361315 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:48:39.361338 paramiko.transport ERROR 
2026-01-26T12:48:44.361710 Host INFO [namespace-admin-vm-reset-1769427941-5019975] Executing command exit
2026-01-26T12:48:44.393972 paramiko.transport ERROR Exception (client): ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:48:44.394640 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:44.394713 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 79, in send
2026-01-26T12:48:44.394750 paramiko.transport ERROR     self.process.stdin.write(content)
2026-01-26T12:48:44.394780 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:48:44.394807 paramiko.transport ERROR BrokenPipeError: [Errno 32] Broken pipe
2026-01-26T12:48:44.394832 paramiko.transport ERROR 
2026-01-26T12:48:44.394859 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:48:44.394884 paramiko.transport ERROR 
2026-01-26T12:48:44.394909 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:48:44.394933 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2174, in run
2026-01-26T12:48:44.394956 paramiko.transport ERROR     self.packetizer.write_all(b(self.local_version + "\r\n"))
2026-01-26T12:48:44.394980 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-26T12:48:44.395005 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 354, in write_all
2026-01-26T12:48:44.395028 paramiko.transport ERROR     n = self.__socket.send(out)
2026-01-26T12:48:44.395051 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/proxy.py", line 85, in send
2026-01-26T12:48:44.395076 paramiko.transport ERROR     raise ProxyCommandFailure(" ".join(self.cmd), e.strerror)
2026-01-26T12:48:44.395100 paramiko.transport ERROR paramiko.ssh_exception.ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe
2026-01-26T12:48:44.395124 paramiko.transport ERROR 
2026-01-26T12:48:49.395458 pyhelper_utils.shell INFO Running virtctl -n node-general-test-vmi-reset --kubeconfig /tmp/tmprs_c6213-cnv-tests-kubeconfig/kubeconfig vnc screenshot namespace-admin-vm-reset-1769427941-5019975 -f /home/mvavrine/cnv/openshift-virtualization-tests/tests-collected-info/node-general-test-vmi-reset-namespace-admin-vm-reset-1769427941-5019975.png command
------------------------------------------------------------ Captured stderr teardown -------------------------------------------------------------
self = <tests.virt.node.general.test_vmi_reset.TestVMIResetRBAC object at 0x7fc582e36350>
unprivileged_user_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fc581785550>

    @pytest.mark.polarion("CNV-12377")
    @pytest.mark.usefixtures("unprivileged_user_reset_rolebinding")
    def test_unprivileged_user_reset_with_rbac(self, unprivileged_user_vm_for_reset):
        """
        Test Scenario TS-04 (Positive): Verify user with edit role can reset VMI.
    
        Acceptance Criteria: AC-5
        Tier: 1 (Functional)
    
        Validates that:
        - User with kubevirt.io:edit role can reset VMI
        - Reset succeeds when proper permissions are granted
        """
        LOGGER.info("Resetting VMI with proper RBAC permissions (should succeed)")
        boot_count_before = get_vm_boot_count(vm=unprivileged_user_vm_for_reset)
    
        unprivileged_user_vm_for_reset.vmi.reset()
>       wait_for_running_vm(vm=unprivileged_user_vm_for_reset)

tests/virt/node/general/test_vmi_reset.py:193: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
utilities/virt.py:1697: in wait_for_running_vm
    wait_for_ssh_connectivity(vm=vm, timeout=ssh_timeout)
utilities/virt.py:1539: in wait_for_ssh_connectivity
    for sample in TimeoutSampler(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <timeout_sampler.TimeoutSampler object at 0x7fc5800b7bb0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
                    raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
    
                time.sleep(self.sleep)
                elapsed_time = None
    
            finally:
                if self.print_log and elapsed_time:
                    LOGGER.info(_elapsed_time_log(elapsed_time=elapsed_time))
    
>       raise TimeoutExpiredError(self._get_exception_log(exp=last_exp), last_exp=last_exp)
E       timeout_sampler.TimeoutExpiredError: Timed Out: 120
E       Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60}
E       Last exception: ProxyCommandFailure: ProxyCommand("virtctl port-forward --stdio=true vm/namespace-admin-vm-reset-1769427941-5019975 -n node-general-test-vmi-reset 22") returned nonzero exit status: Broken pipe.

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:182: TimeoutExpiredError
------------------------------------------------------- TEARDOWN -------------------------------------------------------
2026-01-26T12:48:49.691284 ocp_resources VirtualMachine INFO Wait for VirtualMachine namespace-admin-vm-reset-1769427941-5019975 status to be None
2026-01-26T12:48:49.691491 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: kubernetes.dynamic.client.get  Kwargs: {'field_selector': 'metadata.name==namespace-admin-vm-reset-1769427941-5019975', 'namespace': 'node-general-test-vmi-reset'})
2026-01-26T12:48:50.704356 timeout_sampler INFO Elapsed time: 1.0061206817626953 [0:00:01.006121]
2026-01-26T12:48:50.704643 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance namespace-admin-vm-reset-1769427941-5019975 is deleted
2026-01-26T12:48:50.704720 timeout_sampler INFO Waiting for 480 seconds [0:08:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:48:55.732397 timeout_sampler INFO Elapsed time: 5.023942708969116 [0:00:05.023943]
2026-01-26T12:48:55.732537 ocp_resources VirtualMachine INFO Delete VirtualMachine namespace-admin-vm-reset-1769427941-5019975
2026-01-26T12:48:55.738170 ocp_resources VirtualMachine INFO Deleting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'annotations': {'kubemacpool.io/transaction-timestamp': '2026-01-26T11:48:49.667998026Z', 'kubevirt.io/latest-observed-api-version': 'v1', 'kubevirt.io/storage-observed-api-version': 'v1'}, 'creationTimestamp': '2026-01-26T11:45:41Z', 'finalizers': ['kubevirt.io/virtualMachineControllerFinalize'], 'generation': 3, 'labels': {'kubevirt.io/vm': 'namespace-admin-vm-reset'}, 'managedFields': [{'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:labels': {'.': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:template': {'.': {}, 'f:metadata': {'.': {}, 'f:creationTimestamp': {}, 'f:labels': {'.': {}, 'f:debugLogs': {}, 'f:kubevirt.io/domain': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:domain': {'.': {}, 'f:cpu': {'.': {}, 'f:cores': {}}, 'f:devices': {'.': {}, 'f:disks': {}, 'f:interfaces': {}, 'f:rng': {}}, 'f:machine': {'.': {}, 'f:type': {}}, 'f:memory': {'.': {}, 'f:guest': {}}}, 'f:networks': {}, 'f:terminationGracePeriodSeconds': {}, 'f:volumes': {}}}}}, 'manager': 'OpenAPI-Generator', 'operation': 'Update', 'time': '2026-01-26T11:45:41Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:kubevirt.io/latest-observed-api-version': {}, 'f:kubevirt.io/storage-observed-api-version': {}}, 'f:finalizers': {'.': {}, 'v:"kubevirt.io/virtualMachineControllerFinalize"': {}}}}, 'manager': 'virt-controller', 'operation': 'Update', 'time': '2026-01-26T11:45:41Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:spec': {'f:runStrategy': {}}}, 'manager': 'virt-api', 'operation': 'Update', 'time': '2026-01-26T11:48:49Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:conditions': {}, 'f:desiredGeneration': {}, 'f:observedGeneration': {}, 'f:printableStatus': {}, 'f:runStrategy': {}, 'f:volumeSnapshotStatuses': {}}}, 'manager': 'virt-controller', 'operation': 'Update', 'subresource': 'status', 'time': '2026-01-26T11:48:54Z'}], 'name': 'namespace-admin-vm-reset-1769427941-5019975', 'namespace': 'node-general-test-vmi-reset', 'resourceVersion': '271359', 'uid': 'a9f27460-2c09-41f3-9ba5-1f8e19620ec2'}, 'spec': {'runStrategy': 'Halted', 'template': {'metadata': {'creationTimestamp': None, 'labels': {'debugLogs': 'true', 'kubevirt.io/domain': 'namespace-admin-vm-reset-1769427941-5019975', 'kubevirt.io/vm': 'namespace-admin-vm-reset-1769427941-5019975'}}, 'spec': {'architecture': 'amd64', 'domain': {'cpu': {'cores': 1}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'macAddress': '02:2c:fa:00:00:04', 'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'firmware': {'serial': 'ae43d0e9-7c55-4daf-9acc-7a19cdbaa87b'}, 'machine': {'type': 'pc-q35-rhel9.6.0'}, 'memory': {'guest': '1Gi'}, 'resources': {}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'cloudInitNoCloud': {'userData': '*******'}, 'name': 'cloudinitdisk'}]}}}, 'status': {'conditions': [{'lastProbeTime': '2026-01-26T11:48:54Z', 'lastTransitionTime': '2026-01-26T11:48:54Z', 'message': 'VMI does not exist', 'reason': 'VMINotExists', 'status': 'False', 'type': 'Ready'}, {'lastProbeTime': None, 'lastTransitionTime': None, 'status': 'True', 'type': 'LiveMigratable'}, {'lastProbeTime': None, 'lastTransitionTime': None, 'status': 'True', 'type': 'StorageLiveMigratable'}], 'desiredGeneration': 3, 'observedGeneration': 3, 'printableStatus': 'Stopped', 'runStrategy': 'Halted', 'volumeSnapshotStatuses': [{'enabled': False, 'name': 'containerdisk', 'reason': 'Snapshot is not supported for this volumeSource type [containerdisk]'}, {'enabled': False, 'name': 'cloudinitdisk', 'reason': 'Snapshot is not supported for this volumeSource type [cloudinitdisk]'}]}}
2026-01-26T12:48:55.779526 ocp_resources VirtualMachine INFO Wait until VirtualMachine namespace-admin-vm-reset-1769427941-5019975 is deleted
2026-01-26T12:48:55.779669 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:48:56.787089 timeout_sampler INFO Elapsed time: 1.0043301582336426 [0:00:01.004330]
2026-01-26T12:48:56.787229 ocp_resources RoleBinding INFO Delete RoleBinding role-bind-kubevirt-reset
2026-01-26T12:48:56.792760 ocp_resources RoleBinding INFO Deleting {'kind': 'RoleBinding', 'apiVersion': 'rbac.authorization.k8s.io/v1', 'metadata': {'name': 'role-bind-kubevirt-reset', 'namespace': 'node-general-test-vmi-reset', 'uid': 'a9072df6-d1c4-40d9-9a90-1ad86dbd2858', 'resourceVersion': '269965', 'creationTimestamp': '2026-01-26T11:45:39Z', 'managedFields': [{'manager': 'OpenAPI-Generator', 'operation': 'Update', 'apiVersion': 'rbac.authorization.k8s.io/v1', 'time': '2026-01-26T11:45:39Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:roleRef': {}, 'f:subjects': {}}}]}, 'subjects': [{'kind': 'User', 'apiGroup': 'rbac.authorization.k8s.io', 'name': 'unprivileged-user', 'namespace': 'node-general-test-vmi-reset'}], 'roleRef': {'apiGroup': 'rbac.authorization.k8s.io', 'kind': 'ClusterRole', 'name': 'kubevirt.io:edit'}}
2026-01-26T12:48:56.811300 ocp_resources RoleBinding INFO Wait until RoleBinding role-bind-kubevirt-reset is deleted
2026-01-26T12:48:56.811501 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:48:56.814541 timeout_sampler INFO Elapsed time: 0.00012540817260742188 [0:00:00.000125]
_____________________________________________ TestVMIResetErrorHandling.test_reset_stopped_vmi_fails ______________________________________________

func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fc581c34a50>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XG.../v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/stopped-vm-for-reset-test-1769428138-8803847/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fc5727e9130>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <timeout_sampler.TimeoutSampler object at 0x7fc5727e9130>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/stopped-vm-for-reset-test-1769428138-8803847/reset', 'method': 'PUT', 'headers': {'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc', 'Content-Type': 'application/json'}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '53c339d6-3b5d-4b6b-a3bf-ea5cd719f5d6', 'Cache-Control': 'no-cache, private', 'Content-Length': '364', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:48:58 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"stopped-vm-for-reset-test-1769428138-8803847\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "stopped-vm-for-reset-test-1769428138-8803847",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.0039234161376953125 [0:00:00.003923]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetErrorHandling object at 0x7fc582e36490>
stopped_vm_for_test = <utilities.virt.VirtualMachineForTests object at 0x7fc58442d6a0>

    @pytest.mark.polarion("CNV-12378")
    def test_reset_stopped_vmi_fails(self, stopped_vm_for_test):
        """
        Test Scenario TS-05: Verify reset fails on non-running VMI with appropriate error.
    
        Acceptance Criteria: AC-6
        Tier: 1 (Functional)
    
        Validates that:
        - Reset operation fails gracefully on stopped VMIs
        - Appropriate error is returned
        """
        LOGGER.info("Attempting to reset a stopped VMI (should fail)")
    
        # Verify VM has no VMI running
        assert not stopped_vm_for_test.vmi.exists, "VM should not have a running VMI"
    
        # Attempt reset should raise an error
        with pytest.raises((NotFoundError, AttributeError)):
>           stopped_vm_for_test.vmi.reset()

tests/virt/node/general/test_vmi_reset.py:223: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <kubernetes.client.rest.RESTClientObject object at 0x7fc581c34c50>, method = 'PUT'
url = 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/stopped-vm-for-reset-test-1769428138-8803847/reset'
query_params = None, headers = {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc'}
body = None, post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '53c339d6-3b5d-4b6b-a3bf-ea5cd719f5d6', 'Cache-Control': 'no-cache, private', 'Content-Length': '364', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:48:58 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"stopped-vm-for-reset-test-1769428138-8803847\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "stopped-vm-for-reset-test-1769428138-8803847",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
-------------------------------------------------------------- Captured stderr setup --------------------------------------------------------------
2026-01-26T12:48:56.816000 ocp_resources.resource INFO Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 5 times]

--------------------------------------------- test_reset_stopped_vmi_fails ---------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:48:56.815471 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:48:56.815574 conftest INFO Executing class fixture: term_handler_scope_class
2026-01-26T12:48:56.815706 conftest INFO Executing function fixture: autouse_fixtures
2026-01-26T12:48:56.815854 conftest INFO Executing function fixture: stopped_vm_for_test
2026-01-26T12:48:56.870500 timeout_sampler INFO Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp10ci6owj-cnv-tests-pull-secret/pull-secrets.json'})
2026-01-26T12:48:56.870657 pyhelper_utils.shell INFO Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp10ci6owj-cnv-tests-pull-secret/pull-secrets.json command
2026-01-26T12:48:58.878344 timeout_sampler INFO Elapsed time: 0.00011801719665527344 [0:00:00.000118]
2026-01-26T12:48:58.880489 ocp_resources.resource INFO kind: VirtualMachine api version: kubevirt.io/v1
2026-01-26T12:48:58.880586 utilities.virt WARNING `os_login_param` not defined for fedora
2026-01-26T12:48:58.883566 utilities.virt INFO Setting random username and password
2026-01-26T12:48:58.914981 ocp_resources VirtualMachine INFO Create VirtualMachine stopped-vm-for-reset-test-1769428138-8803847
2026-01-26T12:48:58.915107 ocp_resources VirtualMachine INFO Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'stopped-vm-for-reset-test'}, 'name': 'stopped-vm-for-reset-test-1769428138-8803847'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'stopped-vm-for-reset-test-1769428138-8803847', 'kubevirt.io/domain': 'stopped-vm-for-reset-test-1769428138-8803847', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
2026-01-26T12:48:58.954657 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:48:58.954466 tests.virt.node.general.test_vmi_reset INFO Attempting to reset a stopped VMI (should fail)
------------------------------------------------------------ Captured stderr teardown -------------------------------------------------------------
func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fc581c34a50>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XG.../v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/stopped-vm-for-reset-test-1769428138-8803847/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fc5727e9130>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <timeout_sampler.TimeoutSampler object at 0x7fc5727e9130>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/stopped-vm-for-reset-test-1769428138-8803847/reset', 'method': 'PUT', 'headers': {'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc', 'Content-Type': 'application/json'}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '53c339d6-3b5d-4b6b-a3bf-ea5cd719f5d6', 'Cache-Control': 'no-cache, private', 'Content-Length': '364', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:48:58 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"stopped-vm-for-reset-test-1769428138-8803847\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "stopped-vm-for-reset-test-1769428138-8803847",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.0039234161376953125 [0:00:00.003923]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetErrorHandling object at 0x7fc582e36490>
stopped_vm_for_test = <utilities.virt.VirtualMachineForTests object at 0x7fc58442d6a0>

    @pytest.mark.polarion("CNV-12378")
    def test_reset_stopped_vmi_fails(self, stopped_vm_for_test):
        """
        Test Scenario TS-05: Verify reset fails on non-running VMI with appropriate error.
    
        Acceptance Criteria: AC-6
        Tier: 1 (Functional)
    
        Validates that:
        - Reset operation fails gracefully on stopped VMIs
        - Appropriate error is returned
        """
        LOGGER.info("Attempting to reset a stopped VMI (should fail)")
    
        # Verify VM has no VMI running
        assert not stopped_vm_for_test.vmi.exists, "VM should not have a running VMI"
    
        # Attempt reset should raise an error
        with pytest.raises((NotFoundError, AttributeError)):
>           stopped_vm_for_test.vmi.reset()

tests/virt/node/general/test_vmi_reset.py:223: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <kubernetes.client.rest.RESTClientObject object at 0x7fc581c34c50>, method = 'PUT'
url = 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/stopped-vm-for-reset-test-1769428138-8803847/reset'
query_params = None, headers = {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc'}
body = None, post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '53c339d6-3b5d-4b6b-a3bf-ea5cd719f5d6', 'Cache-Control': 'no-cache, private', 'Content-Length': '364', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:48:58 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"stopped-vm-for-reset-test-1769428138-8803847\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "stopped-vm-for-reset-test-1769428138-8803847",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
------------------------------------------------------- TEARDOWN -------------------------------------------------------
2026-01-26T12:48:59.055880 ocp_resources VirtualMachine INFO Delete VirtualMachine stopped-vm-for-reset-test-1769428138-8803847
2026-01-26T12:48:59.062055 ocp_resources VirtualMachine INFO Deleting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'annotations': {'kubemacpool.io/transaction-timestamp': '2026-01-26T11:48:58.992132053Z', 'kubevirt.io/latest-observed-api-version': 'v1', 'kubevirt.io/storage-observed-api-version': 'v1'}, 'creationTimestamp': '2026-01-26T11:48:58Z', 'finalizers': ['kubevirt.io/virtualMachineControllerFinalize'], 'generation': 1, 'labels': {'kubevirt.io/vm': 'stopped-vm-for-reset-test'}, 'managedFields': [{'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:labels': {'.': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:runStrategy': {}, 'f:template': {'.': {}, 'f:metadata': {'.': {}, 'f:creationTimestamp': {}, 'f:labels': {'.': {}, 'f:debugLogs': {}, 'f:kubevirt.io/domain': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:domain': {'.': {}, 'f:cpu': {'.': {}, 'f:cores': {}}, 'f:devices': {'.': {}, 'f:disks': {}, 'f:interfaces': {}, 'f:rng': {}}, 'f:machine': {'.': {}, 'f:type': {}}, 'f:memory': {'.': {}, 'f:guest': {}}}, 'f:networks': {}, 'f:terminationGracePeriodSeconds': {}, 'f:volumes': {}}}}}, 'manager': 'OpenAPI-Generator', 'operation': 'Update', 'time': '2026-01-26T11:48:58Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:kubevirt.io/latest-observed-api-version': {}, 'f:kubevirt.io/storage-observed-api-version': {}}, 'f:finalizers': {'.': {}, 'v:"kubevirt.io/virtualMachineControllerFinalize"': {}}}}, 'manager': 'virt-controller', 'operation': 'Update', 'time': '2026-01-26T11:48:59Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:conditions': {}, 'f:printableStatus': {}, 'f:volumeSnapshotStatuses': {}}}, 'manager': 'virt-controller', 'operation': 'Update', 'subresource': 'status', 'time': '2026-01-26T11:48:59Z'}], 'name': 'stopped-vm-for-reset-test-1769428138-8803847', 'namespace': 'node-general-test-vmi-reset', 'resourceVersion': '271393', 'uid': 'bc6148f1-89f6-47a8-8184-188ee06b7034'}, 'spec': {'runStrategy': 'Halted', 'template': {'metadata': {'creationTimestamp': None, 'labels': {'debugLogs': 'true', 'kubevirt.io/domain': 'stopped-vm-for-reset-test-1769428138-8803847', 'kubevirt.io/vm': 'stopped-vm-for-reset-test-1769428138-8803847'}}, 'spec': {'architecture': 'amd64', 'domain': {'cpu': {'cores': 1}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'macAddress': '02:2c:fa:00:00:05', 'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'firmware': {'serial': '1a44dd75-bef3-4f7e-99f4-bb64e46e19a8'}, 'machine': {'type': 'pc-q35-rhel9.6.0'}, 'memory': {'guest': '1Gi'}, 'resources': {}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'cloudInitNoCloud': {'userData': '*******'}, 'name': 'cloudinitdisk'}]}}}, 'status': {'conditions': [{'lastProbeTime': '2026-01-26T11:48:59Z', 'lastTransitionTime': '2026-01-26T11:48:59Z', 'message': 'VMI does not exist', 'reason': 'VMINotExists', 'status': 'False', 'type': 'Ready'}], 'printableStatus': 'Stopped', 'volumeSnapshotStatuses': [{'enabled': False, 'name': 'containerdisk', 'reason': 'Snapshot is not supported for this volumeSource type [containerdisk]'}, {'enabled': False, 'name': 'cloudinitdisk', 'reason': 'Snapshot is not supported for this volumeSource type [cloudinitdisk]'}]}}
2026-01-26T12:48:59.096707 ocp_resources VirtualMachine INFO Wait until VirtualMachine stopped-vm-for-reset-test-1769428138-8803847 is deleted
2026-01-26T12:48:59.096858 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:49:00.107151 timeout_sampler INFO Elapsed time: 1.003401756286621 [0:00:01.003402]
___________________________________________ TestVMIResetErrorHandling.test_reset_non_existent_vmi_fails ___________________________________________

func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fc581c34a50>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XG...pis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/non-existent-vmi/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fc5727ea7b0>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <timeout_sampler.TimeoutSampler object at 0x7fc5727ea7b0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/non-existent-vmi/reset', 'method': 'PUT', 'headers': {'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc', 'Content-Type': 'application/json'}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '969f033c-388c-4d87-984b-54beb139be3b', 'Cache-Control': 'no-cache, private', 'Content-Length': '308', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:49:00 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"non-existent-vmi\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "non-existent-vmi",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.0054018497467041016 [0:00:00.005402]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetErrorHandling object at 0x7fc582e365d0>
namespace = <ocp_resources.namespace.Namespace object at 0x7fc581894e90>
unprivileged_client = <kubernetes.dynamic.client.DynamicClient object at 0x7fc581c34d50>

    @pytest.mark.polarion("CNV-12379")
    def test_reset_non_existent_vmi_fails(self, namespace, unprivileged_client):
        """
        Test Scenario TS-06: Verify reset fails on non-existent VMI.
    
        Acceptance Criteria: AC-6
        Tier: 1 (Functional)
    
        Validates that:
        - Reset operation fails on non-existent VMI
        - NotFoundError is raised
        """
        LOGGER.info("Attempting to reset a non-existent VMI (should fail)")
    
        # Create VMI object reference to non-existent VMI
        non_existent_vmi = VirtualMachineInstance(
            name="non-existent-vmi",
            namespace=namespace.name,
            client=unprivileged_client,
        )
    
        # Attempt reset should raise NotFoundError
        with pytest.raises(NotFoundError):
>           non_existent_vmi.reset()

tests/virt/node/general/test_vmi_reset.py:248: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <kubernetes.client.rest.RESTClientObject object at 0x7fc581c34c50>, method = 'PUT'
url = 'https://api.crc.testing:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-reset/virtualmachineinstances/non-existent-vmi/reset'
query_params = None, headers = {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~KfIlm1GzhajXt3C4Jc-Q1GDXXKn2gmzOjF-XGAwqNnc'}
body = None, post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '969f033c-388c-4d87-984b-54beb139be3b', 'Cache-Control': 'no-cache, private', 'Content-Length': '308', 'Content-Type': 'application/json', 'Date': 'Mon, 26 Jan 2026 11:49:00 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '24a68d71-d73a-4f09-abd2-aa4157d9572d', 'X-Kubernetes-Pf-Prioritylevel-Uid': '884716fb-258d-4819-98da-4cc7ce5b3730'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"non-existent-vmi\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "non-existent-vmi",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:49:00.108107 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:49:00.108300 conftest INFO Executing function fixture: autouse_fixtures
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:49:00.108860 tests.virt.node.general.test_vmi_reset INFO Attempting to reset a non-existent VMI (should fail)
____________________________________________ TestVMIResetErrorHandling.test_reset_paused_vmi_behavior _____________________________________________

self = <tests.virt.node.general.test_vmi_reset.TestVMIResetErrorHandling object at 0x7fc582dda520>
paused_vm_for_test = <utilities.virt.VirtualMachineForTests object at 0x7fc580110830>

    @pytest.mark.polarion("CNV-12380")
    def test_reset_paused_vmi_behavior(self, paused_vm_for_test):
        """
        Test Scenario TS-12: Verify reset on paused VMI behavior.
    
        Acceptance Criteria: AC-6
        Tier: 1 (Functional)
    
        Validates that:
        - Reset operation behavior on paused VMI is documented
        - System handles paused state appropriately during reset
        """
        LOGGER.info("Testing reset behavior on paused VMI")
    
        # Verify VM is paused
        assert (
            paused_vm_for_test.printable_status == paused_vm_for_test.Status.PAUSED
        ), f"VM should be paused, but status is: {paused_vm_for_test.printable_status}"
    
        # Capture boot count before reset
>       boot_count_before = get_vm_boot_count(vm=paused_vm_for_test)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/virt/node/general/test_vmi_reset.py:270: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
tests/virt/node/general/test_vmi_reset.py:34: in get_vm_boot_count
    reboot_count = run_ssh_commands(
.venv/lib/python3.14/site-packages/pyhelper_utils/shell.py:118: in run_ssh_commands
    with host.executor().session(timeout=tcp_timeout) as ssh_session:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/rrmngmnt/executor.py:35: in __enter__
    self.open()
.venv/lib/python3.14/site-packages/rrmngmnt/ssh.py:94: in open
    self._ssh.connect(
.venv/lib/python3.14/site-packages/paramiko/client.py:455: in connect
    server_key = t.get_remote_server_key()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <paramiko.Transport at 0x82e1d550 (connecting)>

    def get_remote_server_key(self):
        """
        Return the host key of the server (in client mode).
    
        .. note::
            Previously this call returned a tuple of ``(key type, key
            string)``. You can get the same effect by calling `.PKey.get_name`
            for the key type, and ``str(key)`` for the key string.
    
        :raises: `.SSHException` -- if no session is currently active.
    
        :return: public key (`.PKey`) of the remote server
        """
        if (not self.active) or (not self.initial_kex_done):
>           raise SSHException("No existing session")
E           paramiko.ssh_exception.SSHException: No existing session

.venv/lib/python3.14/site-packages/paramiko/transport.py:947: SSHException
-------------------------------------------------------------- Captured stderr setup --------------------------------------------------------------
------------------------------------------------------- TEARDOWN -------------------------------------------------------
2026-01-26T12:49:00.171842 ocp_resources.resource INFO Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 2 times]

-------------------------------------------- test_reset_paused_vmi_behavior --------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-01-26T12:49:00.171343 conftest INFO Executing function fixture: term_handler_scope_function
2026-01-26T12:49:00.171520 conftest INFO Executing function fixture: autouse_fixtures
2026-01-26T12:49:00.171685 conftest INFO Executing function fixture: paused_vm_for_test
2026-01-26T12:49:00.198453 timeout_sampler INFO Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp2x63cjcl-cnv-tests-pull-secret/pull-secrets.json'})
2026-01-26T12:49:00.198606 pyhelper_utils.shell INFO Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmp2x63cjcl-cnv-tests-pull-secret/pull-secrets.json command
2026-01-26T12:49:02.118621 timeout_sampler INFO Elapsed time: 0.00011587142944335938 [0:00:00.000116]
2026-01-26T12:49:02.120747 ocp_resources.resource INFO kind: VirtualMachine api version: kubevirt.io/v1
2026-01-26T12:49:02.120842 utilities.virt WARNING `os_login_param` not defined for fedora
2026-01-26T12:49:02.123572 utilities.virt INFO Setting random username and password
2026-01-26T12:49:02.153701 ocp_resources VirtualMachine INFO Create VirtualMachine paused-vm-for-reset-test-1769428142-1206377
2026-01-26T12:49:02.153810 ocp_resources VirtualMachine INFO Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'paused-vm-for-reset-test'}, 'name': 'paused-vm-for-reset-test-1769428142-1206377'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'paused-vm-for-reset-test-1769428142-1206377', 'kubevirt.io/domain': 'paused-vm-for-reset-test-1769428142-1206377', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}
2026-01-26T12:49:02.343184 timeout_sampler INFO Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)
2026-01-26T12:49:02.347945 timeout_sampler INFO Elapsed time: 0.000194549560546875 [0:00:00.000195]
2026-01-26T12:49:02.348107 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
2026-01-26T12:49:02.348162 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 status to be Running
2026-01-26T12:49:02.348211 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)
2026-01-26T12:49:03.353631 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 is Scheduling
2026-01-26T12:49:08.369698 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 is Scheduled
2026-01-26T12:49:09.432255 ocp_resources VirtualMachineInstance INFO Status of VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 is Running
2026-01-26T12:49:09.432462 timeout_sampler INFO Elapsed time: 7.021700143814087 [0:00:07.021700]
2026-01-26T12:49:09.432771 ocp_resources VirtualMachineInstance INFO Wait for VirtualMachineInstance/paused-vm-for-reset-test-1769428142-1206377's 'AgentConnected' condition to be 'True'
2026-01-26T12:49:09.432998 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 is created
2026-01-26T12:49:09.433088 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)
2026-01-26T12:49:09.432677 utilities.virt INFO Wait until guest agent is active on paused-vm-for-reset-test-1769428142-1206377
2026-01-26T12:49:09.447736 timeout_sampler INFO Elapsed time: 8.869171142578125e-05 [0:00:00.000089]
2026-01-26T12:49:09.447932 timeout_sampler INFO Waiting for 719.9850871562958 seconds [0:11:59.985087], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)
2026-01-26T12:49:29.541371 timeout_sampler INFO Elapsed time: 20.090085983276367 [0:00:20.090086]
2026-01-26T12:49:29.541556 timeout_sampler INFO Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)
2026-01-26T12:49:29.541489 utilities.virt INFO Wait for paused-vm-for-reset-test-1769428142-1206377 network interfaces
2026-01-26T12:49:29.543846 timeout_sampler INFO Elapsed time: 0.00013685226440429688 [0:00:00.000137]
2026-01-26T12:49:29.543913 utilities.virt INFO Wait for paused-vm-for-reset-test-1769428142-1206377 SSH connectivity.
2026-01-26T12:49:29.543963 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/paused-vm-for-reset-test-1769428142-1206377 -n node-general-test-vmi-reset 22' bK8JagvA6W4oqmBk@paused-vm-for-reset-test-1769428142-1206377
2026-01-26T12:49:45.091523 timeout_sampler INFO Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})
2026-01-26T12:49:45.091636 Host INFO [paused-vm-for-reset-test-1769428142-1206377] Executing command exit
2026-01-26T12:49:45.137015 paramiko.transport INFO Connected (version 2.0, client OpenSSH_9.8)
2026-01-26T12:49:45.154414 paramiko.transport INFO Authentication (publickey) successful!
2026-01-26T12:49:45.367830 timeout_sampler INFO Elapsed time: 0.00013399124145507812 [0:00:00.000134]
2026-01-26T12:49:45.368183 ocp_resources.resource INFO Trying to get client via new_client_from_config
2026-01-26T12:49:45.374469 ocp_resources.resource INFO kind: VirtualMachineInstance api version: kubevirt.io/v1
2026-01-26T12:49:45.442045 ocp_resources VirtualMachineInstance INFO Wait until VirtualMachineInstance paused-vm-for-reset-test-1769428142-1206377 is Paused
2026-01-26T12:49:45.442215 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.virtual_machine_instance.get_vmi_active_condition)
2026-01-26T12:49:46.458274 timeout_sampler INFO Elapsed time: 1.0132126808166504 [0:00:01.013213]
-------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
2026-01-26T12:49:46.458770 tests.virt.node.general.test_vmi_reset INFO Testing reset behavior on paused VMI
2026-01-26T12:49:46.461106 utilities.virt INFO SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/paused-vm-for-reset-test-1769428142-1206377 -n node-general-test-vmi-reset 22' bK8JagvA6W4oqmBk@paused-vm-for-reset-test-1769428142-1206377
------------------------------------------------------------ Captured stderr teardown -------------------------------------------------------------
self = <tests.virt.node.general.test_vmi_reset.TestVMIResetErrorHandling object at 0x7fc582dda520>
paused_vm_for_test = <utilities.virt.VirtualMachineForTests object at 0x7fc580110830>

    @pytest.mark.polarion("CNV-12380")
    def test_reset_paused_vmi_behavior(self, paused_vm_for_test):
        """
        Test Scenario TS-12: Verify reset on paused VMI behavior.
    
        Acceptance Criteria: AC-6
        Tier: 1 (Functional)
    
        Validates that:
        - Reset operation behavior on paused VMI is documented
        - System handles paused state appropriately during reset
        """
        LOGGER.info("Testing reset behavior on paused VMI")
    
        # Verify VM is paused
        assert (
            paused_vm_for_test.printable_status == paused_vm_for_test.Status.PAUSED
        ), f"VM should be paused, but status is: {paused_vm_for_test.printable_status}"
    
        # Capture boot count before reset
>       boot_count_before = get_vm_boot_count(vm=paused_vm_for_test)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/virt/node/general/test_vmi_reset.py:270: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
tests/virt/node/general/test_vmi_reset.py:34: in get_vm_boot_count
    reboot_count = run_ssh_commands(
.venv/lib/python3.14/site-packages/pyhelper_utils/shell.py:118: in run_ssh_commands
    with host.executor().session(timeout=tcp_timeout) as ssh_session:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/rrmngmnt/executor.py:35: in __enter__
    self.open()
.venv/lib/python3.14/site-packages/rrmngmnt/ssh.py:94: in open
    self._ssh.connect(
.venv/lib/python3.14/site-packages/paramiko/client.py:455: in connect
    server_key = t.get_remote_server_key()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <paramiko.Transport at 0x82e1d550 (connecting)>

    def get_remote_server_key(self):
        """
        Return the host key of the server (in client mode).
    
        .. note::
            Previously this call returned a tuple of ``(key type, key
            string)``. You can get the same effect by calling `.PKey.get_name`
            for the key type, and ``str(key)`` for the key string.
    
        :raises: `.SSHException` -- if no session is currently active.
    
        :return: public key (`.PKey`) of the remote server
        """
        if (not self.active) or (not self.initial_kex_done):
>           raise SSHException("No existing session")
E           paramiko.ssh_exception.SSHException: No existing session

.venv/lib/python3.14/site-packages/paramiko/transport.py:947: SSHException
------------------------------------------------------- TEARDOWN -------------------------------------------------------
2026-01-26T12:50:12.203928 ocp_resources VirtualMachine INFO Delete VirtualMachine paused-vm-for-reset-test-1769428142-1206377
2026-01-26T12:50:12.224167 ocp_resources VirtualMachine INFO Deleting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'annotations': {'kubemacpool.io/transaction-timestamp': '2026-01-26T11:49:02.322946306Z', 'kubevirt.io/latest-observed-api-version': 'v1', 'kubevirt.io/storage-observed-api-version': 'v1'}, 'creationTimestamp': '2026-01-26T11:49:02Z', 'finalizers': ['kubevirt.io/virtualMachineControllerFinalize'], 'generation': 2, 'labels': {'kubevirt.io/vm': 'paused-vm-for-reset-test'}, 'managedFields': [{'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:labels': {'.': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:template': {'.': {}, 'f:metadata': {'.': {}, 'f:creationTimestamp': {}, 'f:labels': {'.': {}, 'f:debugLogs': {}, 'f:kubevirt.io/domain': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:domain': {'.': {}, 'f:cpu': {'.': {}, 'f:cores': {}}, 'f:devices': {'.': {}, 'f:disks': {}, 'f:interfaces': {}, 'f:rng': {}}, 'f:machine': {'.': {}, 'f:type': {}}, 'f:memory': {'.': {}, 'f:guest': {}}}, 'f:networks': {}, 'f:terminationGracePeriodSeconds': {}, 'f:volumes': {}}}}}, 'manager': 'OpenAPI-Generator', 'operation': 'Update', 'time': '2026-01-26T11:49:02Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:spec': {'f:runStrategy': {}}}, 'manager': 'virt-api', 'operation': 'Update', 'time': '2026-01-26T11:49:02Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:kubevirt.io/latest-observed-api-version': {}, 'f:kubevirt.io/storage-observed-api-version': {}}, 'f:finalizers': {'.': {}, 'v:"kubevirt.io/virtualMachineControllerFinalize"': {}}}}, 'manager': 'virt-controller', 'operation': 'Update', 'time': '2026-01-26T11:49:02Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:conditions': {}, 'f:created': {}, 'f:desiredGeneration': {}, 'f:observedGeneration': {}, 'f:printableStatus': {}, 'f:runStrategy': {}, 'f:volumeSnapshotStatuses': {}}}, 'manager': 'virt-controller', 'operation': 'Update', 'subresource': 'status', 'time': '2026-01-26T11:49:45Z'}], 'name': 'paused-vm-for-reset-test-1769428142-1206377', 'namespace': 'node-general-test-vmi-reset', 'resourceVersion': '271769', 'uid': 'acd45c18-aa9b-44ad-8397-db5e7e9bf030'}, 'spec': {'runStrategy': 'Always', 'template': {'metadata': {'creationTimestamp': None, 'labels': {'debugLogs': 'true', 'kubevirt.io/domain': 'paused-vm-for-reset-test-1769428142-1206377', 'kubevirt.io/vm': 'paused-vm-for-reset-test-1769428142-1206377'}}, 'spec': {'architecture': 'amd64', 'domain': {'cpu': {'cores': 1}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'macAddress': '02:2c:fa:00:00:06', 'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'firmware': {'serial': 'd5abea45-b7d5-48ed-8513-88cec2cabc1b'}, 'machine': {'type': 'pc-q35-rhel9.6.0'}, 'memory': {'guest': '1Gi'}, 'resources': {}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'cloudInitNoCloud': {'userData': '*******'}, 'name': 'cloudinitdisk'}]}}}, 'status': {'conditions': [{'lastProbeTime': None, 'lastTransitionTime': '2026-01-26T11:49:45Z', 'message': 'the status of pod readiness gate "kubevirt.io/virtual-machine-unpaused" is not "True", but False', 'reason': 'ReadinessGatesNotReady', 'status': 'False', 'type': 'Ready'}, {'lastProbeTime': None, 'lastTransitionTime': None, 'status': 'True', 'type': 'LiveMigratable'}, {'lastProbeTime': None, 'lastTransitionTime': None, 'status': 'True', 'type': 'StorageLiveMigratable'}, {'lastProbeTime': '2026-01-26T11:49:28Z', 'lastTransitionTime': None, 'status': 'True', 'type': 'AgentConnected'}, {'lastProbeTime': '2026-01-26T11:49:45Z', 'lastTransitionTime': '2026-01-26T11:49:45Z', 'message': 'VMI was paused by user', 'reason': 'PausedByUser', 'status': 'True', 'type': 'Paused'}], 'created': True, 'desiredGeneration': 2, 'observedGeneration': 2, 'printableStatus': 'Paused', 'runStrategy': 'Always', 'volumeSnapshotStatuses': [{'enabled': False, 'name': 'containerdisk', 'reason': 'Snapshot is not supported for this volumeSource type [containerdisk]'}, {'enabled': False, 'name': 'cloudinitdisk', 'reason': 'Snapshot is not supported for this volumeSource type [cloudinitdisk]'}]}}
2026-01-26T12:50:12.267154 ocp_resources VirtualMachine INFO Wait until VirtualMachine paused-vm-for-reset-test-1769428142-1206377 is deleted
2026-01-26T12:50:12.267378 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:50:17.129829 paramiko.transport ERROR Exception (client): Error reading SSH protocol banner
2026-01-26T12:50:17.130854 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:50:17.130964 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner
2026-01-26T12:50:17.131014 paramiko.transport ERROR     buf = self.packetizer.readline(timeout)
2026-01-26T12:50:17.131050 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline
2026-01-26T12:50:17.131084 paramiko.transport ERROR     buf += self._read_timeout(timeout)
2026-01-26T12:50:17.131119 paramiko.transport ERROR            ~~~~~~~~~~~~~~~~~~^^^^^^^^^
2026-01-26T12:50:17.131149 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout
2026-01-26T12:50:17.131181 paramiko.transport ERROR     raise socket.timeout()
2026-01-26T12:50:17.131211 paramiko.transport ERROR TimeoutError
2026-01-26T12:50:17.131242 paramiko.transport ERROR 
2026-01-26T12:50:17.131274 paramiko.transport ERROR During handling of the above exception, another exception occurred:
2026-01-26T12:50:17.131303 paramiko.transport ERROR 
2026-01-26T12:50:17.131333 paramiko.transport ERROR Traceback (most recent call last):
2026-01-26T12:50:17.131371 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run
2026-01-26T12:50:17.131402 paramiko.transport ERROR     self._check_banner()
2026-01-26T12:50:17.131431 paramiko.transport ERROR     ~~~~~~~~~~~~~~~~~~^^
2026-01-26T12:50:17.131459 paramiko.transport ERROR   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner
2026-01-26T12:50:17.131487 paramiko.transport ERROR     raise SSHException(
2026-01-26T12:50:17.131516 paramiko.transport ERROR         "Error reading SSH protocol banner" + str(e)
2026-01-26T12:50:17.131545 paramiko.transport ERROR     )
2026-01-26T12:50:17.131574 paramiko.transport ERROR paramiko.ssh_exception.SSHException: Error reading SSH protocol banner
2026-01-26T12:50:17.131603 paramiko.transport ERROR 
2026-01-26T12:51:02.705407 timeout_sampler INFO Elapsed time: 50.42490220069885 [0:00:50.424902]
2026-01-26T12:51:02.705642 ocp_resources Namespace INFO Delete Namespace node-general-test-vmi-reset
2026-01-26T12:51:02.725907 ocp_resources Namespace INFO Deleting {'kind': 'Namespace', 'apiVersion': 'v1', 'metadata': {'name': 'node-general-test-vmi-reset', 'uid': '7faebb88-8cc1-40e4-8b3c-f0419401a420', 'resourceVersion': '267451', 'creationTimestamp': '2026-01-26T11:40:14Z', 'labels': {'kubernetes.io/metadata.name': 'node-general-test-vmi-reset', 'pod-security.kubernetes.io/audit': 'restricted', 'pod-security.kubernetes.io/audit-version': 'latest', 'pod-security.kubernetes.io/warn': 'restricted', 'pod-security.kubernetes.io/warn-version': 'latest'}, 'annotations': {'openshift.io/description': '', 'openshift.io/display-name': '', 'openshift.io/requester': 'unprivileged-user', 'openshift.io/sa.scc.mcs': 's0:c26,c20', 'openshift.io/sa.scc.supplemental-groups': '1000690000/10000', 'openshift.io/sa.scc.uid-range': '1000690000/10000', 'security.openshift.io/MinimallySufficientPodSecurityStandard': 'restricted'}, 'managedFields': [{'manager': 'pod-security-admission-label-synchronization-controller', 'operation': 'Apply', 'apiVersion': 'v1', 'time': '2026-01-26T11:40:14Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:security.openshift.io/MinimallySufficientPodSecurityStandard': {}}, 'f:labels': {'f:pod-security.kubernetes.io/audit': {}, 'f:pod-security.kubernetes.io/audit-version': {}, 'f:pod-security.kubernetes.io/warn': {}, 'f:pod-security.kubernetes.io/warn-version': {}}}}}, {'manager': 'cluster-policy-controller', 'operation': 'Update', 'apiVersion': 'v1', 'time': '2026-01-26T11:40:14Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:openshift.io/sa.scc.mcs': {}, 'f:openshift.io/sa.scc.supplemental-groups': {}, 'f:openshift.io/sa.scc.uid-range': {}}}}}, {'manager': 'openshift-apiserver', 'operation': 'Update', 'apiVersion': 'v1', 'time': '2026-01-26T11:40:14Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:openshift.io/description': {}, 'f:openshift.io/display-name': {}, 'f:openshift.io/requester': {}}, 'f:labels': {'.': {}, 'f:kubernetes.io/metadata.name': {}}}}}, {'manager': 'openshift-controller-manager', 'operation': 'Update', 'apiVersion': 'v1', 'time': '2026-01-26T11:40:14Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:spec': {'f:finalizers': {}}}, 'subresource': 'finalize'}]}, 'spec': {'finalizers': ['kubernetes']}, 'status': {'phase': 'Active'}}
2026-01-26T12:51:02.749279 ocp_resources Namespace INFO Wait until Namespace node-general-test-vmi-reset is deleted
2026-01-26T12:51:02.749425 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:51:10.779651 timeout_sampler INFO Elapsed time: 8.027109861373901 [0:00:08.027110]
================================================================ warnings summary =================================================================
tests/virt/node/general/test_vmi_reset.py: 28 warnings
tests/deprecated_api/test_deprecation_audit_logs.py: 4 warnings
.venv/lib/python3.14/site-packages/kubernetes/client/exceptions.py:91: 2 warnings
  /home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/exceptions.py:91: DeprecationWarning: HTTPResponse.getheaders() is deprecated and will be removed in urllib3 v2.1.0. Instead access HTTPResponse.headers directly.
    self.headers = http_resp.getheaders()

tests/virt/node/general/test_vmi_reset.py::TestVMIResetErrorHandling::test_reset_stopped_vmi_fails
tests/virt/node/general/test_vmi_reset.py::TestVMIResetErrorHandling::test_reset_non_existent_vmi_fails
  /home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:44: DeprecationWarning: HTTPResponse.getheaders() is deprecated and will be removed in urllib3 v2.1.0. Instead access HTTPResponse.headers directly.
    return self.urllib3_response.getheaders()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
============================================================= short test summary info =============================================================
FAILED tests/virt/node/general/test_vmi_reset.py::test_reset_via_virtctl_command[vm-for-virtctl-reset-test] - ValueError: too many values to unpack (expected 2, got 3)
FAILED tests/virt/node/general/test_vmi_reset.py::TestVMIResetRBAC::test_unprivileged_user_reset_without_rbac - Failed: Namespace admin should not be able to reset VMI without kubevirt.io:edit RoleBinding!
FAILED tests/virt/node/general/test_vmi_reset.py::TestVMIResetRBAC::test_unprivileged_user_reset_with_rbac - timeout_sampler.TimeoutExpiredError: Timed Out: 120
FAILED tests/virt/node/general/test_vmi_reset.py::TestVMIResetErrorHandling::test_reset_stopped_vmi_fails - kubernetes.client.exceptions.ApiException: (404)
FAILED tests/virt/node/general/test_vmi_reset.py::TestVMIResetErrorHandling::test_reset_non_existent_vmi_fails - kubernetes.client.exceptions.ApiException: (404)
FAILED tests/virt/node/general/test_vmi_reset.py::TestVMIResetErrorHandling::test_reset_paused_vmi_behavior - paramiko.ssh_exception.SSHException: No existing session
============================================== 6 failed, 3 passed, 36 warnings in 892.81s (0:14:52) ===============================================
2026-01-26T12:53:41.306214 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:53:41.309455 timeout_sampler INFO Elapsed time: 9.822845458984375e-05 [0:00:00.000098]
2026-01-26T12:53:41.349641 timeout_sampler INFO Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)
2026-01-26T12:53:47.367846 timeout_sampler INFO Elapsed time: 6.014702558517456 [0:00:06.014703]
