============================= test session starts ==============================
platform linux -- Python 3.14.0, pytest-9.0.2, pluggy-1.6.0
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /home/mvavrine/cnv/openshift-virtualization-tests
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, html-4.1.1, order-1.3.0, repeat-0.9.4, progress-1.4.0, dependency-0.6.0, jira-0.3.22, metadata-3.1.1, testconfig-0.2.0, benchmark-5.2.3, mock-3.15.1
collected 10 items

tests/virt/node/general/test_vmi_hard_reset.py .
_ 1 of 10 completed, 1 Pass, 0 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun _

tests/virt/node/general/test_vmi_hard_reset.py .
_ 2 of 10 completed, 2 Pass, 0 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun _

tests/virt/node/general/test_vmi_hard_reset.py .
_ 3 of 10 completed, 3 Pass, 0 Fail, 0 Skip, 0 XPass, 0 XFail, 0 Error, 0 ReRun _

tests/virt/node/general/test_vmi_hard_reset.py E

_ ERROR at setup of TestVMIHardResetVirtctl.test_virtctl_reset_triggers_guest_reboot _

vm_for_hard_reset_virtctl = <utilities.virt.VirtualMachineForTests object at 0x7fb72f439a90>

    @pytest.fixture(scope="class")
    def vm_virtctl_reset_and_running(vm_for_hard_reset_virtctl: VirtualMachineForTests) -> None:
        LOGGER.info(f"Resetting VMI {vm_for_hard_reset_virtctl.name} via virtctl")
        run_virtctl_command(
            command=shlex.split(f"reset {vm_for_hard_reset_virtctl.name}"),
            namespace=vm_for_hard_reset_virtctl.namespace,
            check=True,
        )
>       wait_for_running_vm(vm=vm_for_hard_reset_virtctl)

tests/virt/node/general/test_vmi_hard_reset.py:119: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
utilities/virt.py:1697: in wait_for_running_vm
    wait_for_ssh_connectivity(vm=vm, timeout=ssh_timeout)
utilities/virt.py:1539: in wait_for_ssh_connectivity
    for sample in TimeoutSampler(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72f2ef070>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
                    raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
    
                time.sleep(self.sleep)
                elapsed_time = None
    
            finally:
                if self.print_log and elapsed_time:
                    LOGGER.info(_elapsed_time_log(elapsed_time=elapsed_time))
    
>       raise TimeoutExpiredError(self._get_exception_log(exp=last_exp), last_exp=last_exp)
E       timeout_sampler.TimeoutExpiredError: Timed Out: 120
E       Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60}
E       Last exception: SSHException: Error reading SSH protocol banner.

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:182: TimeoutExpiredError
---------------------------- Captured stderr setup -----------------------------
2026-02-12T13:03:48.403045 ocp_resources.resource [32mINFO[0m Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 9 times][0m

--------------------------------------- test_virtctl_reset_triggers_guest_reboot ---------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-02-12T13:03:48.402352 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:03:48.402495 conftest [32mINFO[0m Executing class fixture: term_handler_scope_class[0m
2026-02-12T13:03:48.402658 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
2026-02-12T13:03:48.402823 conftest [32mINFO[0m Executing class fixture: vm_for_hard_reset_virtctl[0m
2026-02-12T13:03:51.380724 timeout_sampler [32mINFO[0m Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpvkes65f4-cnv-tests-pull-secret/pull-secrets.json'})[0m
2026-02-12T13:03:51.380994 pyhelper_utils.shell [32mINFO[0m Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpvkes65f4-cnv-tests-pull-secret/pull-secrets.json command[0m
2026-02-12T13:03:53.377726 timeout_sampler [32mINFO[0m Elapsed time: 0.00020074844360351562 [0:00:00.000201][0m
2026-02-12T13:03:53.381293 ocp_resources.resource [32mINFO[0m kind: VirtualMachine api version: kubevirt.io/v1[0m
2026-02-12T13:03:53.381453 utilities.virt [33mWARNING[0m `os_login_param` not defined for fedora[0m
2026-02-12T13:03:53.527975 utilities.virt [32mINFO[0m Setting random username and password[0m
2026-02-12T13:03:53.563746 ocp_resources VirtualMachine [32mINFO[0m Create VirtualMachine vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:03:53.563891 ocp_resources VirtualMachine [32mINFO[0m Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-hard-reset-virtctl'}, 'name': 'vm-hard-reset-virtctl-1770897833-3811'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-hard-reset-virtctl-1770897833-3811', 'kubevirt.io/domain': 'vm-hard-reset-virtctl-1770897833-3811', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}[0m
2026-02-12T13:03:54.311498 timeout_sampler [32mINFO[0m Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)[0m
2026-02-12T13:03:54.664069 timeout_sampler [32mINFO[0m Elapsed time: 0.0001513957977294922 [0:00:00.000151][0m
2026-02-12T13:03:54.664343 ocp_resources.resource [32mINFO[0m kind: VirtualMachineInstance api version: kubevirt.io/v1[0m
2026-02-12T13:03:54.664440 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 status to be Running[0m
2026-02-12T13:03:54.664528 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)[0m
2026-02-12T13:03:54.812636 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is Scheduling[0m
2026-02-12T13:04:06.399231 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is Scheduled[0m
2026-02-12T13:04:09.869917 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is Running[0m
2026-02-12T13:04:09.870079 timeout_sampler [32mINFO[0m Elapsed time: 15.041622400283813 [0:00:15.041622][0m
2026-02-12T13:04:09.870372 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance/vm-hard-reset-virtctl-1770897833-3811's 'AgentConnected' condition to be 'True'[0m
2026-02-12T13:04:09.870580 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is created[0m
2026-02-12T13:04:09.870644 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)[0m
2026-02-12T13:04:09.870294 utilities.virt [32mINFO[0m Wait until guest agent is active on vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:04:10.024698 timeout_sampler [32mINFO[0m Elapsed time: 5.650520324707031e-05 [0:00:00.000057][0m
2026-02-12T13:04:10.024843 timeout_sampler [32mINFO[0m Waiting for 719.845752954483 seconds [0:11:59.845753], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)[0m
2026-02-12T13:05:02.437782 timeout_sampler [32mINFO[0m Elapsed time: 52.260642528533936 [0:00:52.260643][0m
2026-02-12T13:05:02.438014 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)[0m
2026-02-12T13:05:02.437915 utilities.virt [32mINFO[0m Wait for vm-hard-reset-virtctl-1770897833-3811 network interfaces[0m
2026-02-12T13:05:02.586132 timeout_sampler [32mINFO[0m Elapsed time: 6.008148193359375e-05 [0:00:00.000060][0m
2026-02-12T13:05:02.586332 utilities.virt [32mINFO[0m Wait for vm-hard-reset-virtctl-1770897833-3811 SSH connectivity.[0m
2026-02-12T13:05:02.586429 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-hard-reset-virtctl-1770897833-3811/node-general-test-vmi-hard-reset 22' _UW34n-s7lcCcT4P@vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:05:06.188192 timeout_sampler [32mINFO[0m Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})[0m
2026-02-12T13:05:06.188408 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:05:06.930030 paramiko.transport [32mINFO[0m Connected (version 2.0, client OpenSSH_9.8)[0m
2026-02-12T13:05:07.486983 paramiko.transport [32mINFO[0m Authentication (publickey) successful![0m
2026-02-12T13:05:08.119696 timeout_sampler [32mINFO[0m Elapsed time: 0.00023365020751953125 [0:00:00.000234][0m
2026-02-12T13:05:08.120078 conftest [32mINFO[0m Executing class fixture: boot_count_before_virtctl_reset[0m
2026-02-12T13:05:08.120275 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-hard-reset-virtctl-1770897833-3811/node-general-test-vmi-hard-reset 22' _UW34n-s7lcCcT4P@vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:05:12.331924 paramiko.transport [32mINFO[0m Connected (version 2.0, client OpenSSH_9.8)[0m
2026-02-12T13:05:12.934568 paramiko.transport [32mINFO[0m Authentication (publickey) successful![0m
2026-02-12T13:05:16.938046 pyhelper_utils.shell [32mINFO[0m [SSH][vm-hard-reset-virtctl-1770897833-3811] Executed: journalctl --list-boots | wc -l, rc:0, out: 2
, error: [0m
2026-02-12T13:05:16.938564 pyhelper_utils.shell [32mINFO[0m Running virtctl -n node-general-test-vmi-hard-reset --kubeconfig /tmp/tmp1tp29_0x-cnv-tests-kubeconfig/kubeconfig reset vm-hard-reset-virtctl-1770897833-3811 command[0m
2026-02-12T13:05:16.938363 conftest [32mINFO[0m Executing class fixture: vm_virtctl_reset_and_running[0m
2026-02-12T13:05:16.938477 tests.virt.node.general.test_vmi_hard_reset [32mINFO[0m Resetting VMI vm-hard-reset-virtctl-1770897833-3811 via virtctl[0m
2026-02-12T13:05:17.676950 pyhelper_utils.shell [31mERROR[0m Failed to run ['virtctl', '-n', 'node-general-test-vmi-hard-reset', '--kubeconfig', '/tmp/tmp1tp29_0x-cnv-tests-kubeconfig/kubeconfig', 'reset', 'vm-hard-reset-virtctl-1770897833-3811']. rc: 0, out: VMI vm-hard-reset-virtctl-1770897833-3811 was scheduled to reset
, error: {"component":"portforward","level":"info","msg":"Reset VMI","pos":"virtualmachineinstance_expansion.go:183","timestamp":"2026-02-12T12:05:16.952272Z"}
[0m
2026-02-12T13:05:17.677095 timeout_sampler [32mINFO[0m Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)[0m
2026-02-12T13:05:18.039997 timeout_sampler [32mINFO[0m Elapsed time: 8.106231689453125e-05 [0:00:00.000081][0m
2026-02-12T13:05:18.040316 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 status to be Running[0m
2026-02-12T13:05:18.040406 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)[0m
2026-02-12T13:05:18.187712 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is Running[0m
2026-02-12T13:05:18.187879 timeout_sampler [32mINFO[0m Elapsed time: 5.793571472167969e-05 [0:00:00.000058][0m
2026-02-12T13:05:18.188184 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance/vm-hard-reset-virtctl-1770897833-3811's 'AgentConnected' condition to be 'True'[0m
2026-02-12T13:05:18.188402 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is created[0m
2026-02-12T13:05:18.188104 utilities.virt [32mINFO[0m Wait until guest agent is active on vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:05:18.188498 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)[0m
2026-02-12T13:05:18.353836 timeout_sampler [32mINFO[0m Elapsed time: 5.7697296142578125e-05 [0:00:00.000058][0m
2026-02-12T13:05:18.354023 timeout_sampler [32mINFO[0m Waiting for 719.8343968391418 seconds [0:11:59.834397], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)[0m
2026-02-12T13:06:01.232900 timeout_sampler [32mINFO[0m Elapsed time: 42.722702503204346 [0:00:42.722703][0m
2026-02-12T13:06:01.233095 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)[0m
2026-02-12T13:06:01.233017 utilities.virt [32mINFO[0m Wait for vm-hard-reset-virtctl-1770897833-3811 network interfaces[0m
2026-02-12T13:06:01.389480 timeout_sampler [32mINFO[0m Elapsed time: 5.221366882324219e-05 [0:00:00.000052][0m
2026-02-12T13:06:01.389607 utilities.virt [32mINFO[0m Wait for vm-hard-reset-virtctl-1770897833-3811 SSH connectivity.[0m
2026-02-12T13:06:01.389679 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-hard-reset-virtctl-1770897833-3811/node-general-test-vmi-hard-reset 22' _UW34n-s7lcCcT4P@vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:06:04.938248 timeout_sampler [32mINFO[0m Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})[0m
2026-02-12T13:06:04.938434 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:06:19.991271 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:06:20.002183 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:06:20.002345 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:06:20.002428 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:06:20.002485 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:06:20.002523 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:06:20.002552 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:06:20.002580 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:06:20.002607 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:06:20.002634 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:06:20.002661 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:20.002690 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:06:20.002718 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:20.002745 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:06:20.002771 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:06:20.002797 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:06:20.002824 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:06:20.002850 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:06:20.002876 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:06:20.002902 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:06:20.002927 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:06:20.002952 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:06:20.002977 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:25.003329 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:06:40.044455 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:06:40.045403 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:06:40.045489 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:06:40.045529 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:06:40.045563 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:06:40.045593 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:06:40.045622 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:06:40.045651 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:06:40.045680 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:06:40.045708 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:06:40.045737 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:40.045766 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:06:40.045794 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:40.045821 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:06:40.045852 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:06:40.045879 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:06:40.045913 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:06:40.045939 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:06:40.045968 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:06:40.045997 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:06:40.046025 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:06:40.046052 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:06:40.046078 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:45.046383 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:07:00.086329 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:07:00.087138 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:00.087224 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:07:00.087264 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:07:00.087296 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:07:00.087324 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:07:00.087353 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:07:00.087379 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:07:00.087406 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:07:00.087431 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:07:00.087457 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:00.087484 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:07:00.087514 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:00.087540 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:00.087568 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:07:00.087594 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:07:00.087622 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:07:00.087647 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:07:00.087672 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:07:00.087697 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:07:00.087722 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:07:00.087747 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:07:00.087771 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:05.087980 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:07:20.128312 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:07:20.129275 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:20.129388 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:07:20.129430 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:07:20.129464 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:07:20.129496 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:07:20.129529 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:07:20.129564 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:07:20.129598 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:07:20.129626 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:07:20.129659 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:20.129689 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:07:20.129717 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:20.129749 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:20.129778 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:07:20.129806 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:07:20.129840 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:07:20.129871 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:07:20.129897 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:07:20.129924 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:07:20.129959 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:07:20.129998 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:07:20.130035 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:25.130573 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:07:40.173605 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:07:40.174611 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:40.174699 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:07:40.174746 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:07:40.174780 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:07:40.174811 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:07:40.174842 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:07:40.174871 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:07:40.174901 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:07:40.174932 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:07:40.174961 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:40.174996 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:07:40.175024 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:40.175053 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:40.175082 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:07:40.175110 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:07:40.175138 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:07:40.175166 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:07:40.175202 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:07:40.175232 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:07:40.175260 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:07:40.175288 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:07:40.175317 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:45.175724 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:08:00.215866 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:08:00.216750 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:08:00.216858 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:08:00.216899 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:08:00.216930 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:08:00.216958 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:08:00.216985 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:08:00.217011 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:08:00.217038 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:08:00.217064 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:08:00.217091 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:08:00.217119 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:08:00.217146 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:08:00.217172 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:08:00.217208 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:08:00.217238 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:08:00.217264 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:08:00.217290 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:08:00.217316 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:08:00.217342 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:08:00.217368 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:08:00.217393 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:08:00.217432 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:08:05.218046 pyhelper_utils.shell [32mINFO[0m Running virtctl -n node-general-test-vmi-hard-reset --kubeconfig /tmp/tmp1tp29_0x-cnv-tests-kubeconfig/kubeconfig vnc screenshot vm-hard-reset-virtctl-1770897833-3811 -f /home/mvavrine/cnv/openshift-virtualization-tests/tests-collected-info/node-general-test-vmi-hard-reset-vm-hard-reset-virtctl-1770897833-3811.png command[0m
_ 4 of 10 completed, 3 Pass, 0 Fail, 0 Skip, 0 XPass, 0 XFail, 1 Error, 0 ReRun _

tests/virt/node/general/test_vmi_hard_reset.py F

_________ TestVMIHardResetRBAC.test_unprivileged_user_cannot_reset_vmi _________

self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetRBAC object at 0x7fb734c19bd0>
unprivileged_vmi_for_reset = <ocp_resources.virtual_machine_instance.VirtualMachineInstance object at 0x7fb72f1e0fc0>

    @pytest.mark.polarion("CNV-12378")
    def test_unprivileged_user_cannot_reset_vmi(
        self,
        unprivileged_vmi_for_reset: VirtualMachineInstance,
    ) -> None:
        """[NEGATIVE] Test that an unprivileged user cannot reset a VMI.
    
        Steps:
            1. Attempt to reset the VMI using an unprivileged client
    
        Expected:
            - Reset operation fails with a 403 Forbidden error
        """
>       with pytest.raises(ForbiddenError):
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       Failed: DID NOT RAISE <class 'kubernetes.dynamic.exceptions.ForbiddenError'>

tests/virt/node/general/test_vmi_hard_reset.py:348: Failed
---------------------------- Captured stderr setup -----------------------------
2026-02-12T13:08:13.972236 ocp_resources.resource [32mINFO[0m Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 4 times][0m

--------------------------------------- test_unprivileged_user_cannot_reset_vmi ---------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-02-12T13:08:13.971586 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:08:13.971705 conftest [32mINFO[0m Executing class fixture: term_handler_scope_class[0m
2026-02-12T13:08:13.971862 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
2026-02-12T13:08:13.972041 conftest [32mINFO[0m Executing class fixture: vm_for_rbac_reset[0m
2026-02-12T13:08:16.956282 timeout_sampler [32mINFO[0m Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpnriffpfs-cnv-tests-pull-secret/pull-secrets.json'})[0m
2026-02-12T13:08:16.956497 pyhelper_utils.shell [32mINFO[0m Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpnriffpfs-cnv-tests-pull-secret/pull-secrets.json command[0m
2026-02-12T13:08:18.861833 timeout_sampler [32mINFO[0m Elapsed time: 0.00017690658569335938 [0:00:00.000177][0m
2026-02-12T13:08:18.864140 ocp_resources.resource [32mINFO[0m kind: VirtualMachine api version: kubevirt.io/v1[0m
2026-02-12T13:08:18.864263 utilities.virt [33mWARNING[0m `os_login_param` not defined for fedora[0m
2026-02-12T13:08:19.019400 utilities.virt [32mINFO[0m Setting random username and password[0m
2026-02-12T13:08:19.065131 ocp_resources VirtualMachine [32mINFO[0m Create VirtualMachine vm-rbac-reset-1770898098-8640313[0m
2026-02-12T13:08:19.065304 ocp_resources VirtualMachine [32mINFO[0m Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-rbac-reset'}, 'name': 'vm-rbac-reset-1770898098-8640313'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-rbac-reset-1770898098-8640313', 'kubevirt.io/domain': 'vm-rbac-reset-1770898098-8640313', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}[0m
2026-02-12T13:08:19.810548 timeout_sampler [32mINFO[0m Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)[0m
2026-02-12T13:08:20.153444 timeout_sampler [32mINFO[0m Elapsed time: 0.00017380714416503906 [0:00:00.000174][0m
2026-02-12T13:08:20.153662 ocp_resources.resource [32mINFO[0m kind: VirtualMachineInstance api version: kubevirt.io/v1[0m
2026-02-12T13:08:20.153726 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance vm-rbac-reset-1770898098-8640313 status to be Running[0m
2026-02-12T13:08:20.153786 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)[0m
2026-02-12T13:08:20.308837 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-rbac-reset-1770898098-8640313 is Scheduling[0m
2026-02-12T13:08:28.403439 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-rbac-reset-1770898098-8640313 is Scheduled[0m
2026-02-12T13:08:33.004257 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-rbac-reset-1770898098-8640313 is Running[0m
2026-02-12T13:08:33.004455 timeout_sampler [32mINFO[0m Elapsed time: 12.699690818786621 [0:00:12.699691][0m
2026-02-12T13:08:33.004744 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance/vm-rbac-reset-1770898098-8640313's 'AgentConnected' condition to be 'True'[0m
2026-02-12T13:08:33.004880 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-rbac-reset-1770898098-8640313 is created[0m
2026-02-12T13:08:33.005060 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)[0m
2026-02-12T13:08:33.004673 utilities.virt [32mINFO[0m Wait until guest agent is active on vm-rbac-reset-1770898098-8640313[0m
2026-02-12T13:08:33.173139 timeout_sampler [32mINFO[0m Elapsed time: 6.699562072753906e-05 [0:00:00.000067][0m
2026-02-12T13:08:33.173352 timeout_sampler [32mINFO[0m Waiting for 719.8315508365631 seconds [0:11:59.831551], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)[0m
2026-02-12T13:09:24.377858 timeout_sampler [32mINFO[0m Elapsed time: 51.04516386985779 [0:00:51.045164][0m
2026-02-12T13:09:24.378105 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)[0m
2026-02-12T13:09:24.378014 utilities.virt [32mINFO[0m Wait for vm-rbac-reset-1770898098-8640313 network interfaces[0m
2026-02-12T13:09:24.538030 timeout_sampler [32mINFO[0m Elapsed time: 0.0001373291015625 [0:00:00.000137][0m
2026-02-12T13:09:24.538155 utilities.virt [32mINFO[0m Wait for vm-rbac-reset-1770898098-8640313 SSH connectivity.[0m
2026-02-12T13:09:24.538237 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-rbac-reset-1770898098-8640313/node-general-test-vmi-hard-reset 22' IZAXUlXa5QeagXBj@vm-rbac-reset-1770898098-8640313[0m
2026-02-12T13:09:32.188111 timeout_sampler [32mINFO[0m Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})[0m
2026-02-12T13:09:32.188279 Host [32mINFO[0m [vm-rbac-reset-1770898098-8640313] Executing command exit[0m
2026-02-12T13:09:32.927095 paramiko.transport [32mINFO[0m Connected (version 2.0, client OpenSSH_9.8)[0m
2026-02-12T13:09:33.512443 paramiko.transport [32mINFO[0m Authentication (publickey) successful![0m
2026-02-12T13:09:34.087925 timeout_sampler [32mINFO[0m Elapsed time: 0.00019407272338867188 [0:00:00.000194][0m
----------------------------- Captured stderr call -----------------------------
2026-02-12T13:09:34.088152 conftest [32mINFO[0m Executing class fixture: unprivileged_vmi_for_reset[0m
--------------------------------------------------------- CALL ---------------------------------------------------------
_ 5 of 10 completed, 3 Pass, 1 Fail, 0 Skip, 0 XPass, 0 XFail, 1 Error, 0 ReRun _

tests/virt/node/general/test_vmi_hard_reset.py .
_ 6 of 10 completed, 4 Pass, 1 Fail, 0 Skip, 0 XPass, 0 XFail, 1 Error, 0 ReRun _

tests/virt/node/general/test_vmi_hard_reset.py F

____________ TestVMIHardResetNegative.test_reset_stopped_vmi_fails _____________

func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fb734a9b550>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~yZo_OSrAM4vHvKiferaa94Royq3hTS9FMknMX....io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/vm-negative-reset-1770898245-7650125/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fb72ec819f0>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72ec819f0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/vm-negative-reset-1770898245-7650125/reset', 'method': 'PUT', 'headers': {'authorization': 'Bearer sha256~yZo_OSrAM4vHvKiferaa94Royq3hTS9FMknMXol28mQ', 'Content-Type': 'application/json'}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd9590c26-8754-4981-a3b9-85fd9884e4a6', 'Cache-Control': 'no-cache, private', 'Content-Length': '348', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:12:12 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"vm-negative-reset-1770898245-7650125\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "vm-negative-reset-1770898245-7650125",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.14999890327453613 [0:00:00.149999]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetNegative object at 0x7fb734c19e50>
stopped_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fb72f43a270>

    @pytest.mark.polarion("CNV-12380")
    def test_reset_stopped_vmi_fails(
        self,
        stopped_vm_for_reset: VirtualMachineForTests,
    ) -> None:
        """[NEGATIVE] Test that resetting a stopped VMI returns an appropriate error.
    
        Steps:
            1. Attempt to reset the stopped VMI via the API
    
        Expected:
            - Reset operation fails with an error indicating the VMI is not running
        """
        with pytest.raises(NotFoundError):
>           stopped_vm_for_reset.vmi.reset()

tests/virt/node/general/test_vmi_hard_reset.py:391: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <kubernetes.client.rest.RESTClientObject object at 0x7fb734a9b650>
method = 'PUT'
url = 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/vm-negative-reset-1770898245-7650125/reset'
query_params = None
headers = {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~yZo_OSrAM4vHvKiferaa94Royq3hTS9FMknMXol28mQ'}
body = None, post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd9590c26-8754-4981-a3b9-85fd9884e4a6', 'Cache-Control': 'no-cache, private', 'Content-Length': '348', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:12:12 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"vm-negative-reset-1770898245-7650125\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "vm-negative-reset-1770898245-7650125",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
---------------------------- Captured stderr setup -----------------------------
2026-02-12T13:10:40.746280 ocp_resources.resource [32mINFO[0m Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 3 times][0m

--------------------------------------------- test_reset_stopped_vmi_fails ---------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-02-12T13:10:40.745652 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:10:40.745781 conftest [32mINFO[0m Executing class fixture: term_handler_scope_class[0m
2026-02-12T13:10:40.745924 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
2026-02-12T13:10:40.746087 conftest [32mINFO[0m Executing class fixture: vm_for_negative_reset[0m
2026-02-12T13:10:43.710057 timeout_sampler [32mINFO[0m Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpai40_uh8-cnv-tests-pull-secret/pull-secrets.json'})[0m
2026-02-12T13:10:43.710262 pyhelper_utils.shell [32mINFO[0m Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpai40_uh8-cnv-tests-pull-secret/pull-secrets.json command[0m
2026-02-12T13:10:45.762628 timeout_sampler [32mINFO[0m Elapsed time: 0.00015783309936523438 [0:00:00.000158][0m
2026-02-12T13:10:45.765136 ocp_resources.resource [32mINFO[0m kind: VirtualMachine api version: kubevirt.io/v1[0m
2026-02-12T13:10:45.765276 utilities.virt [33mWARNING[0m `os_login_param` not defined for fedora[0m
2026-02-12T13:10:45.952362 ocp_resources VirtualMachine [32mINFO[0m Create VirtualMachine vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:10:45.952703 ocp_resources VirtualMachine [32mINFO[0m Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-negative-reset'}, 'name': 'vm-negative-reset-1770898245-7650125'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-negative-reset-1770898245-7650125', 'kubevirt.io/domain': 'vm-negative-reset-1770898245-7650125', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}[0m
2026-02-12T13:10:45.908847 utilities.virt [32mINFO[0m Setting random username and password[0m
2026-02-12T13:10:46.656885 timeout_sampler [32mINFO[0m Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)[0m
2026-02-12T13:10:46.961150 timeout_sampler [32mINFO[0m Elapsed time: 0.000152587890625 [0:00:00.000153][0m
2026-02-12T13:10:46.961511 ocp_resources.resource [32mINFO[0m kind: VirtualMachineInstance api version: kubevirt.io/v1[0m
2026-02-12T13:10:46.961594 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance vm-negative-reset-1770898245-7650125 status to be Running[0m
2026-02-12T13:10:46.961650 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)[0m
2026-02-12T13:10:47.116246 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Scheduling[0m
2026-02-12T13:10:56.398524 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Scheduled[0m
2026-02-12T13:10:59.896142 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Running[0m
2026-02-12T13:10:59.896309 timeout_sampler [32mINFO[0m Elapsed time: 12.765975713729858 [0:00:12.765976][0m
2026-02-12T13:10:59.896643 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance/vm-negative-reset-1770898245-7650125's 'AgentConnected' condition to be 'True'[0m
2026-02-12T13:10:59.896916 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-negative-reset-1770898245-7650125 is created[0m
2026-02-12T13:10:59.896547 utilities.virt [32mINFO[0m Wait until guest agent is active on vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:10:59.897100 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)[0m
2026-02-12T13:11:00.039876 timeout_sampler [32mINFO[0m Elapsed time: 8.225440979003906e-05 [0:00:00.000082][0m
2026-02-12T13:11:00.040043 timeout_sampler [32mINFO[0m Waiting for 719.8568720817566 seconds [0:11:59.856872], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)[0m
2026-02-12T13:11:51.076887 timeout_sampler [32mINFO[0m Elapsed time: 50.88147854804993 [0:00:50.881479][0m
2026-02-12T13:11:51.077132 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)[0m
2026-02-12T13:11:51.077025 utilities.virt [32mINFO[0m Wait for vm-negative-reset-1770898245-7650125 network interfaces[0m
2026-02-12T13:11:51.223036 timeout_sampler [32mINFO[0m Elapsed time: 5.793571472167969e-05 [0:00:00.000058][0m
2026-02-12T13:11:51.223167 utilities.virt [32mINFO[0m Wait for vm-negative-reset-1770898245-7650125 SSH connectivity.[0m
2026-02-12T13:11:51.223248 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-negative-reset-1770898245-7650125/node-general-test-vmi-hard-reset 22' eOdw9IP3nk1Nez0u@vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:12:02.438122 timeout_sampler [32mINFO[0m Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})[0m
2026-02-12T13:12:02.438277 Host [32mINFO[0m [vm-negative-reset-1770898245-7650125] Executing command exit[0m
2026-02-12T13:12:03.180825 paramiko.transport [32mINFO[0m Connected (version 2.0, client OpenSSH_9.8)[0m
2026-02-12T13:12:03.736793 paramiko.transport [32mINFO[0m Authentication (publickey) successful![0m
2026-02-12T13:12:04.366970 timeout_sampler [32mINFO[0m Elapsed time: 0.00017762184143066406 [0:00:00.000178][0m
2026-02-12T13:12:04.367304 conftest [32mINFO[0m Executing function fixture: stopped_vm_for_reset[0m
2026-02-12T13:12:04.367462 tests.virt.node.general.test_vmi_hard_reset [32mINFO[0m Stopping VM vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:12:04.584187 ocp_resources VirtualMachine [32mINFO[0m Wait for VirtualMachine vm-negative-reset-1770898245-7650125 status to be None[0m
2026-02-12T13:12:04.584364 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: kubernetes.dynamic.client.get  Kwargs: {'field_selector': 'metadata.name==vm-negative-reset-1770898245-7650125', 'namespace': 'node-general-test-vmi-hard-reset'})[0m
2026-02-12T13:12:04.915867 timeout_sampler [32mINFO[0m Elapsed time: 6.532669067382812e-05 [0:00:00.000065][0m
2026-02-12T13:12:04.916121 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-negative-reset-1770898245-7650125 is deleted[0m
2026-02-12T13:12:04.916187 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)[0m
2026-02-12T13:12:12.026132 timeout_sampler [32mINFO[0m Elapsed time: 6.961568593978882 [0:00:06.961569][0m
----------------------------- Captured stderr call -----------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
_ 7 of 10 completed, 4 Pass, 2 Fail, 0 Skip, 0 XPass, 0 XFail, 1 Error, 0 ReRun _

tests/virt/node/general/test_vmi_hard_reset.py F

_____________ TestVMIHardResetNegative.test_reset_paused_vmi_fails _____________

self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetNegative object at 0x7fb734c1a210>
paused_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fb72f43a270>

    @pytest.mark.polarion("CNV-12381")
    def test_reset_paused_vmi_fails(
        self,
        paused_vm_for_reset: VirtualMachineForTests,
    ) -> None:
        """[NEGATIVE] Test that resetting a paused VMI returns an appropriate error.
    
        Steps:
            1. Attempt to reset the paused VMI via the API
    
        Expected:
            - Reset operation fails with an error indicating the VMI is paused
        """
>       with pytest.raises(Exception, match="paused|Paused"):
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       Failed: DID NOT RAISE <class 'Exception'>

tests/virt/node/general/test_vmi_hard_reset.py:406: Failed
---------------------------- Captured stderr setup -----------------------------

--------------------------------------------- test_reset_paused_vmi_fails ---------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-02-12T13:13:26.368001 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:13:26.368189 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
2026-02-12T13:13:26.368494 conftest [32mINFO[0m Executing function fixture: paused_vm_for_reset[0m
2026-02-12T13:13:26.368549 tests.virt.node.general.test_vmi_hard_reset [32mINFO[0m Pausing VMI vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:13:26.607682 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Paused[0m
2026-02-12T13:13:26.607814 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.virtual_machine_instance.get_vmi_active_condition)[0m
2026-02-12T13:13:26.747723 timeout_sampler [32mINFO[0m Elapsed time: 6.461143493652344e-05 [0:00:00.000065][0m
----------------------------- Captured stderr call -----------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
_ 8 of 10 completed, 4 Pass, 3 Fail, 0 Skip, 0 XPass, 0 XFail, 1 Error, 0 ReRun _

tests/virt/node/general/test_vmi_hard_reset.py F

__________ TestVMIHardResetNegative.test_reset_nonexistent_vmi_fails ___________

func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fb7362117f0>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {}, 'method': 'PUT', 'url': 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/nonexistent-vmi-for-reset/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fb72eae1270>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72eae1270>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/nonexistent-vmi-for-reset/reset', 'method': 'PUT', 'headers': {}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '587e9594-e7f3-4419-b738-6ec4dd3ba2c6', 'Cache-Control': 'no-cache, private', 'Content-Length': '326', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:13:27 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '037752b8-5e1f-4e6a-ba43-6a06ea4411b5', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'ec0ccbd6-72eb-4347-b191-56a5ab9a023e'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"nonexistent-vmi-for-reset\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "nonexistent-vmi-for-reset",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.6105005741119385 [0:00:00.610501]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetNegative object at 0x7fb734bbb820>
namespace = <ocp_resources.namespace.Namespace object at 0x7fb72f7e88a0>
admin_client = <kubernetes.dynamic.client.DynamicClient object at 0x7fb736211be0>

    @pytest.mark.polarion("CNV-12382")
    def test_reset_nonexistent_vmi_fails(
        self,
        namespace: Namespace,
        admin_client: DynamicClient,
    ) -> None:
        """[NEGATIVE] Test that resetting a non-existent VMI returns a 404 error.
    
        Steps:
            1. Attempt to reset a VMI with a name that does not exist in the namespace
    
        Expected:
            - Reset operation fails with a 404 Not Found error
        """
        nonexistent_vmi = VirtualMachineInstance(
            name="nonexistent-vmi-for-reset",
            namespace=namespace.name,
            client=admin_client,
        )
        with pytest.raises(NotFoundError):
>           nonexistent_vmi.reset()

tests/virt/node/general/test_vmi_hard_reset.py:429: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <kubernetes.client.rest.RESTClientObject object at 0x7fb736211550>
method = 'PUT'
url = 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/nonexistent-vmi-for-reset/reset'
query_params = None, headers = {'Content-Type': 'application/json'}, body = None
post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '587e9594-e7f3-4419-b738-6ec4dd3ba2c6', 'Cache-Control': 'no-cache, private', 'Content-Length': '326', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:13:27 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '037752b8-5e1f-4e6a-ba43-6a06ea4411b5', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'ec0ccbd6-72eb-4347-b191-56a5ab9a023e'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"nonexistent-vmi-for-reset\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "nonexistent-vmi-for-reset",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
----------------------------- Captured stderr call -----------------------------
2026-02-12T13:13:27.374655 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:13:27.374958 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
--------------------------------------------------------- CALL ---------------------------------------------------------
_ 9 of 10 completed, 4 Pass, 4 Fail, 0 Skip, 0 XPass, 0 XFail, 1 Error, 0 ReRun _

tests/deprecated_api/test_deprecation_audit_logs.py E

_____________ ERROR at setup of test_deprecated_apis_in_audit_logs _____________

func = <function NamespacedResource.instance.<locals>._instance at 0x7fb72f17c0f0>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 10, sleep_time = 1, kwargs = {}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fb72f6da7b0>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72f6da7b0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 10
E                   Function: ocp_resources.resource._instance
E                   Last exception: ForbiddenError: 403
E                   Reason: Forbidden
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '5b0994bf-059d-4163-b0fc-ce917b93dc94', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Content-Type-Options': 'nosniff', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43', 'Date': 'Thu, 12 Feb 2026 13:04:45 GMT', 'Content-Length': '451'})
E                   HTTP response body: b'{"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"virtualmachines.kubevirt.io \\"vm-negative-reset-1770898245-7650125\\" is forbidden: User \\"unprivileged-user\\" cannot get resource \\"virtualmachines\\" in API group \\"kubevirt.io\\" in the namespace \\"node-general-test-vmi-hard-reset\\"","reason":"Forbidden","details":{"name":"vm-negative-reset-1770898245-7650125","group":"kubevirt.io","kind":"virtualmachines"},"code":403}\n'
E                   Original traceback: 
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 55, in inner
E                       resp = func(self, *args, **kwargs)
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 277, in request
E                       api_response = self.client.call_api(
E                           path,
E                       ...<11 lines>...
E                           _request_timeout=params.get('_request_timeout')
E                       )
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 348, in call_api
E                       return self.__call_api(resource_path, method,
E                              ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
E                                              path_params, query_params, header_params,
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                       ...<2 lines>...
E                                              _return_http_data_only, collection_formats,
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                              _preload_content, _request_timeout, _host)
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
E                       response_data = self.request(
E                           method, url, query_params=query_params, headers=header_params,
E                           post_params=post_params, body=body,
E                           _preload_content=_preload_content,
E                           _request_timeout=_request_timeout)
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 373, in request
E                       return self.rest_client.GET(url,
E                              ~~~~~~~~~~~~~~~~~~~~^^^^^
E                                                   query_params=query_params,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   _preload_content=_preload_content,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   _request_timeout=_request_timeout,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   headers=headers)
E                                                   ^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 244, in GET
E                       return self.request("GET", url,
E                              ~~~~~~~~~~~~^^^^^^^^^^^^
E                                           headers=headers,
E                                           ^^^^^^^^^^^^^^^^
E                                           _preload_content=_preload_content,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           _request_timeout=_request_timeout,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           query_params=query_params)
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 238, in request
E                       raise ApiException(http_resp=r)
E                   .
E                   Elapsed time: 0.8804693222045898 [0:00:00.880469]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <timeout_sampler.TimeoutSampler object at 0x7fb72f6da850>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
>               yield self.func(*self.func_args, **self.func_kwargs)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
utilities/infra.py:853: in get_node_audit_log_entries
    lines = subprocess.getoutput(
../../.local/share/uv/python/cpython-3.14.0-linux-x86_64-gnu/lib/python3.14/subprocess.py:697: in getoutput
    return getstatusoutput(cmd, encoding=encoding, errors=errors)[1]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../.local/share/uv/python/cpython-3.14.0-linux-x86_64-gnu/lib/python3.14/subprocess.py:677: in getstatusoutput
    data = check_output(cmd, shell=True, text=True, stderr=STDOUT,
../../.local/share/uv/python/cpython-3.14.0-linux-x86_64-gnu/lib/python3.14/subprocess.py:472: in check_output
    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
../../.local/share/uv/python/cpython-3.14.0-linux-x86_64-gnu/lib/python3.14/subprocess.py:556: in run
    stdout, stderr = process.communicate(input, timeout=timeout)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../.local/share/uv/python/cpython-3.14.0-linux-x86_64-gnu/lib/python3.14/subprocess.py:1207: in communicate
    stdout = self.stdout.read()
             ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:764: in _sigint_handler
    self.__exit__()
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:760: in __exit__
    if not self.clean_up():
           ^^^^^^^^^^^^^^^
utilities/virt.py:445: in clean_up
    if self.exists and self.ready:
       ^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:951: in exists
    return self.instance
           ^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1670: in instance
    return self.retry_cluster_exceptions(func=_instance)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1668: in _instance
    return self.api.get(name=self.name, namespace=self.namespace)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py:112: in get
    return self.request('get', path, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <kubernetes.dynamic.client.DynamicClient object at 0x7fb734a9b750>
args = ('get', '/apis/kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachines/vm-negative-reset-1770898245-7650125')
kwargs = {}, serialize_response = True
serializer = <class 'kubernetes.dynamic.resource.ResourceInstance'>

    def inner(self, *args, **kwargs):
        serialize_response = kwargs.pop('serialize', True)
        serializer = kwargs.pop('serializer', ResourceInstance)
        try:
            resp = func(self, *args, **kwargs)
        except ApiException as e:
>           raise api_exception(e)
E           kubernetes.dynamic.exceptions.ForbiddenError: 403
E           Reason: Forbidden
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '5b0994bf-059d-4163-b0fc-ce917b93dc94', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Content-Type-Options': 'nosniff', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43', 'Date': 'Thu, 12 Feb 2026 13:04:45 GMT', 'Content-Length': '451'})
E           HTTP response body: b'{"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"virtualmachines.kubevirt.io \\"vm-negative-reset-1770898245-7650125\\" is forbidden: User \\"unprivileged-user\\" cannot get resource \\"virtualmachines\\" in API group \\"kubevirt.io\\" in the namespace \\"node-general-test-vmi-hard-reset\\"","reason":"Forbidden","details":{"name":"vm-negative-reset-1770898245-7650125","group":"kubevirt.io","kind":"virtualmachines"},"code":403}\n'
E           Original traceback: 
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 55, in inner
E               resp = func(self, *args, **kwargs)
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 277, in request
E               api_response = self.client.call_api(
E                   path,
E               ...<11 lines>...
E                   _request_timeout=params.get('_request_timeout')
E               )
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 348, in call_api
E               return self.__call_api(resource_path, method,
E                      ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
E                                      path_params, query_params, header_params,
E                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E               ...<2 lines>...
E                                      _return_http_data_only, collection_formats,
E                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                      _preload_content, _request_timeout, _host)
E                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
E               response_data = self.request(
E                   method, url, query_params=query_params, headers=header_params,
E                   post_params=post_params, body=body,
E                   _preload_content=_preload_content,
E                   _request_timeout=_request_timeout)
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 373, in request
E               return self.rest_client.GET(url,
E                      ~~~~~~~~~~~~~~~~~~~~^^^^^
E                                           query_params=query_params,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           _preload_content=_preload_content,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           _request_timeout=_request_timeout,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           headers=headers)
E                                           ^^^^^^^^^^^^^^^^
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 244, in GET
E               return self.request("GET", url,
E                      ~~~~~~~~~~~~^^^^^^^^^^^^
E                                   headers=headers,
E                                   ^^^^^^^^^^^^^^^^
E                                   _preload_content=_preload_content,
E                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                   _request_timeout=_request_timeout,
E                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                   query_params=query_params)
E                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 238, in request
E               raise ApiException(http_resp=r)

.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py:57: ForbiddenError

During handling of the above exception, another exception occurred:

audit_logs = defaultdict(<class 'list'>, {'c01-mv-421-qgr9v-master-0': ['audit-2026-02-12T00-50-22.588.log', 'audit-2026-02-12T02-0...-2026-02-12T09-59-41.292.log', 'audit-2026-02-12T11-10-16.450.log', 'audit-2026-02-12T12-11-00.963.log', 'audit.log']})

    @pytest.fixture()
    def deprecated_apis_calls(audit_logs):
        """Go over control plane nodes audit logs and look for calls using deprecated APIs"""
        failed_api_calls = defaultdict(list)
        for node, logs in audit_logs.items():
>           for audit_log_entry_dict in get_node_audit_log_line_dict(
                logs=logs, node=node, log_entry=DEPRECATED_API_LOG_ENTRY
            ):

tests/deprecated_api/test_deprecation_audit_logs.py:79: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
utilities/infra.py:868: in get_node_audit_log_line_dict
    _, deprecated_api_lines = get_node_audit_log_entries(log=log, node=node, log_entry=log_entry)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:280: in wrapper
    for sample in TimeoutSampler(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72f6da850>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T05-57-04.120.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'}
E                   Last exception: ForbiddenError: 403
E                   Reason: Forbidden
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '5b0994bf-059d-4163-b0fc-ce917b93dc94', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Content-Type-Options': 'nosniff', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43', 'Date': 'Thu, 12 Feb 2026 13:04:45 GMT', 'Content-Length': '451'})
E                   HTTP response body: b'{"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"virtualmachines.kubevirt.io \\"vm-negative-reset-1770898245-7650125\\" is forbidden: User \\"unprivileged-user\\" cannot get resource \\"virtualmachines\\" in API group \\"kubevirt.io\\" in the namespace \\"node-general-test-vmi-hard-reset\\"","reason":"Forbidden","details":{"name":"vm-negative-reset-1770898245-7650125","group":"kubevirt.io","kind":"virtualmachines"},"code":403}\n'
E                   Original traceback: 
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 55, in inner
E                       resp = func(self, *args, **kwargs)
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 277, in request
E                       api_response = self.client.call_api(
E                           path,
E                       ...<11 lines>...
E                           _request_timeout=params.get('_request_timeout')
E                       )
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 348, in call_api
E                       return self.__call_api(resource_path, method,
E                              ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
E                                              path_params, query_params, header_params,
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                       ...<2 lines>...
E                                              _return_http_data_only, collection_formats,
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                              _preload_content, _request_timeout, _host)
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
E                       response_data = self.request(
E                           method, url, query_params=query_params, headers=header_params,
E                           post_params=post_params, body=body,
E                           _preload_content=_preload_content,
E                           _request_timeout=_request_timeout)
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 373, in request
E                       return self.rest_client.GET(url,
E                              ~~~~~~~~~~~~~~~~~~~~^^^^^
E                                                   query_params=query_params,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   _preload_content=_preload_content,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   _request_timeout=_request_timeout,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   headers=headers)
E                                                   ^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 244, in GET
E                       return self.request("GET", url,
E                              ~~~~~~~~~~~~^^^^^^^^^^^^
E                                           headers=headers,
E                                           ^^^^^^^^^^^^^^^^
E                                           _preload_content=_preload_content,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           _request_timeout=_request_timeout,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           query_params=query_params)
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 238, in request
E                       raise ApiException(http_resp=r)
E                   .
E                   Elapsed time: 30 [0:00:30]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError
---------------------------- Captured stderr setup -----------------------------
2026-02-12T13:14:16.759398 ocp_utilities.infra [32mINFO[0m Verify all nodes are in a healthy condition.[0m

------------------------------------------ test_deprecated_apis_in_audit_logs ------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-02-12T13:14:16.758829 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:14:16.758969 conftest [32mINFO[0m Executing class fixture: term_handler_scope_class[0m
2026-02-12T13:14:16.759044 conftest [32mINFO[0m Executing module fixture: term_handler_scope_module[0m
2026-02-12T13:14:16.759184 conftest [32mINFO[0m Executing module fixture: cluster_sanity_scope_module[0m
2026-02-12T13:14:16.759259 utilities.infra [32mINFO[0m Running cluster sanity. (To skip cluster sanity check pass --cluster-sanity-skip-check to pytest)[0m
2026-02-12T13:14:16.759303 utilities.infra [32mINFO[0m Check storage classes sanity. (To skip storage class sanity check pass --cluster-sanity-skip-storage-check to pytest)[0m
2026-02-12T13:14:16.759358 utilities.infra [32mINFO[0m Check nodes sanity. (To skip nodes sanity check pass --cluster-sanity-skip-nodes-check to pytest)[0m
2026-02-12T13:14:17.920670 ocp_utilities.infra [32mINFO[0m Verify all nodes are schedulable.[0m
2026-02-12T13:14:18.840720 timeout_sampler [32mINFO[0m Waiting for 300 seconds [0:05:00], retry every 5 seconds. (Function: utilities.infra.get_pods  Kwargs: {'dyn_client': <kubernetes.dynamic.client.DynamicClient object at 0x7fb736211be0>, 'namespace': <ocp_resources.namespace.Namespace object at 0x7fb734bb9a70>})[0m
2026-02-12T13:14:34.086618 timeout_sampler [32mINFO[0m Elapsed time: 0.0001971721649169922 [0:00:00.000197][0m
2026-02-12T13:14:34.087038 timeout_sampler [32mINFO[0m Waiting for 600 seconds [0:10:00], retry every 5 seconds. (Function: utilities.infra.<locals>.lambda: dynamic_client.namespace.resource_kind.resource_name.list.get)[0m
2026-02-12T13:14:34.086908 utilities.infra [32mINFO[0m Waiting for resource to stabilize: resource_kind=HyperConverged conditions={'Available': 'True', 'Progressing': 'False', 'ReconcileComplete': 'True', 'Degraded': 'False', 'Upgradeable': 'True'} sleep=600 consecutive_checks_count=3[0m
2026-02-12T13:14:45.278942 timeout_sampler [32mINFO[0m Elapsed time: 10.763017416000366 [0:00:10.763017][0m
2026-02-12T13:14:45.279228 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
2026-02-12T13:14:45.279395 conftest [32mINFO[0m Executing function fixture: audit_logs[0m
2026-02-12T13:14:47.484766 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T00-50-22.588.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:14:47.484567 conftest [32mINFO[0m Executing function fixture: deprecated_apis_calls[0m
2026-02-12T13:17:46.882300 timeout_sampler [32mINFO[0m Elapsed time: 0.00022149085998535156 [0:00:00.000221][0m
2026-02-12T13:17:46.889460 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T02-03-38.267.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:21:42.863129 timeout_sampler [32mINFO[0m Elapsed time: 0.0001742839813232422 [0:00:00.000174][0m
2026-02-12T13:21:42.869684 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T03-20-46.317.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:25:18.736188 timeout_sampler [32mINFO[0m Elapsed time: 0.00019860267639160156 [0:00:00.000199][0m
2026-02-12T13:25:18.741815 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T04-30-54.768.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:28:19.880972 timeout_sampler [32mINFO[0m Elapsed time: 0.0001914501190185547 [0:00:00.000191][0m
2026-02-12T13:28:19.884358 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T05-44-52.660.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:31:33.086757 timeout_sampler [32mINFO[0m Elapsed time: 0.0001392364501953125 [0:00:00.000139][0m
2026-02-12T13:31:33.094885 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T06-58-44.838.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:34:20.346769 timeout_sampler [32mINFO[0m Elapsed time: 0.00018715858459472656 [0:00:00.000187][0m
2026-02-12T13:34:20.357755 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T08-13-04.857.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:36:39.071948 timeout_sampler [32mINFO[0m Elapsed time: 0.00016999244689941406 [0:00:00.000170][0m
2026-02-12T13:36:39.077683 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T09-27-28.786.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:39:25.608012 timeout_sampler [32mINFO[0m Elapsed time: 0.00016307830810546875 [0:00:00.000163][0m
2026-02-12T13:39:25.614849 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T10-39-16.277.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:42:14.945490 timeout_sampler [32mINFO[0m Elapsed time: 0.00017762184143066406 [0:00:00.000178][0m
2026-02-12T13:42:14.953644 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T11-36-14.225.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:45:50.468955 timeout_sampler [32mINFO[0m Elapsed time: 0.0001704692840576172 [0:00:00.000170][0m
2026-02-12T13:45:50.471285 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:48:32.899124 timeout_sampler [32mINFO[0m Elapsed time: 0.00010228157043457031 [0:00:00.000102][0m
2026-02-12T13:48:32.904088 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-11T23-53-37.265.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:48:34.136153 timeout_sampler [32mINFO[0m Elapsed time: 0.0001251697540283203 [0:00:00.000125][0m
2026-02-12T13:48:34.136304 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T01-12-48.875.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:48:34.136022 utilities.infra [33mWARNING[0m Skipping audit-2026-02-11T23-53-37.265.log check as it was rotated:
['error: the server could not find the requested resource', '  404 page not found'][0m
2026-02-12T13:51:20.985527 timeout_sampler [32mINFO[0m Elapsed time: 0.00011682510375976562 [0:00:00.000117][0m
2026-02-12T13:51:20.990156 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T02-20-03.518.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:54:19.573848 timeout_sampler [32mINFO[0m Elapsed time: 0.00010776519775390625 [0:00:00.000108][0m
2026-02-12T13:54:19.579975 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T03-36-53.559.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:57:45.855669 timeout_sampler [32mINFO[0m Elapsed time: 0.00011134147644042969 [0:00:00.000111][0m
2026-02-12T13:57:45.858656 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T04-48-11.649.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T14:01:56.193953 timeout_sampler [32mINFO[0m Elapsed time: 9.799003601074219e-05 [0:00:00.000098][0m
2026-02-12T14:01:56.197750 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T05-57-04.120.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T14:04:45.181943 timeout_sampler [32mINFO[0m Elapsed time: 30 [0:00:30][0m
_ 10 of 10 completed, 4 Pass, 4 Fail, 0 Skip, 0 XPass, 0 XFail, 2 Error, 0 ReRun _
                                                                         [100%]======= 4 failed, 4 passed, 26 warnings, 2 errors in 4309.79s (1:11:49) ========

==================================== ERRORS ====================================
_ ERROR at setup of TestVMIHardResetVirtctl.test_virtctl_reset_triggers_guest_reboot _

vm_for_hard_reset_virtctl = <utilities.virt.VirtualMachineForTests object at 0x7fb72f439a90>

    @pytest.fixture(scope="class")
    def vm_virtctl_reset_and_running(vm_for_hard_reset_virtctl: VirtualMachineForTests) -> None:
        LOGGER.info(f"Resetting VMI {vm_for_hard_reset_virtctl.name} via virtctl")
        run_virtctl_command(
            command=shlex.split(f"reset {vm_for_hard_reset_virtctl.name}"),
            namespace=vm_for_hard_reset_virtctl.namespace,
            check=True,
        )
>       wait_for_running_vm(vm=vm_for_hard_reset_virtctl)

tests/virt/node/general/test_vmi_hard_reset.py:119: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
utilities/virt.py:1697: in wait_for_running_vm
    wait_for_ssh_connectivity(vm=vm, timeout=ssh_timeout)
utilities/virt.py:1539: in wait_for_ssh_connectivity
    for sample in TimeoutSampler(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72f2ef070>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
                    raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
    
                time.sleep(self.sleep)
                elapsed_time = None
    
            finally:
                if self.print_log and elapsed_time:
                    LOGGER.info(_elapsed_time_log(elapsed_time=elapsed_time))
    
>       raise TimeoutExpiredError(self._get_exception_log(exp=last_exp), last_exp=last_exp)
E       timeout_sampler.TimeoutExpiredError: Timed Out: 120
E       Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60}
E       Last exception: SSHException: Error reading SSH protocol banner.

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:182: TimeoutExpiredError
---------------------------- Captured stderr setup -----------------------------
2026-02-12T13:03:48.403045 ocp_resources.resource [32mINFO[0m Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 9 times][0m

--------------------------------------- test_virtctl_reset_triggers_guest_reboot ---------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-02-12T13:03:48.402352 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:03:48.402495 conftest [32mINFO[0m Executing class fixture: term_handler_scope_class[0m
2026-02-12T13:03:48.402658 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
2026-02-12T13:03:48.402823 conftest [32mINFO[0m Executing class fixture: vm_for_hard_reset_virtctl[0m
2026-02-12T13:03:51.380724 timeout_sampler [32mINFO[0m Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpvkes65f4-cnv-tests-pull-secret/pull-secrets.json'})[0m
2026-02-12T13:03:51.380994 pyhelper_utils.shell [32mINFO[0m Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpvkes65f4-cnv-tests-pull-secret/pull-secrets.json command[0m
2026-02-12T13:03:53.377726 timeout_sampler [32mINFO[0m Elapsed time: 0.00020074844360351562 [0:00:00.000201][0m
2026-02-12T13:03:53.381293 ocp_resources.resource [32mINFO[0m kind: VirtualMachine api version: kubevirt.io/v1[0m
2026-02-12T13:03:53.381453 utilities.virt [33mWARNING[0m `os_login_param` not defined for fedora[0m
2026-02-12T13:03:53.527975 utilities.virt [32mINFO[0m Setting random username and password[0m
2026-02-12T13:03:53.563746 ocp_resources VirtualMachine [32mINFO[0m Create VirtualMachine vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:03:53.563891 ocp_resources VirtualMachine [32mINFO[0m Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-hard-reset-virtctl'}, 'name': 'vm-hard-reset-virtctl-1770897833-3811'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-hard-reset-virtctl-1770897833-3811', 'kubevirt.io/domain': 'vm-hard-reset-virtctl-1770897833-3811', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}[0m
2026-02-12T13:03:54.311498 timeout_sampler [32mINFO[0m Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)[0m
2026-02-12T13:03:54.664069 timeout_sampler [32mINFO[0m Elapsed time: 0.0001513957977294922 [0:00:00.000151][0m
2026-02-12T13:03:54.664343 ocp_resources.resource [32mINFO[0m kind: VirtualMachineInstance api version: kubevirt.io/v1[0m
2026-02-12T13:03:54.664440 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 status to be Running[0m
2026-02-12T13:03:54.664528 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)[0m
2026-02-12T13:03:54.812636 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is Scheduling[0m
2026-02-12T13:04:06.399231 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is Scheduled[0m
2026-02-12T13:04:09.869917 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is Running[0m
2026-02-12T13:04:09.870079 timeout_sampler [32mINFO[0m Elapsed time: 15.041622400283813 [0:00:15.041622][0m
2026-02-12T13:04:09.870372 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance/vm-hard-reset-virtctl-1770897833-3811's 'AgentConnected' condition to be 'True'[0m
2026-02-12T13:04:09.870580 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is created[0m
2026-02-12T13:04:09.870644 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)[0m
2026-02-12T13:04:09.870294 utilities.virt [32mINFO[0m Wait until guest agent is active on vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:04:10.024698 timeout_sampler [32mINFO[0m Elapsed time: 5.650520324707031e-05 [0:00:00.000057][0m
2026-02-12T13:04:10.024843 timeout_sampler [32mINFO[0m Waiting for 719.845752954483 seconds [0:11:59.845753], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)[0m
2026-02-12T13:05:02.437782 timeout_sampler [32mINFO[0m Elapsed time: 52.260642528533936 [0:00:52.260643][0m
2026-02-12T13:05:02.438014 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)[0m
2026-02-12T13:05:02.437915 utilities.virt [32mINFO[0m Wait for vm-hard-reset-virtctl-1770897833-3811 network interfaces[0m
2026-02-12T13:05:02.586132 timeout_sampler [32mINFO[0m Elapsed time: 6.008148193359375e-05 [0:00:00.000060][0m
2026-02-12T13:05:02.586332 utilities.virt [32mINFO[0m Wait for vm-hard-reset-virtctl-1770897833-3811 SSH connectivity.[0m
2026-02-12T13:05:02.586429 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-hard-reset-virtctl-1770897833-3811/node-general-test-vmi-hard-reset 22' _UW34n-s7lcCcT4P@vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:05:06.188192 timeout_sampler [32mINFO[0m Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})[0m
2026-02-12T13:05:06.188408 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:05:06.930030 paramiko.transport [32mINFO[0m Connected (version 2.0, client OpenSSH_9.8)[0m
2026-02-12T13:05:07.486983 paramiko.transport [32mINFO[0m Authentication (publickey) successful![0m
2026-02-12T13:05:08.119696 timeout_sampler [32mINFO[0m Elapsed time: 0.00023365020751953125 [0:00:00.000234][0m
2026-02-12T13:05:08.120078 conftest [32mINFO[0m Executing class fixture: boot_count_before_virtctl_reset[0m
2026-02-12T13:05:08.120275 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-hard-reset-virtctl-1770897833-3811/node-general-test-vmi-hard-reset 22' _UW34n-s7lcCcT4P@vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:05:12.331924 paramiko.transport [32mINFO[0m Connected (version 2.0, client OpenSSH_9.8)[0m
2026-02-12T13:05:12.934568 paramiko.transport [32mINFO[0m Authentication (publickey) successful![0m
2026-02-12T13:05:16.938046 pyhelper_utils.shell [32mINFO[0m [SSH][vm-hard-reset-virtctl-1770897833-3811] Executed: journalctl --list-boots | wc -l, rc:0, out: 2
, error: [0m
2026-02-12T13:05:16.938564 pyhelper_utils.shell [32mINFO[0m Running virtctl -n node-general-test-vmi-hard-reset --kubeconfig /tmp/tmp1tp29_0x-cnv-tests-kubeconfig/kubeconfig reset vm-hard-reset-virtctl-1770897833-3811 command[0m
2026-02-12T13:05:16.938363 conftest [32mINFO[0m Executing class fixture: vm_virtctl_reset_and_running[0m
2026-02-12T13:05:16.938477 tests.virt.node.general.test_vmi_hard_reset [32mINFO[0m Resetting VMI vm-hard-reset-virtctl-1770897833-3811 via virtctl[0m
2026-02-12T13:05:17.676950 pyhelper_utils.shell [31mERROR[0m Failed to run ['virtctl', '-n', 'node-general-test-vmi-hard-reset', '--kubeconfig', '/tmp/tmp1tp29_0x-cnv-tests-kubeconfig/kubeconfig', 'reset', 'vm-hard-reset-virtctl-1770897833-3811']. rc: 0, out: VMI vm-hard-reset-virtctl-1770897833-3811 was scheduled to reset
, error: {"component":"portforward","level":"info","msg":"Reset VMI","pos":"virtualmachineinstance_expansion.go:183","timestamp":"2026-02-12T12:05:16.952272Z"}
[0m
2026-02-12T13:05:17.677095 timeout_sampler [32mINFO[0m Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)[0m
2026-02-12T13:05:18.039997 timeout_sampler [32mINFO[0m Elapsed time: 8.106231689453125e-05 [0:00:00.000081][0m
2026-02-12T13:05:18.040316 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 status to be Running[0m
2026-02-12T13:05:18.040406 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)[0m
2026-02-12T13:05:18.187712 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is Running[0m
2026-02-12T13:05:18.187879 timeout_sampler [32mINFO[0m Elapsed time: 5.793571472167969e-05 [0:00:00.000058][0m
2026-02-12T13:05:18.188184 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance/vm-hard-reset-virtctl-1770897833-3811's 'AgentConnected' condition to be 'True'[0m
2026-02-12T13:05:18.188402 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-hard-reset-virtctl-1770897833-3811 is created[0m
2026-02-12T13:05:18.188104 utilities.virt [32mINFO[0m Wait until guest agent is active on vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:05:18.188498 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)[0m
2026-02-12T13:05:18.353836 timeout_sampler [32mINFO[0m Elapsed time: 5.7697296142578125e-05 [0:00:00.000058][0m
2026-02-12T13:05:18.354023 timeout_sampler [32mINFO[0m Waiting for 719.8343968391418 seconds [0:11:59.834397], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)[0m
2026-02-12T13:06:01.232900 timeout_sampler [32mINFO[0m Elapsed time: 42.722702503204346 [0:00:42.722703][0m
2026-02-12T13:06:01.233095 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)[0m
2026-02-12T13:06:01.233017 utilities.virt [32mINFO[0m Wait for vm-hard-reset-virtctl-1770897833-3811 network interfaces[0m
2026-02-12T13:06:01.389480 timeout_sampler [32mINFO[0m Elapsed time: 5.221366882324219e-05 [0:00:00.000052][0m
2026-02-12T13:06:01.389607 utilities.virt [32mINFO[0m Wait for vm-hard-reset-virtctl-1770897833-3811 SSH connectivity.[0m
2026-02-12T13:06:01.389679 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-hard-reset-virtctl-1770897833-3811/node-general-test-vmi-hard-reset 22' _UW34n-s7lcCcT4P@vm-hard-reset-virtctl-1770897833-3811[0m
2026-02-12T13:06:04.938248 timeout_sampler [32mINFO[0m Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})[0m
2026-02-12T13:06:04.938434 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:06:19.991271 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:06:20.002183 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:06:20.002345 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:06:20.002428 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:06:20.002485 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:06:20.002523 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:06:20.002552 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:06:20.002580 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:06:20.002607 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:06:20.002634 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:06:20.002661 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:20.002690 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:06:20.002718 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:20.002745 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:06:20.002771 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:06:20.002797 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:06:20.002824 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:06:20.002850 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:06:20.002876 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:06:20.002902 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:06:20.002927 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:06:20.002952 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:06:20.002977 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:25.003329 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:06:40.044455 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:06:40.045403 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:06:40.045489 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:06:40.045529 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:06:40.045563 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:06:40.045593 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:06:40.045622 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:06:40.045651 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:06:40.045680 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:06:40.045708 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:06:40.045737 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:40.045766 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:06:40.045794 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:40.045821 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:06:40.045852 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:06:40.045879 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:06:40.045913 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:06:40.045939 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:06:40.045968 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:06:40.045997 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:06:40.046025 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:06:40.046052 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:06:40.046078 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:06:45.046383 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:07:00.086329 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:07:00.087138 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:00.087224 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:07:00.087264 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:07:00.087296 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:07:00.087324 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:07:00.087353 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:07:00.087379 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:07:00.087406 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:07:00.087431 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:07:00.087457 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:00.087484 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:07:00.087514 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:00.087540 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:00.087568 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:07:00.087594 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:07:00.087622 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:07:00.087647 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:07:00.087672 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:07:00.087697 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:07:00.087722 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:07:00.087747 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:07:00.087771 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:05.087980 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:07:20.128312 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:07:20.129275 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:20.129388 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:07:20.129430 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:07:20.129464 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:07:20.129496 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:07:20.129529 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:07:20.129564 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:07:20.129598 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:07:20.129626 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:07:20.129659 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:20.129689 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:07:20.129717 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:20.129749 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:20.129778 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:07:20.129806 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:07:20.129840 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:07:20.129871 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:07:20.129897 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:07:20.129924 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:07:20.129959 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:07:20.129998 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:07:20.130035 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:25.130573 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:07:40.173605 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:07:40.174611 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:40.174699 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:07:40.174746 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:07:40.174780 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:07:40.174811 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:07:40.174842 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:07:40.174871 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:07:40.174901 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:07:40.174932 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:07:40.174961 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:40.174996 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:07:40.175024 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:40.175053 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:07:40.175082 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:07:40.175110 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:07:40.175138 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:07:40.175166 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:07:40.175202 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:07:40.175232 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:07:40.175260 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:07:40.175288 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:07:40.175317 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:07:45.175724 Host [32mINFO[0m [vm-hard-reset-virtctl-1770897833-3811] Executing command exit[0m
2026-02-12T13:08:00.215866 paramiko.transport [31mERROR[0m Exception (client): Error reading SSH protocol banner[0m
2026-02-12T13:08:00.216750 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:08:00.216858 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2363, in _check_banner[0m
2026-02-12T13:08:00.216899 paramiko.transport [31mERROR[0m     buf = self.packetizer.readline(timeout)[0m
2026-02-12T13:08:00.216930 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 395, in readline[0m
2026-02-12T13:08:00.216958 paramiko.transport [31mERROR[0m     buf += self._read_timeout(timeout)[0m
2026-02-12T13:08:00.216985 paramiko.transport [31mERROR[0m            ~~~~~~~~~~~~~~~~~~^^^^^^^^^[0m
2026-02-12T13:08:00.217011 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/packet.py", line 673, in _read_timeout[0m
2026-02-12T13:08:00.217038 paramiko.transport [31mERROR[0m     raise socket.timeout()[0m
2026-02-12T13:08:00.217064 paramiko.transport [31mERROR[0m TimeoutError[0m
2026-02-12T13:08:00.217091 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:08:00.217119 paramiko.transport [31mERROR[0m During handling of the above exception, another exception occurred:[0m
2026-02-12T13:08:00.217146 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:08:00.217172 paramiko.transport [31mERROR[0m Traceback (most recent call last):[0m
2026-02-12T13:08:00.217208 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2179, in run[0m
2026-02-12T13:08:00.217238 paramiko.transport [31mERROR[0m     self._check_banner()[0m
2026-02-12T13:08:00.217264 paramiko.transport [31mERROR[0m     ~~~~~~~~~~~~~~~~~~^^[0m
2026-02-12T13:08:00.217290 paramiko.transport [31mERROR[0m   File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/paramiko/transport.py", line 2367, in _check_banner[0m
2026-02-12T13:08:00.217316 paramiko.transport [31mERROR[0m     raise SSHException([0m
2026-02-12T13:08:00.217342 paramiko.transport [31mERROR[0m         "Error reading SSH protocol banner" + str(e)[0m
2026-02-12T13:08:00.217368 paramiko.transport [31mERROR[0m     )[0m
2026-02-12T13:08:00.217393 paramiko.transport [31mERROR[0m paramiko.ssh_exception.SSHException: Error reading SSH protocol banner[0m
2026-02-12T13:08:00.217432 paramiko.transport [31mERROR[0m [0m
2026-02-12T13:08:05.218046 pyhelper_utils.shell [32mINFO[0m Running virtctl -n node-general-test-vmi-hard-reset --kubeconfig /tmp/tmp1tp29_0x-cnv-tests-kubeconfig/kubeconfig vnc screenshot vm-hard-reset-virtctl-1770897833-3811 -f /home/mvavrine/cnv/openshift-virtualization-tests/tests-collected-info/node-general-test-vmi-hard-reset-vm-hard-reset-virtctl-1770897833-3811.png command[0m
_____________ ERROR at setup of test_deprecated_apis_in_audit_logs _____________

func = <function NamespacedResource.instance.<locals>._instance at 0x7fb72f17c0f0>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 10, sleep_time = 1, kwargs = {}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fb72f6da7b0>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72f6da7b0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 10
E                   Function: ocp_resources.resource._instance
E                   Last exception: ForbiddenError: 403
E                   Reason: Forbidden
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '5b0994bf-059d-4163-b0fc-ce917b93dc94', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Content-Type-Options': 'nosniff', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43', 'Date': 'Thu, 12 Feb 2026 13:04:45 GMT', 'Content-Length': '451'})
E                   HTTP response body: b'{"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"virtualmachines.kubevirt.io \\"vm-negative-reset-1770898245-7650125\\" is forbidden: User \\"unprivileged-user\\" cannot get resource \\"virtualmachines\\" in API group \\"kubevirt.io\\" in the namespace \\"node-general-test-vmi-hard-reset\\"","reason":"Forbidden","details":{"name":"vm-negative-reset-1770898245-7650125","group":"kubevirt.io","kind":"virtualmachines"},"code":403}\n'
E                   Original traceback: 
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 55, in inner
E                       resp = func(self, *args, **kwargs)
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 277, in request
E                       api_response = self.client.call_api(
E                           path,
E                       ...<11 lines>...
E                           _request_timeout=params.get('_request_timeout')
E                       )
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 348, in call_api
E                       return self.__call_api(resource_path, method,
E                              ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
E                                              path_params, query_params, header_params,
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                       ...<2 lines>...
E                                              _return_http_data_only, collection_formats,
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                              _preload_content, _request_timeout, _host)
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
E                       response_data = self.request(
E                           method, url, query_params=query_params, headers=header_params,
E                           post_params=post_params, body=body,
E                           _preload_content=_preload_content,
E                           _request_timeout=_request_timeout)
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 373, in request
E                       return self.rest_client.GET(url,
E                              ~~~~~~~~~~~~~~~~~~~~^^^^^
E                                                   query_params=query_params,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   _preload_content=_preload_content,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   _request_timeout=_request_timeout,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   headers=headers)
E                                                   ^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 244, in GET
E                       return self.request("GET", url,
E                              ~~~~~~~~~~~~^^^^^^^^^^^^
E                                           headers=headers,
E                                           ^^^^^^^^^^^^^^^^
E                                           _preload_content=_preload_content,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           _request_timeout=_request_timeout,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           query_params=query_params)
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 238, in request
E                       raise ApiException(http_resp=r)
E                   .
E                   Elapsed time: 0.8804693222045898 [0:00:00.880469]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <timeout_sampler.TimeoutSampler object at 0x7fb72f6da850>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
>               yield self.func(*self.func_args, **self.func_kwargs)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
utilities/infra.py:853: in get_node_audit_log_entries
    lines = subprocess.getoutput(
../../.local/share/uv/python/cpython-3.14.0-linux-x86_64-gnu/lib/python3.14/subprocess.py:697: in getoutput
    return getstatusoutput(cmd, encoding=encoding, errors=errors)[1]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../.local/share/uv/python/cpython-3.14.0-linux-x86_64-gnu/lib/python3.14/subprocess.py:677: in getstatusoutput
    data = check_output(cmd, shell=True, text=True, stderr=STDOUT,
../../.local/share/uv/python/cpython-3.14.0-linux-x86_64-gnu/lib/python3.14/subprocess.py:472: in check_output
    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
../../.local/share/uv/python/cpython-3.14.0-linux-x86_64-gnu/lib/python3.14/subprocess.py:556: in run
    stdout, stderr = process.communicate(input, timeout=timeout)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../.local/share/uv/python/cpython-3.14.0-linux-x86_64-gnu/lib/python3.14/subprocess.py:1207: in communicate
    stdout = self.stdout.read()
             ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:764: in _sigint_handler
    self.__exit__()
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:760: in __exit__
    if not self.clean_up():
           ^^^^^^^^^^^^^^^
utilities/virt.py:445: in clean_up
    if self.exists and self.ready:
       ^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:951: in exists
    return self.instance
           ^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1670: in instance
    return self.retry_cluster_exceptions(func=_instance)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1668: in _instance
    return self.api.get(name=self.name, namespace=self.namespace)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py:112: in get
    return self.request('get', path, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <kubernetes.dynamic.client.DynamicClient object at 0x7fb734a9b750>
args = ('get', '/apis/kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachines/vm-negative-reset-1770898245-7650125')
kwargs = {}, serialize_response = True
serializer = <class 'kubernetes.dynamic.resource.ResourceInstance'>

    def inner(self, *args, **kwargs):
        serialize_response = kwargs.pop('serialize', True)
        serializer = kwargs.pop('serializer', ResourceInstance)
        try:
            resp = func(self, *args, **kwargs)
        except ApiException as e:
>           raise api_exception(e)
E           kubernetes.dynamic.exceptions.ForbiddenError: 403
E           Reason: Forbidden
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '5b0994bf-059d-4163-b0fc-ce917b93dc94', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Content-Type-Options': 'nosniff', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43', 'Date': 'Thu, 12 Feb 2026 13:04:45 GMT', 'Content-Length': '451'})
E           HTTP response body: b'{"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"virtualmachines.kubevirt.io \\"vm-negative-reset-1770898245-7650125\\" is forbidden: User \\"unprivileged-user\\" cannot get resource \\"virtualmachines\\" in API group \\"kubevirt.io\\" in the namespace \\"node-general-test-vmi-hard-reset\\"","reason":"Forbidden","details":{"name":"vm-negative-reset-1770898245-7650125","group":"kubevirt.io","kind":"virtualmachines"},"code":403}\n'
E           Original traceback: 
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 55, in inner
E               resp = func(self, *args, **kwargs)
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 277, in request
E               api_response = self.client.call_api(
E                   path,
E               ...<11 lines>...
E                   _request_timeout=params.get('_request_timeout')
E               )
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 348, in call_api
E               return self.__call_api(resource_path, method,
E                      ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
E                                      path_params, query_params, header_params,
E                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E               ...<2 lines>...
E                                      _return_http_data_only, collection_formats,
E                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                      _preload_content, _request_timeout, _host)
E                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
E               response_data = self.request(
E                   method, url, query_params=query_params, headers=header_params,
E                   post_params=post_params, body=body,
E                   _preload_content=_preload_content,
E                   _request_timeout=_request_timeout)
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 373, in request
E               return self.rest_client.GET(url,
E                      ~~~~~~~~~~~~~~~~~~~~^^^^^
E                                           query_params=query_params,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           _preload_content=_preload_content,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           _request_timeout=_request_timeout,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           headers=headers)
E                                           ^^^^^^^^^^^^^^^^
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 244, in GET
E               return self.request("GET", url,
E                      ~~~~~~~~~~~~^^^^^^^^^^^^
E                                   headers=headers,
E                                   ^^^^^^^^^^^^^^^^
E                                   _preload_content=_preload_content,
E                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                   _request_timeout=_request_timeout,
E                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                   query_params=query_params)
E                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
E           
E             File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 238, in request
E               raise ApiException(http_resp=r)

.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py:57: ForbiddenError

During handling of the above exception, another exception occurred:

audit_logs = defaultdict(<class 'list'>, {'c01-mv-421-qgr9v-master-0': ['audit-2026-02-12T00-50-22.588.log', 'audit-2026-02-12T02-0...-2026-02-12T09-59-41.292.log', 'audit-2026-02-12T11-10-16.450.log', 'audit-2026-02-12T12-11-00.963.log', 'audit.log']})

    @pytest.fixture()
    def deprecated_apis_calls(audit_logs):
        """Go over control plane nodes audit logs and look for calls using deprecated APIs"""
        failed_api_calls = defaultdict(list)
        for node, logs in audit_logs.items():
>           for audit_log_entry_dict in get_node_audit_log_line_dict(
                logs=logs, node=node, log_entry=DEPRECATED_API_LOG_ENTRY
            ):

tests/deprecated_api/test_deprecation_audit_logs.py:79: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
utilities/infra.py:868: in get_node_audit_log_line_dict
    _, deprecated_api_lines = get_node_audit_log_entries(log=log, node=node, log_entry=log_entry)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:280: in wrapper
    for sample in TimeoutSampler(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72f6da850>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T05-57-04.120.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'}
E                   Last exception: ForbiddenError: 403
E                   Reason: Forbidden
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '5b0994bf-059d-4163-b0fc-ce917b93dc94', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Content-Type-Options': 'nosniff', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43', 'Date': 'Thu, 12 Feb 2026 13:04:45 GMT', 'Content-Length': '451'})
E                   HTTP response body: b'{"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"virtualmachines.kubevirt.io \\"vm-negative-reset-1770898245-7650125\\" is forbidden: User \\"unprivileged-user\\" cannot get resource \\"virtualmachines\\" in API group \\"kubevirt.io\\" in the namespace \\"node-general-test-vmi-hard-reset\\"","reason":"Forbidden","details":{"name":"vm-negative-reset-1770898245-7650125","group":"kubevirt.io","kind":"virtualmachines"},"code":403}\n'
E                   Original traceback: 
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 55, in inner
E                       resp = func(self, *args, **kwargs)
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/dynamic/client.py", line 277, in request
E                       api_response = self.client.call_api(
E                           path,
E                       ...<11 lines>...
E                           _request_timeout=params.get('_request_timeout')
E                       )
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 348, in call_api
E                       return self.__call_api(resource_path, method,
E                              ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
E                                              path_params, query_params, header_params,
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                       ...<2 lines>...
E                                              _return_http_data_only, collection_formats,
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                              _preload_content, _request_timeout, _host)
E                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
E                       response_data = self.request(
E                           method, url, query_params=query_params, headers=header_params,
E                           post_params=post_params, body=body,
E                           _preload_content=_preload_content,
E                           _request_timeout=_request_timeout)
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py", line 373, in request
E                       return self.rest_client.GET(url,
E                              ~~~~~~~~~~~~~~~~~~~~^^^^^
E                                                   query_params=query_params,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   _preload_content=_preload_content,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   _request_timeout=_request_timeout,
E                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                                   headers=headers)
E                                                   ^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 244, in GET
E                       return self.request("GET", url,
E                              ~~~~~~~~~~~~^^^^^^^^^^^^
E                                           headers=headers,
E                                           ^^^^^^^^^^^^^^^^
E                                           _preload_content=_preload_content,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           _request_timeout=_request_timeout,
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E                                           query_params=query_params)
E                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^
E                   
E                     File "/home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py", line 238, in request
E                       raise ApiException(http_resp=r)
E                   .
E                   Elapsed time: 30 [0:00:30]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError
---------------------------- Captured stderr setup -----------------------------
2026-02-12T13:14:16.759398 ocp_utilities.infra [32mINFO[0m Verify all nodes are in a healthy condition.[0m

------------------------------------------ test_deprecated_apis_in_audit_logs ------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-02-12T13:14:16.758829 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:14:16.758969 conftest [32mINFO[0m Executing class fixture: term_handler_scope_class[0m
2026-02-12T13:14:16.759044 conftest [32mINFO[0m Executing module fixture: term_handler_scope_module[0m
2026-02-12T13:14:16.759184 conftest [32mINFO[0m Executing module fixture: cluster_sanity_scope_module[0m
2026-02-12T13:14:16.759259 utilities.infra [32mINFO[0m Running cluster sanity. (To skip cluster sanity check pass --cluster-sanity-skip-check to pytest)[0m
2026-02-12T13:14:16.759303 utilities.infra [32mINFO[0m Check storage classes sanity. (To skip storage class sanity check pass --cluster-sanity-skip-storage-check to pytest)[0m
2026-02-12T13:14:16.759358 utilities.infra [32mINFO[0m Check nodes sanity. (To skip nodes sanity check pass --cluster-sanity-skip-nodes-check to pytest)[0m
2026-02-12T13:14:17.920670 ocp_utilities.infra [32mINFO[0m Verify all nodes are schedulable.[0m
2026-02-12T13:14:18.840720 timeout_sampler [32mINFO[0m Waiting for 300 seconds [0:05:00], retry every 5 seconds. (Function: utilities.infra.get_pods  Kwargs: {'dyn_client': <kubernetes.dynamic.client.DynamicClient object at 0x7fb736211be0>, 'namespace': <ocp_resources.namespace.Namespace object at 0x7fb734bb9a70>})[0m
2026-02-12T13:14:34.086618 timeout_sampler [32mINFO[0m Elapsed time: 0.0001971721649169922 [0:00:00.000197][0m
2026-02-12T13:14:34.087038 timeout_sampler [32mINFO[0m Waiting for 600 seconds [0:10:00], retry every 5 seconds. (Function: utilities.infra.<locals>.lambda: dynamic_client.namespace.resource_kind.resource_name.list.get)[0m
2026-02-12T13:14:34.086908 utilities.infra [32mINFO[0m Waiting for resource to stabilize: resource_kind=HyperConverged conditions={'Available': 'True', 'Progressing': 'False', 'ReconcileComplete': 'True', 'Degraded': 'False', 'Upgradeable': 'True'} sleep=600 consecutive_checks_count=3[0m
2026-02-12T13:14:45.278942 timeout_sampler [32mINFO[0m Elapsed time: 10.763017416000366 [0:00:10.763017][0m
2026-02-12T13:14:45.279228 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
2026-02-12T13:14:45.279395 conftest [32mINFO[0m Executing function fixture: audit_logs[0m
2026-02-12T13:14:47.484766 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T00-50-22.588.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:14:47.484567 conftest [32mINFO[0m Executing function fixture: deprecated_apis_calls[0m
2026-02-12T13:17:46.882300 timeout_sampler [32mINFO[0m Elapsed time: 0.00022149085998535156 [0:00:00.000221][0m
2026-02-12T13:17:46.889460 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T02-03-38.267.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:21:42.863129 timeout_sampler [32mINFO[0m Elapsed time: 0.0001742839813232422 [0:00:00.000174][0m
2026-02-12T13:21:42.869684 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T03-20-46.317.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:25:18.736188 timeout_sampler [32mINFO[0m Elapsed time: 0.00019860267639160156 [0:00:00.000199][0m
2026-02-12T13:25:18.741815 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T04-30-54.768.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:28:19.880972 timeout_sampler [32mINFO[0m Elapsed time: 0.0001914501190185547 [0:00:00.000191][0m
2026-02-12T13:28:19.884358 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T05-44-52.660.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:31:33.086757 timeout_sampler [32mINFO[0m Elapsed time: 0.0001392364501953125 [0:00:00.000139][0m
2026-02-12T13:31:33.094885 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T06-58-44.838.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:34:20.346769 timeout_sampler [32mINFO[0m Elapsed time: 0.00018715858459472656 [0:00:00.000187][0m
2026-02-12T13:34:20.357755 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T08-13-04.857.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:36:39.071948 timeout_sampler [32mINFO[0m Elapsed time: 0.00016999244689941406 [0:00:00.000170][0m
2026-02-12T13:36:39.077683 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T09-27-28.786.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:39:25.608012 timeout_sampler [32mINFO[0m Elapsed time: 0.00016307830810546875 [0:00:00.000163][0m
2026-02-12T13:39:25.614849 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T10-39-16.277.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:42:14.945490 timeout_sampler [32mINFO[0m Elapsed time: 0.00017762184143066406 [0:00:00.000178][0m
2026-02-12T13:42:14.953644 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T11-36-14.225.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:45:50.468955 timeout_sampler [32mINFO[0m Elapsed time: 0.0001704692840576172 [0:00:00.000170][0m
2026-02-12T13:45:50.471285 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit.log', 'node': 'c01-mv-421-qgr9v-master-0', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:48:32.899124 timeout_sampler [32mINFO[0m Elapsed time: 0.00010228157043457031 [0:00:00.000102][0m
2026-02-12T13:48:32.904088 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-11T23-53-37.265.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:48:34.136153 timeout_sampler [32mINFO[0m Elapsed time: 0.0001251697540283203 [0:00:00.000125][0m
2026-02-12T13:48:34.136304 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T01-12-48.875.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:48:34.136022 utilities.infra [33mWARNING[0m Skipping audit-2026-02-11T23-53-37.265.log check as it was rotated:
['error: the server could not find the requested resource', '  404 page not found'][0m
2026-02-12T13:51:20.985527 timeout_sampler [32mINFO[0m Elapsed time: 0.00011682510375976562 [0:00:00.000117][0m
2026-02-12T13:51:20.990156 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T02-20-03.518.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:54:19.573848 timeout_sampler [32mINFO[0m Elapsed time: 0.00010776519775390625 [0:00:00.000108][0m
2026-02-12T13:54:19.579975 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T03-36-53.559.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T13:57:45.855669 timeout_sampler [32mINFO[0m Elapsed time: 0.00011134147644042969 [0:00:00.000111][0m
2026-02-12T13:57:45.858656 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T04-48-11.649.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T14:01:56.193953 timeout_sampler [32mINFO[0m Elapsed time: 9.799003601074219e-05 [0:00:00.000098][0m
2026-02-12T14:01:56.197750 timeout_sampler [32mINFO[0m Waiting for 30 seconds [0:00:30], retry every 10 seconds. (Function: utilities.infra.get_node_audit_log_entries  Kwargs: {'log': 'audit-2026-02-12T05-57-04.120.log', 'node': 'c01-mv-421-qgr9v-master-1', 'log_entry': '"k8s.io/deprecated":"true"'})[0m
2026-02-12T14:04:45.181943 timeout_sampler [32mINFO[0m Elapsed time: 30 [0:00:30][0m
=================================== FAILURES ===================================
_________ TestVMIHardResetRBAC.test_unprivileged_user_cannot_reset_vmi _________

self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetRBAC object at 0x7fb734c19bd0>
unprivileged_vmi_for_reset = <ocp_resources.virtual_machine_instance.VirtualMachineInstance object at 0x7fb72f1e0fc0>

    @pytest.mark.polarion("CNV-12378")
    def test_unprivileged_user_cannot_reset_vmi(
        self,
        unprivileged_vmi_for_reset: VirtualMachineInstance,
    ) -> None:
        """[NEGATIVE] Test that an unprivileged user cannot reset a VMI.
    
        Steps:
            1. Attempt to reset the VMI using an unprivileged client
    
        Expected:
            - Reset operation fails with a 403 Forbidden error
        """
>       with pytest.raises(ForbiddenError):
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       Failed: DID NOT RAISE <class 'kubernetes.dynamic.exceptions.ForbiddenError'>

tests/virt/node/general/test_vmi_hard_reset.py:348: Failed
---------------------------- Captured stderr setup -----------------------------
2026-02-12T13:08:13.972236 ocp_resources.resource [32mINFO[0m Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 4 times][0m

--------------------------------------- test_unprivileged_user_cannot_reset_vmi ---------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-02-12T13:08:13.971586 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:08:13.971705 conftest [32mINFO[0m Executing class fixture: term_handler_scope_class[0m
2026-02-12T13:08:13.971862 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
2026-02-12T13:08:13.972041 conftest [32mINFO[0m Executing class fixture: vm_for_rbac_reset[0m
2026-02-12T13:08:16.956282 timeout_sampler [32mINFO[0m Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpnriffpfs-cnv-tests-pull-secret/pull-secrets.json'})[0m
2026-02-12T13:08:16.956497 pyhelper_utils.shell [32mINFO[0m Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpnriffpfs-cnv-tests-pull-secret/pull-secrets.json command[0m
2026-02-12T13:08:18.861833 timeout_sampler [32mINFO[0m Elapsed time: 0.00017690658569335938 [0:00:00.000177][0m
2026-02-12T13:08:18.864140 ocp_resources.resource [32mINFO[0m kind: VirtualMachine api version: kubevirt.io/v1[0m
2026-02-12T13:08:18.864263 utilities.virt [33mWARNING[0m `os_login_param` not defined for fedora[0m
2026-02-12T13:08:19.019400 utilities.virt [32mINFO[0m Setting random username and password[0m
2026-02-12T13:08:19.065131 ocp_resources VirtualMachine [32mINFO[0m Create VirtualMachine vm-rbac-reset-1770898098-8640313[0m
2026-02-12T13:08:19.065304 ocp_resources VirtualMachine [32mINFO[0m Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-rbac-reset'}, 'name': 'vm-rbac-reset-1770898098-8640313'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-rbac-reset-1770898098-8640313', 'kubevirt.io/domain': 'vm-rbac-reset-1770898098-8640313', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}[0m
2026-02-12T13:08:19.810548 timeout_sampler [32mINFO[0m Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)[0m
2026-02-12T13:08:20.153444 timeout_sampler [32mINFO[0m Elapsed time: 0.00017380714416503906 [0:00:00.000174][0m
2026-02-12T13:08:20.153662 ocp_resources.resource [32mINFO[0m kind: VirtualMachineInstance api version: kubevirt.io/v1[0m
2026-02-12T13:08:20.153726 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance vm-rbac-reset-1770898098-8640313 status to be Running[0m
2026-02-12T13:08:20.153786 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)[0m
2026-02-12T13:08:20.308837 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-rbac-reset-1770898098-8640313 is Scheduling[0m
2026-02-12T13:08:28.403439 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-rbac-reset-1770898098-8640313 is Scheduled[0m
2026-02-12T13:08:33.004257 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-rbac-reset-1770898098-8640313 is Running[0m
2026-02-12T13:08:33.004455 timeout_sampler [32mINFO[0m Elapsed time: 12.699690818786621 [0:00:12.699691][0m
2026-02-12T13:08:33.004744 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance/vm-rbac-reset-1770898098-8640313's 'AgentConnected' condition to be 'True'[0m
2026-02-12T13:08:33.004880 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-rbac-reset-1770898098-8640313 is created[0m
2026-02-12T13:08:33.005060 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)[0m
2026-02-12T13:08:33.004673 utilities.virt [32mINFO[0m Wait until guest agent is active on vm-rbac-reset-1770898098-8640313[0m
2026-02-12T13:08:33.173139 timeout_sampler [32mINFO[0m Elapsed time: 6.699562072753906e-05 [0:00:00.000067][0m
2026-02-12T13:08:33.173352 timeout_sampler [32mINFO[0m Waiting for 719.8315508365631 seconds [0:11:59.831551], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)[0m
2026-02-12T13:09:24.377858 timeout_sampler [32mINFO[0m Elapsed time: 51.04516386985779 [0:00:51.045164][0m
2026-02-12T13:09:24.378105 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)[0m
2026-02-12T13:09:24.378014 utilities.virt [32mINFO[0m Wait for vm-rbac-reset-1770898098-8640313 network interfaces[0m
2026-02-12T13:09:24.538030 timeout_sampler [32mINFO[0m Elapsed time: 0.0001373291015625 [0:00:00.000137][0m
2026-02-12T13:09:24.538155 utilities.virt [32mINFO[0m Wait for vm-rbac-reset-1770898098-8640313 SSH connectivity.[0m
2026-02-12T13:09:24.538237 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-rbac-reset-1770898098-8640313/node-general-test-vmi-hard-reset 22' IZAXUlXa5QeagXBj@vm-rbac-reset-1770898098-8640313[0m
2026-02-12T13:09:32.188111 timeout_sampler [32mINFO[0m Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})[0m
2026-02-12T13:09:32.188279 Host [32mINFO[0m [vm-rbac-reset-1770898098-8640313] Executing command exit[0m
2026-02-12T13:09:32.927095 paramiko.transport [32mINFO[0m Connected (version 2.0, client OpenSSH_9.8)[0m
2026-02-12T13:09:33.512443 paramiko.transport [32mINFO[0m Authentication (publickey) successful![0m
2026-02-12T13:09:34.087925 timeout_sampler [32mINFO[0m Elapsed time: 0.00019407272338867188 [0:00:00.000194][0m
----------------------------- Captured stderr call -----------------------------
2026-02-12T13:09:34.088152 conftest [32mINFO[0m Executing class fixture: unprivileged_vmi_for_reset[0m
--------------------------------------------------------- CALL ---------------------------------------------------------
____________ TestVMIHardResetNegative.test_reset_stopped_vmi_fails _____________

func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fb734a9b550>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~yZo_OSrAM4vHvKiferaa94Royq3hTS9FMknMX....io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/vm-negative-reset-1770898245-7650125/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fb72ec819f0>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72ec819f0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/vm-negative-reset-1770898245-7650125/reset', 'method': 'PUT', 'headers': {'authorization': 'Bearer sha256~yZo_OSrAM4vHvKiferaa94Royq3hTS9FMknMXol28mQ', 'Content-Type': 'application/json'}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd9590c26-8754-4981-a3b9-85fd9884e4a6', 'Cache-Control': 'no-cache, private', 'Content-Length': '348', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:12:12 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"vm-negative-reset-1770898245-7650125\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "vm-negative-reset-1770898245-7650125",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.14999890327453613 [0:00:00.149999]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetNegative object at 0x7fb734c19e50>
stopped_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fb72f43a270>

    @pytest.mark.polarion("CNV-12380")
    def test_reset_stopped_vmi_fails(
        self,
        stopped_vm_for_reset: VirtualMachineForTests,
    ) -> None:
        """[NEGATIVE] Test that resetting a stopped VMI returns an appropriate error.
    
        Steps:
            1. Attempt to reset the stopped VMI via the API
    
        Expected:
            - Reset operation fails with an error indicating the VMI is not running
        """
        with pytest.raises(NotFoundError):
>           stopped_vm_for_reset.vmi.reset()

tests/virt/node/general/test_vmi_hard_reset.py:391: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <kubernetes.client.rest.RESTClientObject object at 0x7fb734a9b650>
method = 'PUT'
url = 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/vm-negative-reset-1770898245-7650125/reset'
query_params = None
headers = {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~yZo_OSrAM4vHvKiferaa94Royq3hTS9FMknMXol28mQ'}
body = None, post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd9590c26-8754-4981-a3b9-85fd9884e4a6', 'Cache-Control': 'no-cache, private', 'Content-Length': '348', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:12:12 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"vm-negative-reset-1770898245-7650125\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "vm-negative-reset-1770898245-7650125",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
---------------------------- Captured stderr setup -----------------------------
2026-02-12T13:10:40.746280 ocp_resources.resource [32mINFO[0m Trying to get client via new_client_from_config --- [DuplicateFilter: Last log `kind: VirtualMachineInstance api version: kubevirt.io/v1` repeated 3 times][0m

--------------------------------------------- test_reset_stopped_vmi_fails ---------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-02-12T13:10:40.745652 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:10:40.745781 conftest [32mINFO[0m Executing class fixture: term_handler_scope_class[0m
2026-02-12T13:10:40.745924 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
2026-02-12T13:10:40.746087 conftest [32mINFO[0m Executing class fixture: vm_for_negative_reset[0m
2026-02-12T13:10:43.710057 timeout_sampler [32mINFO[0m Waiting for 10 seconds [0:00:10], retry every 1 seconds. (Function: utilities.virt._get_image_json  Kwargs: {'cmd': 'oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpai40_uh8-cnv-tests-pull-secret/pull-secrets.json'})[0m
2026-02-12T13:10:43.710262 pyhelper_utils.shell [32mINFO[0m Running oc image -o json info quay.io/openshift-cnv/qe-cnv-tests-fedora:41 --filter-by-os amd64 --registry-config=/tmp/tmpai40_uh8-cnv-tests-pull-secret/pull-secrets.json command[0m
2026-02-12T13:10:45.762628 timeout_sampler [32mINFO[0m Elapsed time: 0.00015783309936523438 [0:00:00.000158][0m
2026-02-12T13:10:45.765136 ocp_resources.resource [32mINFO[0m kind: VirtualMachine api version: kubevirt.io/v1[0m
2026-02-12T13:10:45.765276 utilities.virt [33mWARNING[0m `os_login_param` not defined for fedora[0m
2026-02-12T13:10:45.952362 ocp_resources VirtualMachine [32mINFO[0m Create VirtualMachine vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:10:45.952703 ocp_resources VirtualMachine [32mINFO[0m Posting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-negative-reset'}, 'name': 'vm-negative-reset-1770898245-7650125'}, 'spec': {'template': {'metadata': {'creationTimestamp': None, 'labels': {'kubevirt.io/vm': 'vm-negative-reset-1770898245-7650125', 'kubevirt.io/domain': 'vm-negative-reset-1770898245-7650125', 'debugLogs': 'true'}}, 'spec': {'domain': {'cpu': {'cores': 1}, 'memory': {'guest': '1Gi'}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'machine': {'type': ''}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'name': 'cloudinitdisk', 'cloudInitNoCloud': {'userData': '*******'}}]}}, 'runStrategy': 'Halted'}}[0m
2026-02-12T13:10:45.908847 utilities.virt [32mINFO[0m Setting random username and password[0m
2026-02-12T13:10:46.656885 timeout_sampler [32mINFO[0m Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)[0m
2026-02-12T13:10:46.961150 timeout_sampler [32mINFO[0m Elapsed time: 0.000152587890625 [0:00:00.000153][0m
2026-02-12T13:10:46.961511 ocp_resources.resource [32mINFO[0m kind: VirtualMachineInstance api version: kubevirt.io/v1[0m
2026-02-12T13:10:46.961594 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance vm-negative-reset-1770898245-7650125 status to be Running[0m
2026-02-12T13:10:46.961650 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)[0m
2026-02-12T13:10:47.116246 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Scheduling[0m
2026-02-12T13:10:56.398524 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Scheduled[0m
2026-02-12T13:10:59.896142 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Running[0m
2026-02-12T13:10:59.896309 timeout_sampler [32mINFO[0m Elapsed time: 12.765975713729858 [0:00:12.765976][0m
2026-02-12T13:10:59.896643 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance/vm-negative-reset-1770898245-7650125's 'AgentConnected' condition to be 'True'[0m
2026-02-12T13:10:59.896916 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-negative-reset-1770898245-7650125 is created[0m
2026-02-12T13:10:59.896547 utilities.virt [32mINFO[0m Wait until guest agent is active on vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:10:59.897100 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)[0m
2026-02-12T13:11:00.039876 timeout_sampler [32mINFO[0m Elapsed time: 8.225440979003906e-05 [0:00:00.000082][0m
2026-02-12T13:11:00.040043 timeout_sampler [32mINFO[0m Waiting for 719.8568720817566 seconds [0:11:59.856872], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)[0m
2026-02-12T13:11:51.076887 timeout_sampler [32mINFO[0m Elapsed time: 50.88147854804993 [0:00:50.881479][0m
2026-02-12T13:11:51.077132 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)[0m
2026-02-12T13:11:51.077025 utilities.virt [32mINFO[0m Wait for vm-negative-reset-1770898245-7650125 network interfaces[0m
2026-02-12T13:11:51.223036 timeout_sampler [32mINFO[0m Elapsed time: 5.793571472167969e-05 [0:00:00.000058][0m
2026-02-12T13:11:51.223167 utilities.virt [32mINFO[0m Wait for vm-negative-reset-1770898245-7650125 SSH connectivity.[0m
2026-02-12T13:11:51.223248 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-negative-reset-1770898245-7650125/node-general-test-vmi-hard-reset 22' eOdw9IP3nk1Nez0u@vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:12:02.438122 timeout_sampler [32mINFO[0m Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})[0m
2026-02-12T13:12:02.438277 Host [32mINFO[0m [vm-negative-reset-1770898245-7650125] Executing command exit[0m
2026-02-12T13:12:03.180825 paramiko.transport [32mINFO[0m Connected (version 2.0, client OpenSSH_9.8)[0m
2026-02-12T13:12:03.736793 paramiko.transport [32mINFO[0m Authentication (publickey) successful![0m
2026-02-12T13:12:04.366970 timeout_sampler [32mINFO[0m Elapsed time: 0.00017762184143066406 [0:00:00.000178][0m
2026-02-12T13:12:04.367304 conftest [32mINFO[0m Executing function fixture: stopped_vm_for_reset[0m
2026-02-12T13:12:04.367462 tests.virt.node.general.test_vmi_hard_reset [32mINFO[0m Stopping VM vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:12:04.584187 ocp_resources VirtualMachine [32mINFO[0m Wait for VirtualMachine vm-negative-reset-1770898245-7650125 status to be None[0m
2026-02-12T13:12:04.584364 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: kubernetes.dynamic.client.get  Kwargs: {'field_selector': 'metadata.name==vm-negative-reset-1770898245-7650125', 'namespace': 'node-general-test-vmi-hard-reset'})[0m
2026-02-12T13:12:04.915867 timeout_sampler [32mINFO[0m Elapsed time: 6.532669067382812e-05 [0:00:00.000065][0m
2026-02-12T13:12:04.916121 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-negative-reset-1770898245-7650125 is deleted[0m
2026-02-12T13:12:04.916187 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)[0m
2026-02-12T13:12:12.026132 timeout_sampler [32mINFO[0m Elapsed time: 6.961568593978882 [0:00:06.961569][0m
----------------------------- Captured stderr call -----------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
--------------------------- Captured stderr teardown ---------------------------

TEST: TestVMIHardResetNegative.test_reset_stopped_vmi_fails STATUS: [0;31mFAILED[0m
func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fb734a9b550>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~yZo_OSrAM4vHvKiferaa94Royq3hTS9FMknMX....io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/vm-negative-reset-1770898245-7650125/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fb72ec819f0>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72ec819f0>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/vm-negative-reset-1770898245-7650125/reset', 'method': 'PUT', 'headers': {'authorization': 'Bearer sha256~yZo_OSrAM4vHvKiferaa94Royq3hTS9FMknMXol28mQ', 'Content-Type': 'application/json'}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd9590c26-8754-4981-a3b9-85fd9884e4a6', 'Cache-Control': 'no-cache, private', 'Content-Length': '348', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:12:12 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"vm-negative-reset-1770898245-7650125\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "vm-negative-reset-1770898245-7650125",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.14999890327453613 [0:00:00.149999]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetNegative object at 0x7fb734c19e50>
stopped_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fb72f43a270>

    @pytest.mark.polarion("CNV-12380")
    def test_reset_stopped_vmi_fails(
        self,
        stopped_vm_for_reset: VirtualMachineForTests,
    ) -> None:
        """[NEGATIVE] Test that resetting a stopped VMI returns an appropriate error.
    
        Steps:
            1. Attempt to reset the stopped VMI via the API
    
        Expected:
            - Reset operation fails with an error indicating the VMI is not running
        """
        with pytest.raises(NotFoundError):
>           stopped_vm_for_reset.vmi.reset()

tests/virt/node/general/test_vmi_hard_reset.py:391: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <kubernetes.client.rest.RESTClientObject object at 0x7fb734a9b650>
method = 'PUT'
url = 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/vm-negative-reset-1770898245-7650125/reset'
query_params = None
headers = {'Content-Type': 'application/json', 'authorization': 'Bearer sha256~yZo_OSrAM4vHvKiferaa94Royq3hTS9FMknMXol28mQ'}
body = None, post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd9590c26-8754-4981-a3b9-85fd9884e4a6', 'Cache-Control': 'no-cache, private', 'Content-Length': '348', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:12:12 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': 'cc44f062-8f4c-4bd6-ae9c-c57c3a743560', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'e328d015-75e1-4f90-8939-9355d8687b43'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"vm-negative-reset-1770898245-7650125\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "vm-negative-reset-1770898245-7650125",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
------------------------------------------------------- TEARDOWN -------------------------------------------------------
2026-02-12T13:12:12.255013 tests.virt.node.general.test_vmi_hard_reset [32mINFO[0m Restarting VM vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:12:12.462002 timeout_sampler [32mINFO[0m Waiting for 5 seconds [0:00:05], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vm.instance.get)[0m
2026-02-12T13:12:12.773072 timeout_sampler [32mINFO[0m Elapsed time: 0.0001838207244873047 [0:00:00.000184][0m
2026-02-12T13:12:12.773311 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance vm-negative-reset-1770898245-7650125 status to be Running[0m
2026-02-12T13:12:12.773382 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_status.lambda: self.exists)[0m
2026-02-12T13:12:12.926000 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Scheduling[0m
2026-02-12T13:12:22.186475 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Scheduled[0m
2026-02-12T13:12:26.863788 ocp_resources VirtualMachineInstance [32mINFO[0m Status of VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Running[0m
2026-02-12T13:12:26.863928 timeout_sampler [32mINFO[0m Elapsed time: 13.923343420028687 [0:00:13.923343][0m
2026-02-12T13:12:26.864169 ocp_resources VirtualMachineInstance [32mINFO[0m Wait for VirtualMachineInstance/vm-negative-reset-1770898245-7650125's 'AgentConnected' condition to be 'True'[0m
2026-02-12T13:12:26.864370 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-negative-reset-1770898245-7650125 is created[0m
2026-02-12T13:12:26.864422 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: ocp_resources.resource.wait.lambda: self.exists)[0m
2026-02-12T13:12:26.864101 utilities.virt [32mINFO[0m Wait until guest agent is active on vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:12:27.021724 timeout_sampler [32mINFO[0m Elapsed time: 4.363059997558594e-05 [0:00:00.000044][0m
2026-02-12T13:12:27.021895 timeout_sampler [32mINFO[0m Waiting for 719.842493057251 seconds [0:11:59.842493], retry every 1 seconds. (Function: ocp_resources.resource.wait_for_condition.lambda: self.instance)[0m
2026-02-12T13:13:12.423978 timeout_sampler [32mINFO[0m Elapsed time: 45.23136281967163 [0:00:45.231363][0m
2026-02-12T13:13:12.424326 timeout_sampler [32mINFO[0m Waiting for 720 seconds [0:12:00], retry every 1 seconds. (Function: utilities.virt.<locals>.lambda: vmi.instance)[0m
2026-02-12T13:13:12.424184 utilities.virt [32mINFO[0m Wait for vm-negative-reset-1770898245-7650125 network interfaces[0m
2026-02-12T13:13:12.602161 timeout_sampler [32mINFO[0m Elapsed time: 0.00018978118896484375 [0:00:00.000190][0m
2026-02-12T13:13:12.602348 utilities.virt [32mINFO[0m Wait for vm-negative-reset-1770898245-7650125 SSH connectivity.[0m
2026-02-12T13:13:12.602430 utilities.virt [32mINFO[0m SSH command: ssh -o 'ProxyCommand=virtctl port-forward --stdio=true vm/vm-negative-reset-1770898245-7650125/node-general-test-vmi-hard-reset 22' eOdw9IP3nk1Nez0u@vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:13:24.438075 timeout_sampler [32mINFO[0m Waiting for 120 seconds [0:02:00], retry every 5 seconds. (Function: rrmngmnt.host.run_command  Kwargs: {'command': ['exit'], 'tcp_timeout': 60})[0m
2026-02-12T13:13:24.438213 Host [32mINFO[0m [vm-negative-reset-1770898245-7650125] Executing command exit[0m
2026-02-12T13:13:25.173943 paramiko.transport [32mINFO[0m Connected (version 2.0, client OpenSSH_9.8)[0m
2026-02-12T13:13:25.696572 paramiko.transport [32mINFO[0m Authentication (publickey) successful![0m
2026-02-12T13:13:26.366722 timeout_sampler [32mINFO[0m Elapsed time: 0.0001556873321533203 [0:00:00.000156][0m
_____________ TestVMIHardResetNegative.test_reset_paused_vmi_fails _____________

self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetNegative object at 0x7fb734c1a210>
paused_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fb72f43a270>

    @pytest.mark.polarion("CNV-12381")
    def test_reset_paused_vmi_fails(
        self,
        paused_vm_for_reset: VirtualMachineForTests,
    ) -> None:
        """[NEGATIVE] Test that resetting a paused VMI returns an appropriate error.
    
        Steps:
            1. Attempt to reset the paused VMI via the API
    
        Expected:
            - Reset operation fails with an error indicating the VMI is paused
        """
>       with pytest.raises(Exception, match="paused|Paused"):
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       Failed: DID NOT RAISE <class 'Exception'>

tests/virt/node/general/test_vmi_hard_reset.py:406: Failed
---------------------------- Captured stderr setup -----------------------------

--------------------------------------------- test_reset_paused_vmi_fails ---------------------------------------------
-------------------------------------------------------- SETUP --------------------------------------------------------
2026-02-12T13:13:26.368001 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:13:26.368189 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
2026-02-12T13:13:26.368494 conftest [32mINFO[0m Executing function fixture: paused_vm_for_reset[0m
2026-02-12T13:13:26.368549 tests.virt.node.general.test_vmi_hard_reset [32mINFO[0m Pausing VMI vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:13:26.607682 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Paused[0m
2026-02-12T13:13:26.607814 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.virtual_machine_instance.get_vmi_active_condition)[0m
2026-02-12T13:13:26.747723 timeout_sampler [32mINFO[0m Elapsed time: 6.461143493652344e-05 [0:00:00.000065][0m
----------------------------- Captured stderr call -----------------------------
--------------------------------------------------------- CALL ---------------------------------------------------------
--------------------------- Captured stderr teardown ---------------------------

TEST: TestVMIHardResetNegative.test_reset_paused_vmi_fails STATUS: [0;31mFAILED[0m
self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetNegative object at 0x7fb734c1a210>
paused_vm_for_reset = <utilities.virt.VirtualMachineForTests object at 0x7fb72f43a270>

    @pytest.mark.polarion("CNV-12381")
    def test_reset_paused_vmi_fails(
        self,
        paused_vm_for_reset: VirtualMachineForTests,
    ) -> None:
        """[NEGATIVE] Test that resetting a paused VMI returns an appropriate error.
    
        Steps:
            1. Attempt to reset the paused VMI via the API
    
        Expected:
            - Reset operation fails with an error indicating the VMI is paused
        """
>       with pytest.raises(Exception, match="paused|Paused"):
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       Failed: DID NOT RAISE <class 'Exception'>

tests/virt/node/general/test_vmi_hard_reset.py:406: Failed
------------------------------------------------------- TEARDOWN -------------------------------------------------------
2026-02-12T13:13:26.983464 tests.virt.node.general.test_vmi_hard_reset [32mINFO[0m Unpausing VMI vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:13:27.227616 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-negative-reset-1770898245-7650125 is Unpuased[0m
2026-02-12T13:13:27.227752 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.virtual_machine_instance.get_vmi_active_condition)[0m
2026-02-12T13:13:27.373485 timeout_sampler [32mINFO[0m Elapsed time: 6.389617919921875e-05 [0:00:00.000064][0m
__________ TestVMIHardResetNegative.test_reset_nonexistent_vmi_fails ___________

func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fb7362117f0>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {}, 'method': 'PUT', 'url': 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/nonexistent-vmi-for-reset/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fb72eae1270>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72eae1270>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/nonexistent-vmi-for-reset/reset', 'method': 'PUT', 'headers': {}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '587e9594-e7f3-4419-b738-6ec4dd3ba2c6', 'Cache-Control': 'no-cache, private', 'Content-Length': '326', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:13:27 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '037752b8-5e1f-4e6a-ba43-6a06ea4411b5', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'ec0ccbd6-72eb-4347-b191-56a5ab9a023e'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"nonexistent-vmi-for-reset\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "nonexistent-vmi-for-reset",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.6105005741119385 [0:00:00.610501]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetNegative object at 0x7fb734bbb820>
namespace = <ocp_resources.namespace.Namespace object at 0x7fb72f7e88a0>
admin_client = <kubernetes.dynamic.client.DynamicClient object at 0x7fb736211be0>

    @pytest.mark.polarion("CNV-12382")
    def test_reset_nonexistent_vmi_fails(
        self,
        namespace: Namespace,
        admin_client: DynamicClient,
    ) -> None:
        """[NEGATIVE] Test that resetting a non-existent VMI returns a 404 error.
    
        Steps:
            1. Attempt to reset a VMI with a name that does not exist in the namespace
    
        Expected:
            - Reset operation fails with a 404 Not Found error
        """
        nonexistent_vmi = VirtualMachineInstance(
            name="nonexistent-vmi-for-reset",
            namespace=namespace.name,
            client=admin_client,
        )
        with pytest.raises(NotFoundError):
>           nonexistent_vmi.reset()

tests/virt/node/general/test_vmi_hard_reset.py:429: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <kubernetes.client.rest.RESTClientObject object at 0x7fb736211550>
method = 'PUT'
url = 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/nonexistent-vmi-for-reset/reset'
query_params = None, headers = {'Content-Type': 'application/json'}, body = None
post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '587e9594-e7f3-4419-b738-6ec4dd3ba2c6', 'Cache-Control': 'no-cache, private', 'Content-Length': '326', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:13:27 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '037752b8-5e1f-4e6a-ba43-6a06ea4411b5', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'ec0ccbd6-72eb-4347-b191-56a5ab9a023e'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"nonexistent-vmi-for-reset\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "nonexistent-vmi-for-reset",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
----------------------------- Captured stderr call -----------------------------
2026-02-12T13:13:27.374655 conftest [32mINFO[0m Executing function fixture: term_handler_scope_function[0m
2026-02-12T13:13:27.374958 conftest [32mINFO[0m Executing function fixture: autouse_fixtures[0m
--------------------------------------------------------- CALL ---------------------------------------------------------
--------------------------- Captured stderr teardown ---------------------------

TEST: TestVMIHardResetNegative.test_reset_nonexistent_vmi_fails STATUS: [0;31mFAILED[0m
func = <bound method ApiClient.request of <kubernetes.client.api_client.ApiClient object at 0x7fb7362117f0>>
exceptions_dict = {<class 'urllib3.exceptions.MaxRetryError'>: [], <class 'ConnectionAbortedError'>: [], <class 'ConnectionResetError'>:...eader changed', 'etcdserver: request timed out', 'Internal error occurred: failed calling webhook', 'rpc error:'], ...}
timeout = 30, sleep_time = 5
kwargs = {'headers': {}, 'method': 'PUT', 'url': 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/nonexistent-vmi-for-reset/reset'}
sampler = <timeout_sampler.TimeoutSampler object at 0x7fb72eae1270>

    @staticmethod
    def retry_cluster_exceptions(
        func: Callable,
        exceptions_dict: dict[type[Exception], list[str]] = DEFAULT_CLUSTER_RETRY_EXCEPTIONS,
        timeout: int = TIMEOUT_10SEC,
        sleep_time: int = 1,
        **kwargs: Any,
    ) -> Any:
        try:
            sampler = TimeoutSampler(
                wait_timeout=timeout,
                sleep=sleep_time,
                func=func,
                print_log=False,
                exceptions_dict=exceptions_dict,
                **kwargs,
            )
>           for sample in sampler:
                          ^^^^^^^

.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1141: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <timeout_sampler.TimeoutSampler object at 0x7fb72eae1270>

    def __iter__(self) -> Any:
        """
        Call `func` and yield the result, or raise an exception on timeout.
    
        Yields:
            any: Return value from `func`
    
        Raises:
            TimeoutExpiredError: if `func` takes longer than `wait_timeout` seconds to return a value
        """
        timeout_watch = TimeoutWatch(timeout=self.wait_timeout)
        if self.print_log:
            log = (
                f"Waiting for {self.wait_timeout} seconds"
                f" [{datetime.timedelta(seconds=self.wait_timeout)}], retry every"
                f" {self.sleep} seconds."
            )
    
            if self.print_func_log:
                log += f" ({self._func_log})"
    
            LOGGER.info(log)
    
        last_exp = None
        elapsed_time = None
        while timeout_watch.remaining_time() > 0:
            try:
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
                yield self.func(*self.func_args, **self.func_kwargs)
                time.sleep(self.sleep)
                elapsed_time = None
    
            except Exception as exp:
                last_exp = exp
                elapsed_time = self.wait_timeout - timeout_watch.remaining_time()
    
                if not self._should_ignore_exception(exp=last_exp):
>                   raise TimeoutExpiredError(
                        self._get_exception_log(exp=last_exp), last_exp=last_exp, elapsed_time=elapsed_time
                    )
E                   timeout_sampler.TimeoutExpiredError: Timed Out: 30
E                   Function: kubernetes.client.api_client.request  Kwargs: {'url': 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/nonexistent-vmi-for-reset/reset', 'method': 'PUT', 'headers': {}}
E                   Last exception: ApiException: (404)
E                   Reason: Not Found
E                   HTTP response headers: HTTPHeaderDict({'Audit-Id': '587e9594-e7f3-4419-b738-6ec4dd3ba2c6', 'Cache-Control': 'no-cache, private', 'Content-Length': '326', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:13:27 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '037752b8-5e1f-4e6a-ba43-6a06ea4411b5', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'ec0ccbd6-72eb-4347-b191-56a5ab9a023e'})
E                   HTTP response body: {
E                    "kind": "Status",
E                    "apiVersion": "v1",
E                    "metadata": {},
E                    "status": "Failure",
E                    "message": "virtualmachineinstance.kubevirt.io \"nonexistent-vmi-for-reset\" not found",
E                    "reason": "NotFound",
E                    "details": {
E                     "name": "nonexistent-vmi-for-reset",
E                     "group": "kubevirt.io",
E                     "kind": "virtualmachineinstance"
E                    },
E                    "code": 404
E                   }
E                   .
E                   Elapsed time: 0.6105005741119385 [0:00:00.610501]

.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:171: TimeoutExpiredError

The above exception was the direct cause of the following exception:

self = <tests.virt.node.general.test_vmi_hard_reset.TestVMIHardResetNegative object at 0x7fb734bbb820>
namespace = <ocp_resources.namespace.Namespace object at 0x7fb72f7e88a0>
admin_client = <kubernetes.dynamic.client.DynamicClient object at 0x7fb736211be0>

    @pytest.mark.polarion("CNV-12382")
    def test_reset_nonexistent_vmi_fails(
        self,
        namespace: Namespace,
        admin_client: DynamicClient,
    ) -> None:
        """[NEGATIVE] Test that resetting a non-existent VMI returns a 404 error.
    
        Steps:
            1. Attempt to reset a VMI with a name that does not exist in the namespace
    
        Expected:
            - Reset operation fails with a 404 Not Found error
        """
        nonexistent_vmi = VirtualMachineInstance(
            name="nonexistent-vmi-for-reset",
            namespace=namespace.name,
            client=admin_client,
        )
        with pytest.raises(NotFoundError):
>           nonexistent_vmi.reset()

tests/virt/node/general/test_vmi_hard_reset.py:429: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:75: in reset
    return self.api_request(method="PUT", action="reset")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/ocp_resources/virtual_machine_instance.py:56: in api_request
    return super().api_request(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1321: in api_request
    response = self.retry_cluster_exceptions(
.venv/lib/python3.14/site-packages/ocp_resources/resource.py:1146: in retry_cluster_exceptions
    raise exp.last_exp from exp
.venv/lib/python3.14/site-packages/timeout_sampler/__init__.py:162: in __iter__
    yield self.func(*self.func_args, **self.func_kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.14/site-packages/kubernetes/client/api_client.py:399: in request
    return self.rest_client.PUT(url,
.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:289: in PUT
    return self.request("PUT", url,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <kubernetes.client.rest.RESTClientObject object at 0x7fb736211550>
method = 'PUT'
url = 'https://api.c01-mv-421.rhos-psi.cnv-qe.rhood.us:6443/apis/subresources.kubevirt.io/v1/namespaces/node-general-test-vmi-hard-reset/virtualmachineinstances/nonexistent-vmi-for-reset/reset'
query_params = None, headers = {'Content-Type': 'application/json'}, body = None
post_params = {}, _preload_content = True, _request_timeout = None

    def request(self, method, url, query_params=None, headers=None,
                body=None, post_params=None, _preload_content=True,
                _request_timeout=None):
        """Perform requests.
    
        :param method: http request method
        :param url: http request url
        :param query_params: query parameters in the url
        :param headers: http request headers
        :param body: request json body, for `application/json`
        :param post_params: request post parameters,
                            `application/x-www-form-urlencoded`
                            and `multipart/form-data`
        :param _preload_content: if False, the urllib3.HTTPResponse object will
                                 be returned without reading/decoding response
                                 data. Default is True.
        :param _request_timeout: timeout setting for this request. If one
                                 number provided, it will be total request
                                 timeout. It can also be a pair (tuple) of
                                 (connection, read) timeouts.
        """
        method = method.upper()
        assert method in ['GET', 'HEAD', 'DELETE', 'POST', 'PUT',
                          'PATCH', 'OPTIONS']
    
        if post_params and body:
            raise ApiValueError(
                "body parameter cannot be used with post_params parameter."
            )
    
        post_params = post_params or {}
        headers = headers or {}
    
        timeout = None
        if _request_timeout:
            if isinstance(_request_timeout, (int, ) if six.PY3 else (int, long)):  # noqa: E501,F821
                timeout = urllib3.Timeout(total=_request_timeout)
            elif (isinstance(_request_timeout, tuple) and
                  len(_request_timeout) == 2):
                timeout = urllib3.Timeout(
                    connect=_request_timeout[0], read=_request_timeout[1])
    
        if 'Content-Type' not in headers:
            headers['Content-Type'] = 'application/json'
    
        try:
            # For `POST`, `PUT`, `PATCH`, `OPTIONS`, `DELETE`
            if method in ['POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE']:
                if query_params:
                    url += '?' + urlencode(query_params)
                if (re.search('json', headers['Content-Type'], re.IGNORECASE) or
                        headers['Content-Type'] == 'application/apply-patch+yaml'):
                    if headers['Content-Type'] == 'application/json-patch+json':
                        if not isinstance(body, list):
                            headers['Content-Type'] = \
                                'application/strategic-merge-patch+json'
                    request_body = None
                    if body is not None:
                        request_body = json.dumps(body)
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'application/x-www-form-urlencoded':  # noqa: E501
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=False,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                elif headers['Content-Type'] == 'multipart/form-data':
                    # must del headers['Content-Type'], or the correct
                    # Content-Type which generated by urllib3 will be
                    # overwritten.
                    del headers['Content-Type']
                    r = self.pool_manager.request(
                        method, url,
                        fields=post_params,
                        encode_multipart=True,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                # Pass a `string` parameter directly in the body to support
                # other content types than Json when `body` argument is
                # provided in serialized form
                elif isinstance(body, str) or isinstance(body, bytes):
                    request_body = body
                    r = self.pool_manager.request(
                        method, url,
                        body=request_body,
                        preload_content=_preload_content,
                        timeout=timeout,
                        headers=headers)
                else:
                    # Cannot generate the request from given parameters
                    msg = """Cannot prepare a request message for provided
                             arguments. Please check that your arguments match
                             declared content type."""
                    raise ApiException(status=0, reason=msg)
            # For `GET`, `HEAD`
            else:
                r = self.pool_manager.request(method, url,
                                              fields=query_params,
                                              preload_content=_preload_content,
                                              timeout=timeout,
                                              headers=headers)
        except urllib3.exceptions.SSLError as e:
            msg = "{0}\n{1}".format(type(e).__name__, str(e))
            raise ApiException(status=0, reason=msg)
    
        if _preload_content:
            r = RESTResponse(r)
    
            # In the python 3, the response.data is bytes.
            # we need to decode it to string.
            if six.PY3:
                r.data = r.data.decode('utf8')
    
            # log response body
            logger.debug("response body: %s", r.data)
    
        if not 200 <= r.status <= 299:
>           raise ApiException(http_resp=r)
E           kubernetes.client.exceptions.ApiException: (404)
E           Reason: Not Found
E           HTTP response headers: HTTPHeaderDict({'Audit-Id': '587e9594-e7f3-4419-b738-6ec4dd3ba2c6', 'Cache-Control': 'no-cache, private', 'Content-Length': '326', 'Content-Type': 'application/json', 'Date': 'Thu, 12 Feb 2026 12:13:27 GMT', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'X-Kubernetes-Pf-Flowschema-Uid': '037752b8-5e1f-4e6a-ba43-6a06ea4411b5', 'X-Kubernetes-Pf-Prioritylevel-Uid': 'ec0ccbd6-72eb-4347-b191-56a5ab9a023e'})
E           HTTP response body: {
E            "kind": "Status",
E            "apiVersion": "v1",
E            "metadata": {},
E            "status": "Failure",
E            "message": "virtualmachineinstance.kubevirt.io \"nonexistent-vmi-for-reset\" not found",
E            "reason": "NotFound",
E            "details": {
E             "name": "nonexistent-vmi-for-reset",
E             "group": "kubevirt.io",
E             "kind": "virtualmachineinstance"
E            },
E            "code": 404
E           }

.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:238: ApiException
------------------------------------------------------- TEARDOWN -------------------------------------------------------
2026-02-12T13:13:28.635270 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: kubernetes.dynamic.client.get  Kwargs: {'field_selector': 'metadata.name==vm-negative-reset-1770898245-7650125', 'namespace': 'node-general-test-vmi-hard-reset'})[0m
2026-02-12T13:13:28.953933 timeout_sampler [32mINFO[0m Elapsed time: 0.0001678466796875 [0:00:00.000168][0m
2026-02-12T13:13:28.954179 ocp_resources VirtualMachineInstance [32mINFO[0m Wait until VirtualMachineInstance vm-negative-reset-1770898245-7650125 is deleted[0m
2026-02-12T13:13:28.954247 timeout_sampler [32mINFO[0m Waiting for 480 seconds [0:08:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)[0m
2026-02-12T13:14:05.092591 timeout_sampler [32mINFO[0m Elapsed time: 35.98239064216614 [0:00:35.982391][0m
2026-02-12T13:14:05.092748 ocp_resources VirtualMachine [32mINFO[0m Delete VirtualMachine vm-negative-reset-1770898245-7650125[0m
2026-02-12T13:14:05.418859 ocp_resources VirtualMachine [32mINFO[0m Deleting {'apiVersion': 'kubevirt.io/v1', 'kind': 'VirtualMachine', 'metadata': {'annotations': {'kubemacpool.io/transaction-timestamp': '2026-02-12T12:13:28.482208106Z', 'kubevirt.io/latest-observed-api-version': 'v1', 'kubevirt.io/storage-observed-api-version': 'v1'}, 'creationTimestamp': '2026-02-12T12:10:46Z', 'finalizers': ['kubevirt.io/virtualMachineControllerFinalize'], 'generation': 5, 'labels': {'kubevirt.io/vm': 'vm-negative-reset'}, 'managedFields': [{'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:labels': {'.': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:template': {'.': {}, 'f:metadata': {'.': {}, 'f:creationTimestamp': {}, 'f:labels': {'.': {}, 'f:debugLogs': {}, 'f:kubevirt.io/domain': {}, 'f:kubevirt.io/vm': {}}}, 'f:spec': {'.': {}, 'f:domain': {'.': {}, 'f:cpu': {'.': {}, 'f:cores': {}}, 'f:devices': {'.': {}, 'f:disks': {}, 'f:interfaces': {}, 'f:rng': {}}, 'f:machine': {'.': {}, 'f:type': {}}, 'f:memory': {'.': {}, 'f:guest': {}}}, 'f:networks': {}, 'f:terminationGracePeriodSeconds': {}, 'f:volumes': {}}}}}, 'manager': 'OpenAPI-Generator', 'operation': 'Update', 'time': '2026-02-12T12:10:46Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:kubevirt.io/latest-observed-api-version': {}, 'f:kubevirt.io/storage-observed-api-version': {}}, 'f:finalizers': {'.': {}, 'v:"kubevirt.io/virtualMachineControllerFinalize"': {}}}}, 'manager': 'virt-controller', 'operation': 'Update', 'time': '2026-02-12T12:10:46Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:spec': {'f:runStrategy': {}}}, 'manager': 'virt-api', 'operation': 'Update', 'time': '2026-02-12T12:13:28Z'}, {'apiVersion': 'kubevirt.io/v1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:conditions': {}, 'f:desiredGeneration': {}, 'f:observedGeneration': {}, 'f:printableStatus': {}, 'f:runStrategy': {}, 'f:volumeSnapshotStatuses': {}}}, 'manager': 'virt-controller', 'operation': 'Update', 'subresource': 'status', 'time': '2026-02-12T12:14:04Z'}], 'name': 'vm-negative-reset-1770898245-7650125', 'namespace': 'node-general-test-vmi-hard-reset', 'resourceVersion': '8857054', 'uid': 'f4e158a7-491d-44a4-866f-b99161cec0f5'}, 'spec': {'runStrategy': 'Halted', 'template': {'metadata': {'creationTimestamp': None, 'labels': {'debugLogs': 'true', 'kubevirt.io/domain': 'vm-negative-reset-1770898245-7650125', 'kubevirt.io/vm': 'vm-negative-reset-1770898245-7650125'}}, 'spec': {'architecture': 'amd64', 'domain': {'cpu': {'cores': 1}, 'devices': {'disks': [{'disk': {'bus': 'virtio'}, 'name': 'containerdisk'}, {'disk': {'bus': 'virtio'}, 'name': 'cloudinitdisk'}], 'interfaces': [{'macAddress': '02:22:9f:48:8e:09', 'masquerade': {}, 'name': 'default'}], 'rng': {}}, 'firmware': {'serial': 'a34e644b-ff8d-49e8-a1a5-98e4e81177b8', 'uuid': 'fe6dd347-9b8f-4383-9e61-2c42f06a6e25'}, 'machine': {'type': 'pc-q35-rhel9.6.0'}, 'memory': {'guest': '1Gi'}, 'resources': {}}, 'networks': [{'name': 'default', 'pod': {}}], 'terminationGracePeriodSeconds': 30, 'volumes': [{'containerDisk': {'image': 'quay.io/openshift-cnv/qe-cnv-tests-fedora:41@sha256:a91659fba4e0258dda1be076dd6e56e34d9bf3dce082e57f939994ce0f124348'}, 'name': 'containerdisk'}, {'cloudInitNoCloud': {'userData': '*******'}, 'name': 'cloudinitdisk'}]}}}, 'status': {'conditions': [{'lastProbeTime': '2026-02-12T12:14:04Z', 'lastTransitionTime': '2026-02-12T12:14:04Z', 'message': 'VMI does not exist', 'reason': 'VMINotExists', 'status': 'False', 'type': 'Ready'}, {'lastProbeTime': None, 'lastTransitionTime': None, 'status': 'True', 'type': 'LiveMigratable'}, {'lastProbeTime': None, 'lastTransitionTime': None, 'status': 'True', 'type': 'StorageLiveMigratable'}], 'desiredGeneration': 5, 'observedGeneration': 5, 'printableStatus': 'Stopped', 'runStrategy': 'Halted', 'volumeSnapshotStatuses': [{'enabled': False, 'name': 'containerdisk', 'reason': 'Snapshot is not supported for this volumeSource type [containerdisk]'}, {'enabled': False, 'name': 'cloudinitdisk', 'reason': 'Snapshot is not supported for this volumeSource type [cloudinitdisk]'}]}}[0m
2026-02-12T13:14:05.627027 ocp_resources VirtualMachine [32mINFO[0m Wait until VirtualMachine vm-negative-reset-1770898245-7650125 is deleted[0m
2026-02-12T13:14:05.627212 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)[0m
2026-02-12T13:14:05.769182 timeout_sampler [32mINFO[0m Elapsed time: 0.00011754035949707031 [0:00:00.000118][0m
2026-02-12T13:14:05.769408 ocp_resources Namespace [32mINFO[0m Delete Namespace node-general-test-vmi-hard-reset[0m
2026-02-12T13:14:06.059771 ocp_resources Namespace [32mINFO[0m Deleting {'kind': 'Namespace', 'apiVersion': 'v1', 'metadata': {'name': 'node-general-test-vmi-hard-reset', 'uid': 'fd6fd455-562f-451f-aef2-e739152fe179', 'resourceVersion': '8845117', 'creationTimestamp': '2026-02-12T12:01:11Z', 'labels': {'kubernetes.io/metadata.name': 'node-general-test-vmi-hard-reset', 'pod-security.kubernetes.io/audit': 'restricted', 'pod-security.kubernetes.io/audit-version': 'latest', 'pod-security.kubernetes.io/warn': 'restricted', 'pod-security.kubernetes.io/warn-version': 'latest'}, 'annotations': {'openshift.io/description': '', 'openshift.io/display-name': '', 'openshift.io/requester': 'unprivileged-user', 'openshift.io/sa.scc.mcs': 's0:c29,c9', 'openshift.io/sa.scc.supplemental-groups': '1000830000/10000', 'openshift.io/sa.scc.uid-range': '1000830000/10000', 'security.openshift.io/MinimallySufficientPodSecurityStandard': 'restricted'}, 'managedFields': [{'manager': 'cluster-policy-controller', 'operation': 'Apply', 'apiVersion': 'v1', 'time': '2026-02-12T12:01:11Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:openshift.io/sa.scc.mcs': {}, 'f:openshift.io/sa.scc.supplemental-groups': {}, 'f:openshift.io/sa.scc.uid-range': {}}}}}, {'manager': 'pod-security-admission-label-synchronization-controller', 'operation': 'Apply', 'apiVersion': 'v1', 'time': '2026-02-12T12:01:12Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'f:security.openshift.io/MinimallySufficientPodSecurityStandard': {}}, 'f:labels': {'f:pod-security.kubernetes.io/audit': {}, 'f:pod-security.kubernetes.io/audit-version': {}, 'f:pod-security.kubernetes.io/warn': {}, 'f:pod-security.kubernetes.io/warn-version': {}}}}}, {'manager': 'openshift-apiserver', 'operation': 'Update', 'apiVersion': 'v1', 'time': '2026-02-12T12:01:11Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:openshift.io/description': {}, 'f:openshift.io/display-name': {}, 'f:openshift.io/requester': {}}, 'f:labels': {'.': {}, 'f:kubernetes.io/metadata.name': {}}}}}, {'manager': 'openshift-controller-manager', 'operation': 'Update', 'apiVersion': 'v1', 'time': '2026-02-12T12:01:11Z', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:spec': {'f:finalizers': {}}}, 'subresource': 'finalize'}]}, 'spec': {'finalizers': ['kubernetes']}, 'status': {'phase': 'Active'}}[0m
2026-02-12T13:14:06.210166 ocp_resources Namespace [32mINFO[0m Wait until Namespace node-general-test-vmi-hard-reset is deleted[0m
2026-02-12T13:14:06.210319 timeout_sampler [32mINFO[0m Waiting for 240 seconds [0:04:00], retry every 1 seconds. (Function: ocp_resources.resource.wait_deleted.lambda: self.exists)[0m
2026-02-12T13:14:16.757133 timeout_sampler [32mINFO[0m Elapsed time: 10.40515685081482 [0:00:10.405157][0m
=============================== warnings summary ===============================
tests/virt/node/general/test_vmi_hard_reset.py: 19 warnings
tests/deprecated_api/test_deprecation_audit_logs.py: 5 warnings
.venv/lib/python3.14/site-packages/kubernetes/client/exceptions.py:91: 2 warnings
  /home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/exceptions.py:91: DeprecationWarning: HTTPResponse.getheaders() is deprecated and will be removed in urllib3 v2.1.0. Instead access HTTPResponse.headers directly.
    self.headers = http_resp.getheaders()

tests/virt/node/general/test_vmi_hard_reset.py::TestVMIHardResetNegative::test_reset_stopped_vmi_fails
tests/virt/node/general/test_vmi_hard_reset.py::TestVMIHardResetNegative::test_reset_nonexistent_vmi_fails
  /home/mvavrine/cnv/openshift-virtualization-tests/.venv/lib/python3.14/site-packages/kubernetes/client/rest.py:44: DeprecationWarning: HTTPResponse.getheaders() is deprecated and will be removed in urllib3 v2.1.0. Instead access HTTPResponse.headers directly.
    return self.urllib3_response.getheaders()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/virt/node/general/test_vmi_hard_reset.py::TestVMIHardResetRBAC::test_unprivileged_user_cannot_reset_vmi
FAILED tests/virt/node/general/test_vmi_hard_reset.py::TestVMIHardResetNegative::test_reset_stopped_vmi_fails
FAILED tests/virt/node/general/test_vmi_hard_reset.py::TestVMIHardResetNegative::test_reset_paused_vmi_fails
FAILED tests/virt/node/general/test_vmi_hard_reset.py::TestVMIHardResetNegative::test_reset_nonexistent_vmi_fails
ERROR tests/virt/node/general/test_vmi_hard_reset.py::TestVMIHardResetVirtctl::test_virtctl_reset_triggers_guest_reboot
ERROR tests/deprecated_api/test_deprecation_audit_logs.py::test_deprecated_apis_in_audit_logs
======= 4 failed, 4 passed, 28 warnings, 2 errors in 4309.79s (1:11:49) ========
